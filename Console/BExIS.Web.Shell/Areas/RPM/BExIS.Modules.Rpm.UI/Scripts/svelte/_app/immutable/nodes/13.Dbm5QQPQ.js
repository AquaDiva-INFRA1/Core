import{S as ke,i as Ve,f as K,c as M,a as q,m as U,t as I,b as N,d as O,g as We,e as Xe,h as $t,j as ot,k as ut}from"../chunks/index.DYURmr33.js";import{A as qe,F as ve,q as Yt,d as Zt,a as Me,e as wt,f as xt,b as Pt,P as ei,n as je,j as He,k as Mt,g as we,s as kt}from"../chunks/eslint4b.es.BLUuBmqK.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.CX43xlbX.js";import{H as Vt,s as ye,F as Q,e as T,j,c as $,b as y,d,l as H,a as p,i as C,m as w,v as oe,z as ct,G as Y,w as Ke,E as Fe,I as ti,J as qt,x as ii,t as Ue,k as Oe,n as Z,f as ee,o as Qe,h as ni,q as Ye,g as ai}from"../chunks/scheduler.CYFbRwgw.js";import{a as ri,M as li,h as si,u as oi,E as ui}from"../chunks/ErrorMessage.M_oOSnJZ.js";import{g as ci}from"../chunks/stores.BUBXUlFe.js";import{T as fi,a as di}from"../chunks/TablePlaceholder.CbMr_W_-.js";import{M as ze}from"../chunks/MultiSelect.DUY44LUn.js";import{b as pi,o as mi,p as be,v as se,T as _i}from"../chunks/vest.production.D6A33y39.js";import{T as gi}from"../chunks/TextArea.DOnOi33E.js";import{u as Ut,f as Ot,g as lt,V as Je,d as hi}from"../chunks/types.B8wc0Djk.js";import{w as At}from"../chunks/index.C7Wq-A05.js";import{M as bi}from"../chunks/MissingValues.D7KPXHEU.js";import{j as vi,k as Ti,b as $i}from"../chunks/services.CkTcXgKw.js";function wi(){return{}}const _n=Object.freeze(Object.defineProperty({__proto__:null,load:wi},Symbol.toStringTag,{value:"Module"})),Pe=At([]),st=At([]),ki=async()=>{try{const n=await qe.get("/rpm/VariableTemplate/GetVariableTemplates");return console.log("ğŸš€ ~ file: services.ts:15 ~ getVariableTemplates ~ response:",n),n.data}catch(n){throw console.error(n),n}},Vi=async n=>{try{return(await qe.post("/rpm/VariableTemplate/Update",n)).data}catch(t){throw console.error(t),t}},yi=async n=>{try{return(await qe.delete("/rpm/VariableTemplate/Delete",{id:n})).data}catch(t){throw console.error(t),t}},Ei=async()=>{try{return(await qe.get("/rpm/variableTemplate/getMeanings")).data}catch(n){throw console.error(n),n}},Di=async()=>{try{return(await qe.get("/rpm/variableTemplate/GetConstraints")).data}catch(n){throw console.error(n),n}},ce=pi((n={},t)=>{mi(t),be("name","name is required",()=>{se(n.name).isNotBlank()}),be("name","name allready exist",()=>{const e=n.id>0?Vt(Pe).find(a=>a.id==n.id):{id:0,name:""},i=Vt(Pe).map(a=>a.name!=(e==null?void 0:e.name)?a.name:"");se(n.name).notInside(i)}),be("description","description is required",()=>{se(n.description).isNotBlank()}),be("dataType","datatype is required",()=>{se(n.dataType).isNotNull(),se(n.dataType.text).isNotUndefined(),se(n.dataType.text).isNotEmpty()}),be("dataType","data type not match with the unit",()=>!!n.unit.dataTypes.includes(n.dataType.text)),be("unit","unit is required",()=>{se(n.unit).isNotNull(),se(n.unit.text).isNotUndefined(),se(n.unit.text).isNotEmpty()}),be("unit","unit not match with the data type",()=>!!n.unit.dataTypes.includes(n.dataType.text))});function Ii(n){let t="Approved",e;return{c(){e=Ue(t)},l(i){e=Oe(i,t)},m(i,a){C(i,e,a)},p:Z,d(i){i&&d(e)}}}function Si(n){let t,e,i,a,r,l,u,s,f,E,h,S,D,k,V,_,m,g,F,te,ie,Te,b,A,ne,fe,ae,z,Ee,De,Ie,de,J,Se,Ne,Ce,ue,R,c,G,W,L,P,Ze,X,pe,Ae,Be,Le,me,xe,ft;function Bt(o){n[13](o)}let dt={id:"name",label:"Name",valid:n[4].isValid("name"),invalid:n[4].hasErrors("name"),feedback:n[4].getErrors("name"),required:!0,help:Re};n[0].name!==void 0&&(dt.value=n[0].name),r=new _i({props:dt}),Q.push(()=>K(r,"value",Bt)),r.$on("input",n[8]);function Lt(o){n[14](o)}let pt={id:"description",label:"Description",valid:n[4].isValid("description"),invalid:n[4].hasErrors("description"),feedback:n[4].getErrors("description"),help:Re,required:!0};n[0].description!==void 0&&(pt.value=n[0].description),f=new gi({props:pt}),Q.push(()=>K(f,"value",Lt)),f.$on("input",n[8]);function Gt(o){n[15](o)}function jt(o){n[16](o)}let et={id:"unit",title:"Unit",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,clearable:!1,placeholder:"-- Please select --",invalid:n[4].hasErrors("unit"),feedback:n[4].getErrors("unit"),help:Re,loading:n[5],required:!0};n[3]!==void 0&&(et.source=n[3]),n[0].unit!==void 0&&(et.target=n[0].unit),k=new ze({props:et}),Q.push(()=>K(k,"source",Gt)),Q.push(()=>K(k,"target",jt)),k.$on("change",n[17]);function Ht(o){n[18](o)}function zt(o){n[19](o)}let tt={id:"dataType",title:"Data Type",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,placeholder:"-- Please select --",invalid:n[4].hasErrors("dataType"),feedback:n[4].getErrors("dataType"),clearable:!1,help:Re,loading:n[5],required:!0};n[2]!==void 0&&(tt.source=n[2]),n[0].dataType!==void 0&&(tt.target=n[0].dataType),F=new ze({props:tt}),Q.push(()=>K(F,"source",Ht)),Q.push(()=>K(F,"target",zt)),F.$on("change",n[20]);function Jt(o){n[21](o)}let mt={};n[0].missingValues!==void 0&&(mt.list=n[0].missingValues),A=new bi({props:mt}),Q.push(()=>K(A,"list",Jt));function Rt(o){n[23](o)}function Wt(o){n[24](o)}let it={id:"links",title:"Meanings",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!0,placeholder:"-- Please select --",loading:n[5]};n[6]!==void 0&&(it.source=n[6]),n[0].meanings!==void 0&&(it.target=n[0].meanings),z=new ze({props:it}),Q.push(()=>K(z,"source",Rt)),Q.push(()=>K(z,"target",Wt));function Xt(o){n[25](o)}function Kt(o){n[26](o)}let nt={id:"constraints",title:"Constraints",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!0,placeholder:"-- Please select --",loading:n[5]};n[7]!==void 0&&(nt.source=n[7]),n[0].constraints!==void 0&&(nt.target=n[0].constraints),J=new ze({props:nt}),Q.push(()=>K(J,"source",Xt)),Q.push(()=>K(J,"target",Kt));function Qt(o){n[27](o)}let _t={name:"Approved",$$slots:{default:[Ii]},$$scope:{ctx:n}};return n[0].approved!==void 0&&(_t.checked=n[0].approved),R=new ri({props:_t}),Q.push(()=>K(R,"checked",Qt)),R.$on("change",n[28]),P=new ve({props:{icon:Yt}}),pe=new ve({props:{icon:Zt}}),{c(){t=T("form"),e=T("div"),i=T("div"),a=T("div"),M(r.$$.fragment),u=j(),s=T("div"),M(f.$$.fragment),h=j(),S=T("div"),D=T("div"),M(k.$$.fragment),m=j(),g=T("div"),M(F.$$.fragment),Te=j(),b=T("div"),M(A.$$.fragment),fe=j(),ae=T("div"),M(z.$$.fragment),Ie=j(),de=T("div"),M(J.$$.fragment),Ce=j(),ue=T("div"),M(R.$$.fragment),G=j(),W=T("div"),L=T("button"),M(P.$$.fragment),Ze=j(),X=T("button"),M(pe.$$.fragment),this.h()},l(o){t=$(o,"FORM",{});var v=y(t);e=$(v,"DIV",{id:!0,class:!0});var B=y(e);i=$(B,"DIV",{class:!0});var x=y(i);a=$(x,"DIV",{class:!0});var re=y(a);q(r.$$.fragment,re),re.forEach(d),u=H(x),s=$(x,"DIV",{class:!0});var le=y(s);q(f.$$.fragment,le),le.forEach(d),x.forEach(d),h=H(B),S=$(B,"DIV",{class:!0});var _e=y(S);D=$(_e,"DIV",{class:!0});var ge=y(D);q(k.$$.fragment,ge),ge.forEach(d),m=H(_e),g=$(_e,"DIV",{class:!0});var he=y(g);q(F.$$.fragment,he),he.forEach(d),_e.forEach(d),Te=H(B),b=$(B,"DIV",{id:!0});var $e=y(b);q(A.$$.fragment,$e),$e.forEach(d),fe=H(B),ae=$(B,"DIV",{});var gt=y(ae);q(z.$$.fragment,gt),gt.forEach(d),Ie=H(B),de=$(B,"DIV",{});var ht=y(de);q(J.$$.fragment,ht),ht.forEach(d),Ce=H(B),ue=$(B,"DIV",{class:!0});var bt=y(ue);q(R.$$.fragment,bt),bt.forEach(d),G=H(B),W=$(B,"DIV",{class:!0});var Ge=y(W);L=$(Ge,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var vt=y(L);q(P.$$.fragment,vt),vt.forEach(d),Ze=H(Ge),X=$(Ge,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var Tt=y(X);q(pe.$$.fragment,Tt),Tt.forEach(d),Ge.forEach(d),B.forEach(d),v.forEach(d),this.h()},h(){p(a,"class","grow"),p(s,"class","grow"),p(i,"class","flex gap-5"),p(D,"class","grow w-1/2"),p(g,"class","grow w-1/2"),p(S,"class","flex gap-5"),p(b,"id","missingvaluesContainer"),p(ue,"class","flex gap-5"),p(L,"type","button"),p(L,"class","btn variant-filled-warning h-9 w-16 shadow-md"),p(L,"title","Cancel"),p(L,"id","cancel"),p(X,"type","submit"),p(X,"class","btn variant-filled-primary h-9 w-16 shadow-md"),p(X,"title",Ae="Save Variable Template, "+n[0].name),p(X,"id","save"),X.disabled=Be=!n[1],p(W,"class","py-5 text-right col-span-2"),p(e,"id",Le="variable-"+n[0].id+"-form"),p(e,"class","flex-col space-y-5 card shadow-md p-5")},m(o,v){C(o,t,v),w(t,e),w(e,i),w(i,a),U(r,a,null),w(i,u),w(i,s),U(f,s,null),w(e,h),w(e,S),w(S,D),U(k,D,null),w(S,m),w(S,g),U(F,g,null),w(e,Te),w(e,b),U(A,b,null),w(e,fe),w(e,ae),U(z,ae,null),w(e,Ie),w(e,de),U(J,de,null),w(e,Ce),w(e,ue),U(R,ue,null),w(e,G),w(e,W),w(W,L),U(P,L,null),w(W,Ze),w(W,X),U(pe,X,null),me=!0,xe||(ft=[oe(b,"mouseover",n[22]),oe(L,"click",n[29]),oe(t,"submit",ct(n[11]))],xe=!0)},p(o,v){const B={};v[0]&16&&(B.valid=o[4].isValid("name")),v[0]&16&&(B.invalid=o[4].hasErrors("name")),v[0]&16&&(B.feedback=o[4].getErrors("name")),!l&&v[0]&1&&(l=!0,B.value=o[0].name,Y(()=>l=!1)),r.$set(B);const x={};v[0]&16&&(x.valid=o[4].isValid("description")),v[0]&16&&(x.invalid=o[4].hasErrors("description")),v[0]&16&&(x.feedback=o[4].getErrors("description")),!E&&v[0]&1&&(E=!0,x.value=o[0].description,Y(()=>E=!1)),f.$set(x);const re={};v[0]&16&&(re.invalid=o[4].hasErrors("unit")),v[0]&16&&(re.feedback=o[4].getErrors("unit")),v[0]&32&&(re.loading=o[5]),!V&&v[0]&8&&(V=!0,re.source=o[3],Y(()=>V=!1)),!_&&v[0]&1&&(_=!0,re.target=o[0].unit,Y(()=>_=!1)),k.$set(re);const le={};v[0]&16&&(le.invalid=o[4].hasErrors("dataType")),v[0]&16&&(le.feedback=o[4].getErrors("dataType")),v[0]&32&&(le.loading=o[5]),!te&&v[0]&4&&(te=!0,le.source=o[2],Y(()=>te=!1)),!ie&&v[0]&1&&(ie=!0,le.target=o[0].dataType,Y(()=>ie=!1)),F.$set(le);const _e={};!ne&&v[0]&1&&(ne=!0,_e.list=o[0].missingValues,Y(()=>ne=!1)),A.$set(_e);const ge={};v[0]&32&&(ge.loading=o[5]),!Ee&&v[0]&64&&(Ee=!0,ge.source=o[6],Y(()=>Ee=!1)),!De&&v[0]&1&&(De=!0,ge.target=o[0].meanings,Y(()=>De=!1)),z.$set(ge);const he={};v[0]&32&&(he.loading=o[5]),!Se&&v[0]&128&&(Se=!0,he.source=o[7],Y(()=>Se=!1)),!Ne&&v[0]&1&&(Ne=!0,he.target=o[0].constraints,Y(()=>Ne=!1)),J.$set(he);const $e={};v[1]&128&&($e.$$scope={dirty:v,ctx:o}),!c&&v[0]&1&&(c=!0,$e.checked=o[0].approved,Y(()=>c=!1)),R.$set($e),(!me||v[0]&1&&Ae!==(Ae="Save Variable Template, "+o[0].name))&&p(X,"title",Ae),(!me||v[0]&2&&Be!==(Be=!o[1]))&&(X.disabled=Be),(!me||v[0]&1&&Le!==(Le="variable-"+o[0].id+"-form"))&&p(e,"id",Le)},i(o){me||(I(r.$$.fragment,o),I(f.$$.fragment,o),I(k.$$.fragment,o),I(F.$$.fragment,o),I(A.$$.fragment,o),I(z.$$.fragment,o),I(J.$$.fragment,o),I(R.$$.fragment,o),I(P.$$.fragment,o),I(pe.$$.fragment,o),me=!0)},o(o){N(r.$$.fragment,o),N(f.$$.fragment,o),N(k.$$.fragment,o),N(F.$$.fragment,o),N(A.$$.fragment,o),N(z.$$.fragment,o),N(J.$$.fragment,o),N(R.$$.fragment,o),N(P.$$.fragment,o),N(pe.$$.fragment,o),me=!1},d(o){o&&d(t),O(r),O(f),O(k),O(F),O(A),O(z),O(J),O(R),O(P),O(pe),xe=!1,Ke(ft)}}}let Re=!0;function Ni(n,t,e){let i,a,r,l;Fe(n,Ut,c=>e(31,i=c)),Fe(n,Ot,c=>e(32,a=c)),Fe(n,st,c=>e(6,r=c)),Fe(n,lt,c=>e(7,l=c));let{missingValues:u}=t,{variable:s}=t,f,E,{isValid:h=!1}=t,S=!1,D=ce.get();const k=ti();qt(()=>{console.log("variable",s),ce.reset(),e(2,f=a),e(3,E=i),setTimeout(async()=>{s.id>0&&e(4,D=ce(s,"")),F()},10)});function V(c){setTimeout(async()=>{e(4,D=ce(s,c.target.id))},100)}function _(c,G){e(5,S=!0),setTimeout(async()=>{console.log(s),e(4,D=ce(s,G)),G=="dataType"&&e(4,D=ce(s,"unit")),G=="unit"&&e(4,D=ce(s,"dataType")),F(),e(5,S=!1)},100)}function m(){ce.reset(),k("cancel")}async function g(){var c=await Vi(s);k(c?"success":"fail")}function F(){console.log("filter lists"),te(s.unit,a),ie(s.dataType,i)}function te(c,G){let W=""+(c==null?void 0:c.text),L="others";c!=null&&c!=null&&c.dataTypes.length>0&&(G.forEach(P=>{P.group=c.dataTypes.includes(P.text)==!0?W:L}),e(2,f=[...G.filter(P=>P.group!=L),...G.filter(P=>P.group==L)]))}function ie(c,G){let W=""+(c==null?void 0:c.text),L="others";c&&G&&(G.forEach(P=>{P.group=P.dataTypes.includes(c.text)==!0?W:L}),e(3,E=[...G.filter(P=>P.group!=L),...G.filter(P=>P.group==L)]))}function Te(c){n.$$.not_equal(s.name,c)&&(s.name=c,e(0,s))}function b(c){n.$$.not_equal(s.description,c)&&(s.description=c,e(0,s))}function A(c){E=c,e(3,E)}function ne(c){n.$$.not_equal(s.unit,c)&&(s.unit=c,e(0,s))}const fe=c=>_(c,"unit");function ae(c){f=c,e(2,f)}function z(c){n.$$.not_equal(s.dataType,c)&&(s.dataType=c,e(0,s))}const Ee=c=>_(c,"dataType");function De(c){n.$$.not_equal(s.missingValues,c)&&(s.missingValues=c,e(0,s))}const Ie=()=>{Me.show("missingvaluesContainer")};function de(c){r=c,st.set(r)}function J(c){n.$$.not_equal(s.meanings,c)&&(s.meanings=c,e(0,s))}function Se(c){l=c,lt.set(l)}function Ne(c){n.$$.not_equal(s.constraints,c)&&(s.constraints=c,e(0,s))}function Ce(c){n.$$.not_equal(s.approved,c)&&(s.approved=c,e(0,s))}function ue(c){ii.call(this,n,c)}const R=()=>m();return n.$$set=c=>{"missingValues"in c&&e(12,u=c.missingValues),"variable"in c&&e(0,s=c.variable),"isValid"in c&&e(1,h=c.isValid)},n.$$.update=()=>{n.$$.dirty[0]&1,n.$$.dirty[0]&4,n.$$.dirty[0]&8,n.$$.dirty[0]&16&&e(1,h=D.isValid())},[s,h,f,E,D,S,r,l,V,_,m,g,u,Te,b,A,ne,fe,ae,z,Ee,De,Ie,de,J,Se,Ne,Ce,ue,R]}class Ci extends ke{constructor(t){super(),Ve(this,t,Ni,Si,ye,{missingValues:12,variable:0,isValid:1},null,[-1,-1])}}function yt(n){let t=n[0].text+"",e;return{c(){e=Ue(t)},l(i){e=Oe(i,t)},m(i,a){C(i,e,a)},p(i,a){a&1&&t!==(t=i[0].text+"")&&Qe(e,t)},d(i){i&&d(e)}}}function Fi(n){let t,e=n[0]!=null&&n[0].text!=null&&yt(n);return{c(){e&&e.c(),t=ee()},l(i){e&&e.l(i),t=ee()},m(i,a){e&&e.m(i,a),C(i,t,a)},p(i,[a]){i[0]!=null&&i[0].text!=null?e?e.p(i,a):(e=yt(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:Z,o:Z,d(i){i&&d(t),e&&e.d(i)}}}function Pi(n,t,e){let{value:i}=t;return n.$$set=a=>{"value"in a&&e(0,i=a.value)},[i]}class at extends ke{constructor(t){super(),Ve(this,t,Pi,Fi,ye,{value:0})}}function Et(n,t,e){const i=n.slice();return i[1]=t[e],i}function Dt(n){let t;function e(r,l){if(r[0].length>1)return qi;if(r[0][0]!=null&&r[0][0]!=null)return Mi}let i=e(n),a=i&&i(n);return{c(){a&&a.c(),t=ee()},l(r){a&&a.l(r),t=ee()},m(r,l){a&&a.m(r,l),C(r,t,l)},p(r,l){i===(i=e(r))&&a?a.p(r,l):(a&&a.d(1),a=i&&i(r),a&&(a.c(),a.m(t.parentNode,t)))},d(r){r&&d(t),a&&a.d(r)}}}function Mi(n){let t=n[0][0]+"",e;return{c(){e=Ue(t)},l(i){e=Oe(i,t)},m(i,a){C(i,e,a)},p(i,a){a&1&&t!==(t=i[0][0]+"")&&Qe(e,t)},d(i){i&&d(e)}}}function qi(n){let t,e=wt(n[0]),i=[];for(let a=0;a<e.length;a+=1)i[a]=St(Et(n,e,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=ee()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);t=ee()},m(a,r){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(a,r);C(a,t,r)},p(a,r){if(r&1){e=wt(a[0]);let l;for(l=0;l<e.length;l+=1){const u=Et(a,e,l);i[l]?i[l].p(u,r):(i[l]=St(u),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=e.length}},d(a){a&&d(t),ni(i,a)}}}function It(n){let t,e=n[1]+"",i;return{c(){t=T("li"),i=Ue(e)},l(a){t=$(a,"LI",{});var r=y(t);i=Oe(r,e),r.forEach(d)},m(a,r){C(a,t,r),w(t,i)},p(a,r){r&1&&e!==(e=a[1]+"")&&Qe(i,e)},d(a){a&&d(t)}}}function St(n){let t,e=n[1]!=null&&It(n);return{c(){e&&e.c(),t=ee()},l(i){e&&e.l(i),t=ee()},m(i,a){e&&e.m(i,a),C(i,t,a)},p(i,a){i[1]!=null?e?e.p(i,a):(e=It(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(i){i&&d(t),e&&e.d(i)}}}function Ui(n){let t,e=n[0]!=null&&n[0]!=null&&Dt(n);return{c(){t=T("div"),e&&e.c()},l(i){t=$(i,"DIV",{});var a=y(t);e&&e.l(a),a.forEach(d)},m(i,a){C(i,t,a),e&&e.m(t,null)},p(i,[a]){i[0]!=null&&i[0]!=null?e?e.p(i,a):(e=Dt(i),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:Z,o:Z,d(i){i&&d(t),e&&e.d()}}}function Oi(n,t,e){let{value:i}=t;return n.$$set=a=>{"value"in a&&e(0,i=a.value)},[i]}class rt extends ke{constructor(t){super(),Ve(this,t,Oi,Ui,ye,{value:0})}}function Ai(n){let t,e;return{c(){t=T("input"),this.h()},l(i){t=$(i,"INPUT",{type:!0,name:!0,id:!0}),this.h()},h(){p(t,"type","checkbox"),p(t,"name","isApproved"),p(t,"id",e=n[1].id),t.checked=n[0],t.disabled=!0},m(i,a){C(i,t,a)},p(i,[a]){a&2&&e!==(e=i[1].id)&&p(t,"id",e),a&1&&(t.checked=i[0])},i:Z,o:Z,d(i){i&&d(t)}}}function Bi(n,t,e){let{value:i}=t,{row:a}=t;return n.$$set=r=>{"value"in r&&e(0,i=r.value),"row"in r&&e(1,a=r.row)},[i,a]}class Nt extends ke{constructor(t){super(),Ve(this,t,Bi,Ai,ye,{value:0,row:1})}}function Li(n){let t,e,i,a,r;return e=new ve({props:{icon:Pt}}),{c(){t=T("button"),M(e.$$.fragment),this.h()},l(l){t=$(l,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var u=y(t);q(e.$$.fragment,u),u.forEach(d),this.h()},h(){p(t,"type","button"),p(t,"class","chip variant-filled-error shadow-md"),p(t,"title",i="Delete Variable Template, "+n[0].name),p(t,"id",a="delete-"+n[0].id),t.disabled=!0},m(l,u){C(l,t,u),U(e,t,null),r=!0},p(l,u){(!r||u&1&&i!==(i="Delete Variable Template, "+l[0].name))&&p(t,"title",i),(!r||u&1&&a!==(a="delete-"+l[0].id))&&p(t,"id",a)},i(l){r||(I(e.$$.fragment,l),r=!0)},o(l){N(e.$$.fragment,l),r=!1},d(l){l&&d(t),O(e)}}}function Gi(n){let t,e,i,a,r,l,u;return e=new ve({props:{icon:Pt}}),{c(){t=T("button"),M(e.$$.fragment),this.h()},l(s){t=$(s,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var f=y(t);q(e.$$.fragment,f),f.forEach(d),this.h()},h(){p(t,"type","button"),p(t,"class","chip variant-filled-error shadow-md"),p(t,"title",i="Delete Variable Template, "+n[0].name),p(t,"id",a="delete-"+n[0].id)},m(s,f){C(s,t,f),U(e,t,null),r=!0,l||(u=[oe(t,"mouseover",n[4]),oe(t,"click",ct(n[5]))],l=!0)},p(s,f){(!r||f&1&&i!==(i="Delete Variable Template, "+s[0].name))&&p(t,"title",i),(!r||f&1&&a!==(a="delete-"+s[0].id))&&p(t,"id",a)},i(s){r||(I(e.$$.fragment,s),r=!0)},o(s){N(e.$$.fragment,s),r=!1},d(s){s&&d(t),O(e),l=!1,Ke(u)}}}function ji(n){let t,e,i,a,r,l,u,s,f,E,h,S;a=new ve({props:{icon:xt}});const D=[Gi,Li],k=[];function V(_,m){return _[0].inUse===!1?0:1}return s=V(n),f=k[s]=D[s](n),{c(){t=T("tableOption"),e=T("div"),i=T("button"),M(a.$$.fragment),u=j(),f.c(),this.h()},l(_){t=$(_,"TABLEOPTION",{});var m=y(t);e=$(m,"DIV",{class:!0});var g=y(e);i=$(g,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var F=y(i);q(a.$$.fragment,F),F.forEach(d),u=H(g),f.l(g),g.forEach(d),m.forEach(d),this.h()},h(){p(i,"type","button"),p(i,"class","chip variant-filled-primary shadow-md"),p(i,"title",r="Edit Variable Template, "+n[0].name),p(i,"id",l="edit-"+n[0].id),p(e,"class","w-18")},m(_,m){C(_,t,m),w(t,e),w(e,i),U(a,i,null),w(e,u),k[s].m(e,null),E=!0,h||(S=[oe(i,"mouseover",n[2]),oe(i,"click",ct(n[3]))],h=!0)},p(_,[m]){(!E||m&1&&r!==(r="Edit Variable Template, "+_[0].name))&&p(i,"title",r),(!E||m&1&&l!==(l="edit-"+_[0].id))&&p(i,"id",l);let g=s;s=V(_),s===g?k[s].p(_,m):(We(),N(k[g],1,1,()=>{k[g]=null}),Xe(),f=k[s],f?f.p(_,m):(f=k[s]=D[s](_),f.c()),I(f,1),f.m(e,null))},i(_){E||(I(a.$$.fragment,_),I(f),E=!0)},o(_){N(a.$$.fragment,_),N(f),E=!1},d(_){_&&d(t),O(a),k[s].d(),h=!1,Ke(S)}}}function Hi(n,t,e){let{row:i}=t,{dispatchFn:a}=t;const r=()=>{Me.show("edit")},l=()=>a({type:{action:"edit",id:i.id}}),u=()=>{Me.show("delete")},s=()=>a({type:{action:"delete",id:i.id}});return n.$$set=f=>{"row"in f&&e(0,i=f.row),"dispatchFn"in f&&e(1,a=f.dispatchFn)},[i,a,r,l,u,s]}class zi extends ke{constructor(t){super(),Ve(this,t,Hi,ji,ye,{row:0,dispatchFn:1})}}const Ji=[{id:"create",name:"Create neáº‡ Variable Template",description:"Click here to ceate a new Variable Template"},{id:"delete",name:"Delete Variable Template",description:"Click here to detete the Variable Template"},{id:"edit",name:"Edit Variable Template",description:"Click here to edit the Variable Template"},{id:"save",name:"Save Variable Template",description:"Click here to save the Variable Template"},{id:"cancel",name:"Cancel",description:"Click here to cancel"},{id:"name",name:"Name",description:"Name of the Variable Template. <li>Has to be unique.</li>"},{id:"description",name:"Description",description:"Description of th Variable Template. <li>a short overview how the Variable Template shold be used.</li>"},{id:"dataType",name:"Data Type",description:"Type od the values <li>eg. number, text, boolean etc.</li>"},{id:"unit",name:"Unit",description:"Type od the values <li>eg. kg, cm, % etc.</li>"},{id:"missingvaluesContainer",name:"MissingValues",description:"Please insert placeholders here to describe that the value cannot be measured.</br> eg: <b>NA - Not available<b>"}];function Ri(n){let t,e;return t=new ui({props:{error:n[20]}}),{c(){M(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,a){U(t,i,a),e=!0},p:Z,i(i){e||(I(t.$$.fragment,i),e=!0)},o(i){N(t.$$.fragment,i),e=!1},d(i){O(t,i)}}}function Wi(n){let t,e,i,a,r,l,u,s,f,E,h;const S=[Ki,Xi],D=[];function k(m,g){return m[0].id<1?0:1}i=k(n),a=D[i]=S[i](n);let V=!n[1]&&Ct(n),_=n[1]&&Ft(n);return E=new fi({props:{config:n[3]}}),E.$on("action",n[14]),{c(){t=T("div"),e=T("div"),a.c(),r=j(),l=T("div"),V&&V.c(),u=j(),_&&_.c(),s=j(),f=T("div"),M(E.$$.fragment),this.h()},l(m){t=$(m,"DIV",{class:!0});var g=y(t);e=$(g,"DIV",{class:!0});var F=y(e);a.l(F),F.forEach(d),r=H(g),l=$(g,"DIV",{class:!0});var te=y(l);V&&V.l(te),te.forEach(d),g.forEach(d),u=H(m),_&&_.l(m),s=H(m),f=$(m,"DIV",{class:!0});var ie=y(f);q(E.$$.fragment,ie),ie.forEach(d),this.h()},h(){p(e,"class","h3 h-9"),p(l,"class","text-right"),p(t,"class","grid grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(f,"class","table table-compact w-full")},m(m,g){C(m,t,g),w(t,e),D[i].m(e,null),w(t,r),w(t,l),V&&V.m(l,null),C(m,u,g),_&&_.m(m,g),C(m,s,g),C(m,f,g),U(E,f,null),h=!0},p(m,g){let F=i;i=k(m),i===F?D[i].p(m,g):(We(),N(D[F],1,1,()=>{D[F]=null}),Xe(),a=D[i],a?a.p(m,g):(a=D[i]=S[i](m),a.c()),I(a,1),a.m(e,null)),m[1]?V&&(We(),N(V,1,1,()=>{V=null}),Xe()):V?(V.p(m,g),g&2&&I(V,1)):(V=Ct(m),V.c(),I(V,1),V.m(l,null)),m[1]?_?(_.p(m,g),g&2&&I(_,1)):(_=Ft(m),_.c(),I(_,1),_.m(s.parentNode,s)):_&&(We(),N(_,1,1,()=>{_=null}),Xe())},i(m){h||(I(a),I(V),I(_),I(E.$$.fragment,m),h=!0)},o(m){N(a),N(V),N(_),N(E.$$.fragment,m),h=!1},d(m){m&&(d(t),d(u),d(s),d(f)),D[i].d(),V&&V.d(),_&&_.d(m),O(E)}}}function Xi(n){let t,e=n[0].name+"",i,a,r,l;return{c(){t=T("span"),i=Ue(e)},l(u){t=$(u,"SPAN",{});var s=y(t);i=Oe(s,e),s.forEach(d)},m(u,s){C(u,t,s),w(t,i),l=!0},p(u,s){(!l||s&1)&&e!==(e=u[0].name+"")&&Qe(i,e)},i(u){l||(u&&Ye(()=>{l&&(r&&r.end(1),a=ot(t,we,{delay:400}),a.start())}),l=!0)},o(u){a&&a.invalidate(),u&&(r=ut(t,we,{})),l=!1},d(u){u&&d(t),u&&r&&r.end()}}}function Ki(n){let t,e="Create neáº‡ Variable Template",i,a,r;return{c(){t=T("span"),t.textContent=e},l(l){t=$(l,"SPAN",{"data-svelte-h":!0}),ai(t)!=="svelte-1uad05v"&&(t.textContent=e)},m(l,u){C(l,t,u),r=!0},p:Z,i(l){r||(l&&Ye(()=>{r&&(a&&a.end(1),i=ot(t,we,{delay:400}),i.start())}),r=!0)},o(l){i&&i.invalidate(),l&&(a=ut(t,we,{})),r=!1},d(l){l&&d(t),l&&a&&a.end()}}}function Ct(n){let t,e,i,a,r,l;return e=new ve({props:{icon:Mt}}),{c(){t=T("button"),M(e.$$.fragment),this.h()},l(u){t=$(u,"BUTTON",{class:!0,title:!0,id:!0});var s=y(t);q(e.$$.fragment,s),s.forEach(d),this.h()},h(){p(t,"class","btn variant-filled-secondary shadow-md h-9 w-16"),p(t,"title","Create neáº‡ Variable Template"),p(t,"id","create")},m(u,s){C(u,t,s),U(e,t,null),a=!0,r||(l=[oe(t,"mouseover",n[10]),oe(t,"click",n[11])],r=!0)},p:Z,i(u){a||(I(e.$$.fragment,u),u&&Ye(()=>{a&&(i||(i=$t(t,we,{},!0)),i.run(1))}),a=!0)},o(u){N(e.$$.fragment,u),u&&(i||(i=$t(t,we,{},!1)),i.run(0)),a=!1},d(u){u&&d(t),O(e),u&&i&&i.end(),r=!1,Ke(l)}}}function Ft(n){let t,e,i,a,r;return e=new Ci({props:{variable:n[0],missingValues:n[2]}}),e.$on("cancel",n[12]),e.$on("success",n[13]),e.$on("fail",n[8]),{c(){t=T("div"),M(e.$$.fragment)},l(l){t=$(l,"DIV",{});var u=y(t);q(e.$$.fragment,u),u.forEach(d)},m(l,u){C(l,t,u),U(e,t,null),r=!0},p(l,u){const s={};u&1&&(s.variable=l[0]),e.$set(s)},i(l){r||(I(e.$$.fragment,l),l&&Ye(()=>{r&&(a&&a.end(1),i=ot(t,kt,{}),i.start())}),r=!0)},o(l){N(e.$$.fragment,l),i&&i.invalidate(),l&&(a=ut(t,kt,{})),r=!1},d(l){l&&d(t),O(e),l&&a&&a.end()}}}function Qi(n){let t,e,i,a,r,l,u,s,f,E;return l=new ve({props:{icon:Mt}}),f=new di({props:{cols:5}}),{c(){t=T("div"),e=T("div"),i=j(),a=T("div"),r=T("button"),M(l.$$.fragment),u=j(),s=T("div"),M(f.$$.fragment),this.h()},l(h){t=$(h,"DIV",{class:!0});var S=y(t);e=$(S,"DIV",{class:!0}),y(e).forEach(d),i=H(S),a=$(S,"DIV",{class:!0});var D=y(a);r=$(D,"BUTTON",{class:!0});var k=y(r);q(l.$$.fragment,k),k.forEach(d),D.forEach(d),S.forEach(d),u=H(h),s=$(h,"DIV",{class:!0});var V=y(s);q(f.$$.fragment,V),V.forEach(d),this.h()},h(){p(e,"class","h-9 w-96 placeholder animate-pulse"),p(r,"class","btn placeholder animate-pulse shadow-md h-9 w-16"),p(a,"class","flex justify-end"),p(t,"class","grid w-full grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(s,"class","table-container w-full")},m(h,S){C(h,t,S),w(t,e),w(t,i),w(t,a),w(a,r),U(l,r,null),C(h,u,S),C(h,s,S),U(f,s,null),E=!0},p:Z,i(h){E||(I(l.$$.fragment,h),I(f.$$.fragment,h),E=!0)},o(h){N(l.$$.fragment,h),N(f.$$.fragment,h),E=!1},d(h){h&&(d(t),d(u),d(s)),O(l),O(f)}}}function Yi(n){let t,e,i={ctx:n,current:null,token:null,hasCatch:!0,pending:Qi,then:Wi,catch:Ri,error:20,blocks:[,,,]};return si(n[4](),i),{c(){t=ee(),i.block.c()},l(a){t=ee(),i.block.l(a)},m(a,r){C(a,t,r),i.block.m(a,i.anchor=r),i.mount=()=>t.parentNode,i.anchor=t,e=!0},p(a,r){n=a,oi(i,n,r)},i(a){e||(I(i.block),e=!0)},o(a){for(let r=0;r<3;r+=1){const l=i.blocks[r];N(l)}e=!1},d(a){a&&d(t),i.block.d(a),i.token=null,i=null}}}function Zi(n){let t,e,i,a;return t=new ei({props:{help:!0,title:"Manage Variable Template",$$slots:{default:[Yi]},$$scope:{ctx:n}}}),i=new li({}),{c(){M(t.$$.fragment),e=j(),M(i.$$.fragment)},l(r){q(t.$$.fragment,r),e=H(r),q(i.$$.fragment,r)},m(r,l){U(t,r,l),C(r,e,l),U(i,r,l),a=!0},p(r,[l]){const u={};l&2097155&&(u.$$scope={dirty:l,ctx:r}),t.$set(u)},i(r){a||(I(t.$$.fragment,r),I(i.$$.fragment,r),a=!0)},o(r){N(t.$$.fragment,r),N(i.$$.fragment,r),a=!1},d(r){r&&d(e),O(t,r),O(i,r)}}}function xi(n,t,e){let i;Fe(n,Pe,b=>e(16,i=b));const a=ci();let r=[new Je],l=new Je,u=Ji,s=[],f=!1;const E={id:"VariableTemplates",data:Pe,optionsComponent:zi,columns:{id:{disableFiltering:!0,exclude:!0},approved:{header:"Approved",instructions:{renderComponent:Nt},disableFiltering:!0,exclude:!1},inUse:{header:"Approved",instructions:{renderComponent:Nt},disableFiltering:!0,exclude:!0},dataType:{header:"Data Type",disableFiltering:!0,instructions:{renderComponent:at,toFilterableValueFn:b=>b.text,toStringFn:b=>b.text}},systemType:{exclude:!0},unit:{header:"Unit",instructions:{renderComponent:at,toStringFn:b=>b.text,toFilterableValueFn:b=>b.text}},displayPattern:{header:"Display Pattern",instructions:{renderComponent:at,toStringFn:b=>b.text,toFilterableValueFn:b=>b.text}},missingValues:{instructions:{renderComponent:rt},disableFiltering:!0,exclude:!0},meanings:{instructions:{renderComponent:rt},disableFiltering:!0,exclude:!0},constraints:{instructions:{renderComponent:rt},disableFiltering:!0,exclude:!0}}};qt(async()=>{Me.setHelpItemList(u);const b=await vi();Ot.set(b);const A=await Ti();Ut.set(A);const ne=await Ei();st.set(ne);const fe=await Di();lt.set(fe);const ae=await $i();hi.set(ae),e(1,f=!1)});async function h(){e(1,f=!1),e(0,l=new Je),r=await ki(),console.log("variable templates",r),Pe.set(r),console.log("store",i)}function S(b){const A=b>0?"Variable Template updated.":"Variable Template created.";je.showNotification({notificationType:He.success,message:A}),h(),e(1,f=!1)}function D(){f&&k(),e(1,f=!f)}function k(){e(0,l=new Je),e(1,f=!1)}function V(){je.showNotification({notificationType:He.error,message:"Can't save Variable Template."})}async function _(b){await yi(b)!=!0?je.showNotification({notificationType:He.error,message:"Can't delete Variable Template."}):(je.showNotification({notificationType:He.success,message:"Variable Template deleted."}),h())}function m(b){if(b.action=="edit"&&(e(0,l=i.find(A=>A.id===b.id)),e(1,f=!0),window.scrollTo({top:60,behavior:"smooth"})),b.action=="delete"){const A={type:"confirm",title:"Delete Variable Template",body:'Are you sure you wish to delete variable template "'+l.name+'"?',response:ne=>{ne===!0&&_(b.id)}};a.trigger(A)}}return[l,f,s,E,h,S,D,k,V,m,()=>{Me.show("create")},()=>D(),()=>k(),()=>S(l.id),b=>m(b.detail.type)]}class gn extends ke{constructor(t){super(),Ve(this,t,xi,Zi,ye,{})}}export{gn as component,_n as universal};
