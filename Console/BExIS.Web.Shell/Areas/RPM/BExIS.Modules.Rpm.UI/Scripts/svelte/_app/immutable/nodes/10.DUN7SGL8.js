import{S as ie,i as oe,c as N,a as I,m as S,t as k,b as T,d as V,g as K,e as Y,f as he,h as ve,j as se,k as le}from"../chunks/index.CufQnT-K.js";import{h as Ve,A as te,a as Z,n as X,b as J}from"../chunks/eslint4b.es.C89pjaTy.js";import{s as fe,e as w,l as M,c as C,h as E,d as m,o as j,a as p,i as D,p as x,x as A,L as ae,B as ce,Q as be,j as ee,R as Oe,S as Le,F as $e,P as ye,E as ke,O as Be,n as re,H as ne,t as Me,m as je,q as qe,g as Ae}from"../chunks/scheduler.BD3IPErK.js";import{M as Ue,h as He,u as Re,E as We}from"../chunks/ErrorMessage.C_-DmavX.js";import{g as ze}from"../chunks/stores.CsfdB5nm.js";import{F as R,f as Ge,a as Qe,k as Xe,c as Je,P as Ke,h as Ne,d as W,s as we}from"../chunks/Page.DNGIaKrR.js";import{T as Ye,a as Ze}from"../chunks/TablePlaceholder.Cg2Oo5AA.js";import{b as z}from"../chunks/stores.BS-gZ-KN.js";import{y as et,p as tt,P as Ce,v as Ee,T as Te}from"../chunks/vest.production.DBLC5iAh.js";function rt(){return console.log(Ve),{}}const Nt=Object.freeze(Object.defineProperty({__proto__:null,load:rt},Symbol.toStringTag,{value:"Module"})),nt=async()=>{try{const i=await te.get("/rpm/ExternalLink/GetPrefixCategories");return console.log("ðŸš€ ~ file: services.ts:8 ~ getLinks ~ response.data:",i.data),i.data}catch(i){throw console.error(i),i}},at=async i=>{try{return await te.delete("/rpm/ExternalLink/DeletePrefixCategory?id="+i,null)}catch(e){throw console.error(e),e}},it=async i=>{try{return await te.post("/rpm/ExternalLink/CreatePrefixCategories",i)}catch(e){throw console.error(e),e}},ot=async i=>{try{return await te.post("/rpm/ExternalLink/updatePrefixCategories",i)}catch(e){throw console.error(e),e}};function st(i){let e,n,t,r,a,o,s,f,d,b,_,g,h,P;return r=new R({props:{icon:Ge}}),d=new R({props:{icon:Qe}}),{c(){e=w("tableOption"),n=w("div"),t=w("button"),N(r.$$.fragment),s=M(),f=w("button"),N(d.$$.fragment),this.h()},l(c){e=C(c,"TABLEOPTION",{});var l=E(e);n=C(l,"DIV",{class:!0});var u=E(n);t=C(u,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var $=E(t);I(r.$$.fragment,$),$.forEach(m),s=j(u),f=C(u,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var F=E(f);I(d.$$.fragment,F),F.forEach(m),u.forEach(m),l.forEach(m),this.h()},h(){p(t,"type","button"),p(t,"class","chip variant-filled-primary shadow-md"),p(t,"title",a="Edit External Link, "+i[0].name),p(t,"id",o="edit-"+i[0].id),p(f,"type","button"),p(f,"class","chip variant-filled-error shadow-md"),p(f,"title",b="Delete External Link, "+i[0].name),p(f,"id",_="delete-"+i[0].id),p(n,"class","w-18")},m(c,l){D(c,e,l),x(e,n),x(n,t),S(r,t,null),x(n,s),x(n,f),S(d,f,null),g=!0,h||(P=[A(t,"mouseover",i[2]),A(t,"click",ae(i[3])),A(f,"mouseover",i[4]),A(f,"click",ae(i[5]))],h=!0)},p(c,[l]){(!g||l&1&&a!==(a="Edit External Link, "+c[0].name))&&p(t,"title",a),(!g||l&1&&o!==(o="edit-"+c[0].id))&&p(t,"id",o),(!g||l&1&&b!==(b="Delete External Link, "+c[0].name))&&p(f,"title",b),(!g||l&1&&_!==(_="delete-"+c[0].id))&&p(f,"id",_)},i(c){g||(k(r.$$.fragment,c),k(d.$$.fragment,c),g=!0)},o(c){T(r.$$.fragment,c),T(d.$$.fragment,c),g=!1},d(c){c&&m(e),V(r),V(d),h=!1,ce(P)}}}function lt(i,e,n){let{row:t}=e,{dispatchFn:r}=e;const a=()=>{Z.show("edit")},o=()=>r({type:{action:"edit",id:t.id}}),s=()=>{Z.show("delete")},f=()=>r({type:{action:"delete",id:t.id}});return i.$$set=d=>{"row"in d&&n(0,t=d.row),"dispatchFn"in d&&n(1,r=d.dispatchFn)},[t,r,a,o,s,f]}class ft extends ie{constructor(e){super(),oe(this,e,lt,st,fe,{row:0,dispatchFn:1})}}const H=et((i={},e)=>{tt(e),Ce("name","name is required",()=>{Ee(i.name).isNotBlank()}),Ce("name","name allready exist.",()=>{const n=be(z).map(a=>a.name),t=i.id>0?be(z).find(a=>a.id==i.id):{id:0,name:""},r=t?n.filter(a=>a!=t.name):n;Ee(i.name).notInside(r)})}),ct=[{id:"create",name:"Create neáº‡ prefix category",description:"Click here to ceate a new prefix category"},{id:"delete",name:"Delete prefix category",description:"Click here to detete the prefix category"},{id:"edit",name:"Edit prefix category",description:"Click here to edit the prefix category"},{id:"save",name:"Save prefix category",description:"Click here to save the prefix category"},{id:"cancel",name:"Cancel",description:"Click here to cancel"},{id:"name",name:"Name",description:"Name of the prefix category. <li>Has to be unique.</li>"},{id:"description",name:"Description",description:"More details information about the prefix category."}];function xe(i){let e,n,t,r,a,o,s,f,d,b,_,g,h,P,c,l,u,$,F,q,y,L,G;function Ie(v){i[7](v)}let ue={id:"name",placeholder:"Name",valid:i[1].isValid("name"),invalid:i[1].hasErrors("name"),feedback:i[1].getErrors("name"),help:Pe};i[0].name!==void 0&&(ue.value=i[0].name),a=new Te({props:ue}),$e.push(()=>he(a,"value",Ie)),a.$on("change",i[8]),a.$on("input",i[4]);function Se(v){i[9](v)}let de={id:"description",placeholder:"Description",help:Pe};return i[0].description!==void 0&&(de.value=i[0].description),d=new Te({props:de}),$e.push(()=>he(d,"value",Se)),d.$on("change",i[10]),P=new R({props:{icon:Xe}}),u=new R({props:{icon:Je}}),{c(){e=w("form"),n=w("div"),t=w("div"),r=w("div"),N(a.$$.fragment),s=M(),f=w("div"),N(d.$$.fragment),_=M(),g=w("div"),h=w("button"),N(P.$$.fragment),c=M(),l=w("button"),N(u.$$.fragment),this.h()},l(v){e=C(v,"FORM",{});var O=E(e);n=C(O,"DIV",{id:!0,class:!0});var B=E(n);t=C(B,"DIV",{class:!0});var U=E(t);r=C(U,"DIV",{class:!0});var pe=E(r);I(a.$$.fragment,pe),pe.forEach(m),s=j(U),f=C(U,"DIV",{class:!0});var me=E(f);I(d.$$.fragment,me),me.forEach(m),U.forEach(m),_=j(B),g=C(B,"DIV",{class:!0});var Q=E(g);h=C(Q,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var _e=E(h);I(P.$$.fragment,_e),_e.forEach(m),c=j(Q),l=C(Q,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var ge=E(l);I(u.$$.fragment,ge),ge.forEach(m),Q.forEach(m),B.forEach(m),O.forEach(m),this.h()},h(){p(r,"class","grow"),p(f,"class","grow"),p(t,"class","flex gap-5 grow"),p(h,"type","button"),p(h,"class","btn variant-filled-warning h-9 w-16 shadow-md"),p(h,"title","Cancel"),p(h,"id","cancel"),p(l,"type","submit"),p(l,"class","btn variant-filled-primary h-9 w-16 shadow-md"),p(l,"title",$="Save prefix category, "+i[0].name),p(l,"id","save"),l.disabled=F=!i[3],p(g,"class","py-5 text-right col-span-2"),p(n,"id",q="prefixCategory-"+i[0].id+"-form"),p(n,"class","space-y-5 card shadow-md p-5")},m(v,O){D(v,e,O),x(e,n),x(n,t),x(t,r),S(a,r,null),x(t,s),x(t,f),S(d,f,null),x(n,_),x(n,g),x(g,h),S(P,h,null),x(g,c),x(g,l),S(u,l,null),y=!0,L||(G=[A(h,"click",i[11]),A(e,"submit",ae(i[6]))],L=!0)},p(v,O){const B={};O&2&&(B.valid=v[1].isValid("name")),O&2&&(B.invalid=v[1].hasErrors("name")),O&2&&(B.feedback=v[1].getErrors("name")),!o&&O&1&&(o=!0,B.value=v[0].name,ye(()=>o=!1)),a.$set(B);const U={};!b&&O&1&&(b=!0,U.value=v[0].description,ye(()=>b=!1)),d.$set(U),(!y||O&1&&$!==($="Save prefix category, "+v[0].name))&&p(l,"title",$),(!y||O&8&&F!==(F=!v[3]))&&(l.disabled=F),(!y||O&1&&q!==(q="prefixCategory-"+v[0].id+"-form"))&&p(n,"id",q)},i(v){y||(k(a.$$.fragment,v),k(d.$$.fragment,v),k(P.$$.fragment,v),k(u.$$.fragment,v),y=!0)},o(v){T(a.$$.fragment,v),T(d.$$.fragment,v),T(P.$$.fragment,v),T(u.$$.fragment,v),y=!1},d(v){v&&m(e),V(a),V(d),V(P),V(u),L=!1,ce(G)}}}function ut(i){let e,n,t=i[2]&&xe(i);return{c(){t&&t.c(),e=ee()},l(r){t&&t.l(r),e=ee()},m(r,a){t&&t.m(r,a),D(r,e,a),n=!0},p(r,[a]){r[2]?t?(t.p(r,a),a&4&&k(t,1)):(t=xe(r),t.c(),k(t,1),t.m(e.parentNode,e)):t&&(K(),T(t,1,1,()=>{t=null}),Y())},i(r){n||(k(t),n=!0)},o(r){T(t),n=!1},d(r){r&&m(e),t&&t.d(r)}}}let Pe=!0;function dt(i,e,n){let t,{prefixCategory:r}=e,a=!1,o=H.get();const s=Oe();Le(()=>{Z.setHelpItemList(ct),H.reset(),setTimeout(async()=>{r.id>0&&n(1,o=H(r,""))},10),n(2,a=!0)});function f(l){setTimeout(async()=>{n(1,o=H(r,l.target.id))},100)}function d(){H.reset(),s("cancel")}async function b(){var l=await(r.id==0)?it(r):ot(r);(await l).status===200?s("success"):s("fail"),H.reset()}function _(l){i.$$.not_equal(r.name,l)&&(r.name=l,n(0,r))}function g(l){ke.call(this,i,l)}function h(l){i.$$.not_equal(r.description,l)&&(r.description=l,n(0,r))}function P(l){ke.call(this,i,l)}const c=()=>d();return i.$$set=l=>{"prefixCategory"in l&&n(0,r=l.prefixCategory)},i.$$.update=()=>{i.$$.dirty&1,i.$$.dirty&2&&n(3,t=o.isValid())},[r,o,a,t,f,d,b,_,g,h,P,c]}class pt extends ie{constructor(e){super(),oe(this,e,dt,ut,fe,{prefixCategory:0})}}function mt(i){let e,n;return e=new We({props:{error:i[18]}}),{c(){N(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p:re,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function _t(i){let e,n,t,r,a,o,s,f,d,b,_;const g=[ht,gt],h=[];function P(u,$){return u[0].id<1?0:1}t=P(i),r=h[t]=g[t](i);let c=!i[1]&&De(i),l=i[1]&&Fe(i);return b=new Ye({props:{config:i[3]}}),b.$on("action",i[13]),{c(){e=w("div"),n=w("div"),r.c(),a=M(),o=w("div"),c&&c.c(),s=M(),l&&l.c(),f=M(),d=w("div"),N(b.$$.fragment),this.h()},l(u){e=C(u,"DIV",{class:!0});var $=E(e);n=C($,"DIV",{class:!0});var F=E(n);r.l(F),F.forEach(m),a=j($),o=C($,"DIV",{class:!0});var q=E(o);c&&c.l(q),q.forEach(m),$.forEach(m),s=j(u),l&&l.l(u),f=j(u),d=C(u,"DIV",{class:!0});var y=E(d);I(b.$$.fragment,y),y.forEach(m),this.h()},h(){p(n,"class","h3 h-9"),p(o,"class","text-right"),p(e,"class","grid grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(d,"class","table table-compact w-full")},m(u,$){D(u,e,$),x(e,n),h[t].m(n,null),x(e,a),x(e,o),c&&c.m(o,null),D(u,s,$),l&&l.m(u,$),D(u,f,$),D(u,d,$),S(b,d,null),_=!0},p(u,$){let F=t;t=P(u),t===F?h[t].p(u,$):(K(),T(h[F],1,1,()=>{h[F]=null}),Y(),r=h[t],r?r.p(u,$):(r=h[t]=g[t](u),r.c()),k(r,1),r.m(n,null)),u[1]?c&&(K(),T(c,1,1,()=>{c=null}),Y()):c?(c.p(u,$),$&2&&k(c,1)):(c=De(u),c.c(),k(c,1),c.m(o,null)),u[1]?l?(l.p(u,$),$&2&&k(l,1)):(l=Fe(u),l.c(),k(l,1),l.m(f.parentNode,f)):l&&(K(),T(l,1,1,()=>{l=null}),Y())},i(u){_||(k(r),k(c),k(l),k(b.$$.fragment,u),_=!0)},o(u){T(r),T(c),T(l),T(b.$$.fragment,u),_=!1},d(u){u&&(m(e),m(s),m(f),m(d)),h[t].d(),c&&c.d(),l&&l.d(u),V(b)}}}function gt(i){let e,n=i[0].name+"",t,r,a,o;return{c(){e=w("span"),t=Me(n)},l(s){e=C(s,"SPAN",{});var f=E(e);t=je(f,n),f.forEach(m)},m(s,f){D(s,e,f),x(e,t),o=!0},p(s,f){(!o||f&1)&&n!==(n=s[0].name+"")&&qe(t,n)},i(s){o||(s&&ne(()=>{o&&(a&&a.end(1),r=se(e,W,{delay:400}),r.start())}),o=!0)},o(s){r&&r.invalidate(),s&&(a=le(e,W,{})),o=!1},d(s){s&&m(e),s&&a&&a.end()}}}function ht(i){let e,n="Create neáº‡ Prefix Category",t,r,a;return{c(){e=w("span"),e.textContent=n},l(o){e=C(o,"SPAN",{"data-svelte-h":!0}),Ae(e)!=="svelte-1gcl8r9"&&(e.textContent=n)},m(o,s){D(o,e,s),a=!0},p:re,i(o){a||(o&&ne(()=>{a&&(r&&r.end(1),t=se(e,W,{delay:400}),t.start())}),a=!0)},o(o){t&&t.invalidate(),o&&(r=le(e,W,{})),a=!1},d(o){o&&m(e),o&&r&&r.end()}}}function De(i){let e,n,t,r,a,o;return n=new R({props:{icon:Ne}}),{c(){e=w("button"),N(n.$$.fragment),this.h()},l(s){e=C(s,"BUTTON",{class:!0,title:!0,id:!0});var f=E(e);I(n.$$.fragment,f),f.forEach(m),this.h()},h(){p(e,"class","btn variant-filled-secondary shadow-md h-9 w-16"),p(e,"title","Create neáº‡ Prefix Category"),p(e,"id","create")},m(s,f){D(s,e,f),S(n,e,null),r=!0,a||(o=[A(e,"mouseover",i[9]),A(e,"click",i[10])],a=!0)},p:re,i(s){r||(k(n.$$.fragment,s),s&&ne(()=>{r&&(t||(t=ve(e,W,{},!0)),t.run(1))}),r=!0)},o(s){T(n.$$.fragment,s),s&&(t||(t=ve(e,W,{},!1)),t.run(0)),r=!1},d(s){s&&m(e),V(n),s&&t&&t.end(),a=!1,ce(o)}}}function Fe(i){let e,n,t,r,a;return n=new pt({props:{prefixCategory:i[0]}}),n.$on("cancel",i[11]),n.$on("success",i[12]),n.$on("fail",i[8]),{c(){e=w("div"),N(n.$$.fragment)},l(o){e=C(o,"DIV",{});var s=E(e);I(n.$$.fragment,s),s.forEach(m)},m(o,s){D(o,e,s),S(n,e,null),a=!0},p(o,s){const f={};s&1&&(f.prefixCategory=o[0]),n.$set(f)},i(o){a||(k(n.$$.fragment,o),o&&ne(()=>{a&&(r&&r.end(1),t=se(e,we,{}),t.start())}),a=!0)},o(o){T(n.$$.fragment,o),t&&t.invalidate(),o&&(r=le(e,we,{})),a=!1},d(o){o&&m(e),V(n),o&&r&&r.end()}}}function vt(i){let e,n,t,r,a,o,s,f,d,b;return o=new R({props:{icon:Ne}}),d=new Ze({props:{cols:5}}),{c(){e=w("div"),n=w("div"),t=M(),r=w("div"),a=w("button"),N(o.$$.fragment),s=M(),f=w("div"),N(d.$$.fragment),this.h()},l(_){e=C(_,"DIV",{class:!0});var g=E(e);n=C(g,"DIV",{class:!0}),E(n).forEach(m),t=j(g),r=C(g,"DIV",{class:!0});var h=E(r);a=C(h,"BUTTON",{class:!0});var P=E(a);I(o.$$.fragment,P),P.forEach(m),h.forEach(m),g.forEach(m),s=j(_),f=C(_,"DIV",{class:!0});var c=E(f);I(d.$$.fragment,c),c.forEach(m),this.h()},h(){p(n,"class","h-9 w-96 placeholder animate-pulse"),p(a,"class","btn placeholder animate-pulse shadow-md h-9 w-16"),p(r,"class","flex justify-end"),p(e,"class","grid w-full grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(f,"class","table-container w-full")},m(_,g){D(_,e,g),x(e,n),x(e,t),x(e,r),x(r,a),S(o,a,null),D(_,s,g),D(_,f,g),S(d,f,null),b=!0},p:re,i(_){b||(k(o.$$.fragment,_),k(d.$$.fragment,_),b=!0)},o(_){T(o.$$.fragment,_),T(d.$$.fragment,_),b=!1},d(_){_&&(m(e),m(s),m(f)),V(o),V(d)}}}function bt(i){let e,n,t={ctx:i,current:null,token:null,hasCatch:!0,pending:vt,then:_t,catch:mt,error:18,blocks:[,,,]};return He(i[2](),t),{c(){e=ee(),t.block.c()},l(r){e=ee(),t.block.l(r)},m(r,a){D(r,e,a),t.block.m(r,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(r,a){i=r,Re(t,i,a)},i(r){n||(k(t.block),n=!0)},o(r){for(let a=0;a<3;a+=1){const o=t.blocks[a];T(o)}n=!1},d(r){r&&m(e),t.block.d(r),t.token=null,t=null}}}function $t(i){let e,n,t,r;return e=new Ke({props:{help:!0,title:"Manage External Links",$$slots:{default:[bt]},$$scope:{ctx:i}}}),t=new Ue({}),{c(){N(e.$$.fragment),n=M(),N(t.$$.fragment)},l(a){I(e.$$.fragment,a),n=j(a),I(t.$$.fragment,a)},m(a,o){S(e,a,o),D(a,n,o),S(t,a,o),r=!0},p(a,[o]){const s={};o&524291&&(s.$$scope={dirty:o,ctx:a}),e.$set(s)},i(a){r||(k(e.$$.fragment,a),k(t.$$.fragment,a),r=!0)},o(a){T(e.$$.fragment,a),T(t.$$.fragment,a),r=!1},d(a){a&&m(n),V(e,a),V(t,a)}}}function yt(i,e,n){let t;Be(i,z,y=>n(15,t=y));const r=ze();let a=[],o={id:0,name:"",description:""},s=!1;async function f(){n(1,s=!1),a=await nt(),console.log("ðŸš€ ~ file: +page.svelte:39 ~ reload ~ prefixCategories:",a),n(0,o={id:0,name:"",description:""}),z.set(a),console.log("store",t)}const d={id:"ExternalLinks",data:z,optionsComponent:ft,columns:{id:{fixedWidth:100},versionNo:{disableFiltering:!0,disableSorting:!0,exclude:!0},extra:{disableFiltering:!0,disableSorting:!0,exclude:!0},optionsColumn:{fixedWidth:100}}};function b(){s&&_(),n(1,s=!s)}function _(){n(0,o={id:0,name:"",description:""}),n(1,s=!1)}function g(y){if(console.log("ðŸš€ ~ file: +page.svelte:88 ~ edit ~ type:",y),y.action=="edit"&&(n(1,s=!1),n(0,o=t.find(L=>L.id===y.id)),n(1,s=!0)),y.action=="delete"){console.log("ðŸš€ ~ file: +page.svelte:97 ~ edit ~ type.action:",y.action);const L={type:"confirm",title:"Delete Prefix Category",body:"Are you sure you wish to delete Prefix Category "+o.name+"?",response:G=>{G===!0&&h(y.id)}};r.trigger(L)}}async function h(y){console.log("ðŸš€ ~ file: +page.svelte:112 ~ deleteFn ~ id:",y),await at(y)?(X.showNotification({notificationType:J.success,message:"Prefix Category deleted."}),f()):X.showNotification({notificationType:J.error,message:"Can't delete Prefix Category."})}function P(y){const L=y>0?"Prefix Category updated.":"Prefix Category created.";X.showNotification({notificationType:J.success,message:L}),n(1,s=!1),setTimeout(async()=>{f()},10)}function c(){X.showNotification({notificationType:J.error,message:"Can't save Prefix Category."})}return[o,s,f,d,b,_,g,P,c,()=>{Z.show("create")},()=>b(),()=>_(),()=>P(o.id),y=>g(y.detail.type)]}class It extends ie{constructor(e){super(),oe(this,e,yt,$t,fe,{})}}export{It as component,Nt as universal};
