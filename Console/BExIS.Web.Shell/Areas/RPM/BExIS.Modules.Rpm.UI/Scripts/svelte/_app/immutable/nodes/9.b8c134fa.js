import{E as bt,A as fe,F as ue,G as kt,i as $t,j as wt,h as Le,a as Et,c as yt,P as Lt,n as Ie,g as Fe,k as ft,d as ve,s as Qe}from"../chunks/eslint4b.es.291451ed.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.0e3888ae.js";import{S as xe,i as Ae,s as Me,k as E,y as A,a as G,l as y,m as L,z as M,h as m,c as j,n as p,b as P,H as $,A as U,M as R,Z as Oe,g as T,d as F,B,O as qe,a6 as Ce,I as be,e as ke,q as ie,r as le,u as _e,v as he,f as ge,J as ye,W as Tt,o as Vt,w as Z,Y as Q,_ as ee,R as et,a3 as St,a4 as It,$ as Ue,a5 as tt,a0 as Ge,a1 as je}from"../chunks/index.59d1c272.js";import{g as Ft}from"../chunks/stores.78226074.js";import{M as Ct,E as Dt}from"../chunks/ErrorMessage.13e1af6e.js";import{e as De,a as rt}from"../chunks/types.d39feee0.js";import{T as Nt,a as Pt}from"../chunks/TablePlaceholder.f956c013.js";import{e as ae,a as ct,p as dt,b as pt}from"../chunks/stores.50b218e7.js";import{M as He}from"../chunks/MultiSelect.6e9522c1.js";import{K as Ot,V as xt,v as Ne,w as Pe,T as nt}from"../chunks/vest.production.0974e7aa.js";function At(){return console.log(bt),{}}const $r=Object.freeze(Object.defineProperty({__proto__:null,load:At},Symbol.toStringTag,{value:"Module"})),Mt=async()=>{try{return(await fe.get("/rpm/ExternalLink/get")).data}catch(r){throw console.error(r),r}},Ut=async()=>{try{return(await fe.get("/rpm/ExternalLink/getLinkTypes")).data}catch(r){throw console.error(r),r}},Bt=async()=>{try{return(await fe.get("/rpm/ExternalLink/GetPrefixCategoriesAsList")).data}catch(r){throw console.error(r),r}},qt=async()=>{try{return(await fe.get("/rpm/ExternalLink/GetPrefixListItems")).data}catch(r){throw console.error(r),r}},Gt=async r=>{try{return await fe.delete("/rpm/ExternalLink/delete?id="+r,null)}catch(e){throw console.error(e),e}},jt=async r=>{try{return console.log("ðŸš€ ~ file: services.ts:38 ~ create ~ data:",r),await fe.post("/rpm/ExternalLink/create",r)}catch(e){throw console.error(e),e}},Ht=async r=>{try{return await fe.post("/rpm/ExternalLink/update",r)}catch(e){throw console.error(e),e}};function Wt(r){let e,t,n,i,l,s,o,a,u,c,v,V,k,S,b,_,d,w,D;return i=new ue({props:{icon:kt}}),u=new ue({props:{icon:$t}}),S=new ue({props:{icon:wt}}),{c(){e=E("tableOption"),t=E("div"),n=E("button"),A(i.$$.fragment),o=G(),a=E("button"),A(u.$$.fragment),V=G(),k=E("button"),A(S.$$.fragment),this.h()},l(I){e=y(I,"TABLEOPTION",{});var f=L(e);t=y(f,"DIV",{class:!0});var C=L(t);n=y(C,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var W=L(n);M(i.$$.fragment,W),W.forEach(m),o=j(C),a=y(C,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var te=L(a);M(u.$$.fragment,te),te.forEach(m),V=j(C),k=y(C,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var z=L(k);M(S.$$.fragment,z),z.forEach(m),C.forEach(m),f.forEach(m),this.h()},h(){p(n,"type","button"),p(n,"class","chip variant-filled-primary shadow-md"),p(n,"title",l="Link, "+r[0].name),p(n,"id",s="link-"+r[0].id),p(a,"type","button"),p(a,"class","chip variant-filled-primary shadow-md"),p(a,"title",c="Edit External Link, "+r[0].name),p(a,"id",v="edit-"+r[0].id),p(k,"type","button"),p(k,"class","chip variant-filled-error shadow-md"),p(k,"title",b="Delete External Link, "+r[0].name),p(k,"id",_="delete-"+r[0].id),p(t,"class","w-18")},m(I,f){P(I,e,f),$(e,t),$(t,n),U(i,n,null),$(t,o),$(t,a),U(u,a,null),$(t,V),$(t,k),U(S,k,null),d=!0,w||(D=[R(n,"mouseover",r[3]),R(n,"click",Oe(r[4])),R(a,"mouseover",r[5]),R(a,"click",Oe(r[6])),R(k,"mouseover",r[7]),R(k,"click",Oe(r[8]))],w=!0)},p(I,[f]){(!d||f&1&&l!==(l="Link, "+I[0].name))&&p(n,"title",l),(!d||f&1&&s!==(s="link-"+I[0].id))&&p(n,"id",s),(!d||f&1&&c!==(c="Edit External Link, "+I[0].name))&&p(a,"title",c),(!d||f&1&&v!==(v="edit-"+I[0].id))&&p(a,"id",v),(!d||f&1&&b!==(b="Delete External Link, "+I[0].name))&&p(k,"title",b),(!d||f&1&&_!==(_="delete-"+I[0].id))&&p(k,"id",_)},i(I){d||(T(i.$$.fragment,I),T(u.$$.fragment,I),T(S.$$.fragment,I),d=!0)},o(I){F(i.$$.fragment,I),F(u.$$.fragment,I),F(S.$$.fragment,I),d=!1},d(I){I&&m(e),B(i),B(u),B(S),w=!1,qe(D)}}}function zt(r,e,t){let{row:n}=e,{dispatchFn:i}=e,l="";n.uri!=""&&(l=n.uri,n.prefix&&(l=""+n.prefix.url+n.uri));const s=()=>{Le.show("link")},o=()=>i({type:{action:"link",url:l}}),a=()=>{Le.show("edit")},u=()=>i({type:{action:"edit",id:n.id}}),c=()=>{Le.show("delete")},v=()=>i({type:{action:"delete",id:n.id}});return r.$$set=V=>{"row"in V&&t(0,n=V.row),"dispatchFn"in V&&t(1,i=V.dispatchFn)},[n,i,l,s,o,a,u,c,v]}class Kt extends xe{constructor(e){super(),Ae(this,e,zt,Wt,Me,{row:0,dispatchFn:1})}}const oe=Ot((r={},e)=>{xt(e),Ne("name","name is required",()=>{Pe(r.name).isNotBlank()}),Ne("name","name allready exist.",()=>{const t=Ce(ae).map(l=>l.name),n=r.id>0?Ce(ae).find(l=>l.id==r.id):{id:0,name:""},i=n?t.filter(l=>l!=n.name):t;Pe(r.name).notInside(i)}),Ne("uri","uri is required",()=>{Pe(r.uri).isNotBlank()}),Ne("uri","uri allready exist.",()=>{const t=r.id>0?Ce(ae).find(i=>i.id==r.id):{id:0,name:"",type:"",uri:""},n=Ce(ae).map(i=>i.uri!=(t==null?void 0:t.uri)?i.uri:"");Pe(r.uri).notInside(n)})}),Rt=[{id:"create",name:"Create new external link",description:"Click here to create a new external link"},{id:"delete",name:"Delete external link",description:"Click here to delete the external link"},{id:"edit",name:"Edit external link",description:"Click here to edit the external link"},{id:"save",name:"Save external link",description:"Click here to save the external link"},{id:"cancel",name:"Cancel",description:"Click here to cancel"},{id:"name",name:"Name",description:"Name of the external link. <li>Has to be unique.</li>"},{id:"uri",name:"Uri",description:"The destination of the external link on the internet."},{id:"type",name:"Type",description:"Type is a context for a group of external links for a better selection of meanings."}];function it(r){let e;function t(l,s){var o;return(o=l[0].prefix)!=null&&o.id?Xt:Jt}let n=t(r),i=n(r);return{c(){i.c(),e=ke()},l(l){i.l(l),e=ke()},m(l,s){i.m(l,s),P(l,e,s)},p(l,s){n===(n=t(l))&&i?i.p(l,s):(i.d(1),i=n(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){i.d(l),l&&m(e)}}}function Jt(r){let e,t=r[0].uri+"",n;return{c(){e=E("a"),n=ie(t),this.h()},l(i){e=y(i,"A",{class:!0,target:!0});var l=L(e);n=le(l,t),l.forEach(m),this.h()},h(){p(e,"class","a"),p(e,"target","_blank")},m(i,l){P(i,e,l),$(e,n)},p(i,l){l&1&&t!==(t=i[0].uri+"")&&_e(n,t)},d(i){i&&m(e)}}}function Xt(r){let e,t,n=r[0].prefix.text+"",i,l,s=r[0].uri+"",o,a,u,c,v=r[0].prefix.url+"",V,k=r[0].uri+"",S,b;return{c(){e=E("div"),t=E("b"),i=ie(n),l=ie(":"),o=ie(s),a=G(),u=E("div"),c=E("a"),V=ie(v),S=ie(k),this.h()},l(_){e=y(_,"DIV",{});var d=L(e);t=y(d,"B",{class:!0});var w=L(t);i=le(w,n),l=le(w,":"),o=le(w,s),w.forEach(m),d.forEach(m),a=j(_),u=y(_,"DIV",{});var D=L(u);c=y(D,"A",{class:!0,target:!0,href:!0});var I=L(c);V=le(I,v),S=le(I,k),I.forEach(m),D.forEach(m),this.h()},h(){p(t,"class","text-sm"),p(c,"class","a"),p(c,"target","_blank"),p(c,"href",b=""+(r[0].prefix.url+r[0].uri))},m(_,d){P(_,e,d),$(e,t),$(t,i),$(t,l),$(t,o),P(_,a,d),P(_,u,d),$(u,c),$(c,V),$(c,S)},p(_,d){d&1&&n!==(n=_[0].prefix.text+"")&&_e(i,n),d&1&&s!==(s=_[0].uri+"")&&_e(o,s),d&1&&v!==(v=_[0].prefix.url+"")&&_e(V,v),d&1&&k!==(k=_[0].uri+"")&&_e(S,k),d&1&&b!==(b=""+(_[0].prefix.url+_[0].uri))&&p(c,"href",b)},d(_){_&&m(e),_&&m(a),_&&m(u)}}}function Yt(r){let e,t=r[0].uri!=""&&it(r);return{c(){e=E("div"),t&&t.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var i=L(e);t&&t.l(i),i.forEach(m),this.h()},h(){p(e,"class","card p-5 flex-col gap-2")},m(n,i){P(n,e,i),t&&t.m(e,null)},p(n,[i]){n[0].uri!=""?t?t.p(n,i):(t=it(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:be,o:be,d(n){n&&m(e),t&&t.d()}}}function Zt(r,e,t){let{link:n}=e;return console.log("ðŸš€ ~ file: UrlPreview.svelte:6 ~ link:",n),r.$$set=i=>{"link"in i&&t(0,n=i.link)},[n]}class Qt extends xe{constructor(e){super(),Ae(this,e,Zt,Yt,Me,{link:0})}}function lt(r){var Re,Je;let e,t,n,i,l,s,o,a,u,c,v,V,k,S,b,_,d,w,D,I,f,C,W,te,z,K,J,$e,H,X,ce,de,pe,Y,h,me;function mt(g){r[11](g)}let We={id:"name",placeholder:"Name",valid:r[1].isValid("name"),invalid:r[1].hasErrors("name"),feedback:r[1].getErrors("name"),help:Te};r[0].name!==void 0&&(We.value=r[0].name),l=new nt({props:We}),Z.push(()=>Q(l,"value",mt)),l.$on("change",r[12]),l.$on("input",r[7]);function _t(g){r[13](g)}function ht(g){r[14](g)}let Be={id:"type",title:"Type",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,clearable:!1,placeholder:"-- Please select --",invalid:r[1].hasErrors("type"),feedback:r[1].getErrors("type"),help:Te};r[2]!==void 0&&(Be.source=r[2]),r[0].type!==void 0&&(Be.target=r[0].type),c=new He({props:Be}),Z.push(()=>Q(c,"source",_t)),Z.push(()=>Q(c,"target",ht)),c.$on("change",r[15]);let O=((Re=r[0].type)==null?void 0:Re.id)===De.prefix&&at(r),x=((Je=r[0].type)==null?void 0:Je.id)!==De.prefix&&st(r);function gt(g){r[22](g)}let ze={id:"uri",label:"Uri",placeholder:"Uri",valid:r[1].isValid("uri"),invalid:r[1].hasErrors("uri"),feedback:r[1].getErrors("uri"),help:Te};r[0].uri!==void 0&&(ze.value=r[0].uri),D=new nt({props:ze}),Z.push(()=>Q(D,"value",gt)),D.$on("change",r[23]),D.$on("input",r[7]);function vt(g){r[24](g)}let Ke={};return r[0]!==void 0&&(Ke.link=r[0]),C=new Qt({props:Ke}),Z.push(()=>Q(C,"link",vt)),J=new ue({props:{icon:Et}}),X=new ue({props:{icon:yt}}),{c(){e=E("form"),t=E("div"),n=E("div"),i=E("div"),A(l.$$.fragment),o=G(),a=E("div"),u=E("div"),A(c.$$.fragment),k=G(),S=E("div"),O&&O.c(),b=G(),_=E("div"),x&&x.c(),d=G(),w=E("div"),A(D.$$.fragment),f=G(),A(C.$$.fragment),te=G(),z=E("div"),K=E("button"),A(J.$$.fragment),$e=G(),H=E("button"),A(X.$$.fragment),this.h()},l(g){e=y(g,"FORM",{});var N=L(e);t=y(N,"DIV",{id:!0,class:!0});var q=L(t);n=y(q,"DIV",{class:!0});var re=L(n);i=y(re,"DIV",{class:!0});var ne=L(i);M(l.$$.fragment,ne),ne.forEach(m),re.forEach(m),o=j(q),a=y(q,"DIV",{class:!0});var se=L(a);u=y(se,"DIV",{class:!0});var we=L(u);M(c.$$.fragment,we),we.forEach(m),k=j(se),S=y(se,"DIV",{class:!0});var Ee=L(S);O&&O.l(Ee),Ee.forEach(m),se.forEach(m),b=j(q),_=y(q,"DIV",{class:!0});var Ve=L(_);x&&x.l(Ve),d=j(Ve),w=y(Ve,"DIV",{class:!0});var Xe=L(w);M(D.$$.fragment,Xe),Xe.forEach(m),Ve.forEach(m),f=j(q),M(C.$$.fragment,q),te=j(q),z=y(q,"DIV",{class:!0});var Se=L(z);K=y(Se,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var Ye=L(K);M(J.$$.fragment,Ye),Ye.forEach(m),$e=j(Se),H=y(Se,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var Ze=L(H);M(X.$$.fragment,Ze),Ze.forEach(m),Se.forEach(m),q.forEach(m),N.forEach(m),this.h()},h(){p(i,"class","w-1/2"),p(n,"class","flex gap-5 items-center"),p(u,"class","w-1/4"),p(S,"class","w-1/4"),p(a,"class","flex gap-5 items-center"),p(w,"class","grow"),p(_,"class","flex gap-5"),p(K,"type","button"),p(K,"class","btn variant-filled-warning h-9 w-16 shadow-md"),p(K,"title","Cancel"),p(K,"id","cancel"),p(H,"type","submit"),p(H,"class","btn variant-filled-primary h-9 w-16 shadow-md"),p(H,"title",ce="Save external link, "+r[0].name),p(H,"id","save"),H.disabled=de=!r[6],p(z,"class","py-5 text-right col-span-2"),p(t,"id",pe="link-"+r[0].id+"-form"),p(t,"class","space-y-5 card shadow-md p-5")},m(g,N){P(g,e,N),$(e,t),$(t,n),$(n,i),U(l,i,null),$(t,o),$(t,a),$(a,u),U(c,u,null),$(a,k),$(a,S),O&&O.m(S,null),$(t,b),$(t,_),x&&x.m(_,null),$(_,d),$(_,w),U(D,w,null),$(t,f),U(C,t,null),$(t,te),$(t,z),$(z,K),U(J,K,null),$(z,$e),$(z,H),U(X,H,null),Y=!0,h||(me=[R(K,"click",r[25]),R(e,"submit",Oe(r[9]))],h=!0)},p(g,N){var we,Ee;const q={};N[0]&2&&(q.valid=g[1].isValid("name")),N[0]&2&&(q.invalid=g[1].hasErrors("name")),N[0]&2&&(q.feedback=g[1].getErrors("name")),!s&&N[0]&1&&(s=!0,q.value=g[0].name,ee(()=>s=!1)),l.$set(q);const re={};N[0]&2&&(re.invalid=g[1].hasErrors("type")),N[0]&2&&(re.feedback=g[1].getErrors("type")),!v&&N[0]&4&&(v=!0,re.source=g[2],ee(()=>v=!1)),!V&&N[0]&1&&(V=!0,re.target=g[0].type,ee(()=>V=!1)),c.$set(re),((we=g[0].type)==null?void 0:we.id)===De.prefix?O?(O.p(g,N),N[0]&1&&T(O,1)):(O=at(g),O.c(),T(O,1),O.m(S,null)):O&&(he(),F(O,1,1,()=>{O=null}),ge()),((Ee=g[0].type)==null?void 0:Ee.id)!==De.prefix?x?(x.p(g,N),N[0]&1&&T(x,1)):(x=st(g),x.c(),T(x,1),x.m(_,d)):x&&(he(),F(x,1,1,()=>{x=null}),ge());const ne={};N[0]&2&&(ne.valid=g[1].isValid("uri")),N[0]&2&&(ne.invalid=g[1].hasErrors("uri")),N[0]&2&&(ne.feedback=g[1].getErrors("uri")),!I&&N[0]&1&&(I=!0,ne.value=g[0].uri,ee(()=>I=!1)),D.$set(ne);const se={};!W&&N[0]&1&&(W=!0,se.link=g[0],ee(()=>W=!1)),C.$set(se),(!Y||N[0]&1&&ce!==(ce="Save external link, "+g[0].name))&&p(H,"title",ce),(!Y||N[0]&64&&de!==(de=!g[6]))&&(H.disabled=de),(!Y||N[0]&1&&pe!==(pe="link-"+g[0].id+"-form"))&&p(t,"id",pe)},i(g){Y||(T(l.$$.fragment,g),T(c.$$.fragment,g),T(O),T(x),T(D.$$.fragment,g),T(C.$$.fragment,g),T(J.$$.fragment,g),T(X.$$.fragment,g),Y=!0)},o(g){F(l.$$.fragment,g),F(c.$$.fragment,g),F(O),F(x),F(D.$$.fragment,g),F(C.$$.fragment,g),F(J.$$.fragment,g),F(X.$$.fragment,g),Y=!1},d(g){g&&m(e),B(l),B(c),O&&O.d(),x&&x.d(),B(D),B(C),B(J),B(X),h=!1,qe(me)}}}function at(r){let e,t,n,i;function l(a){r[16](a)}function s(a){r[17](a)}let o={id:"prefixCategory",title:"Prefix Category",itemId:"id",itemLabel:"name",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,clearable:!0,placeholder:"-- Please select --",invalid:r[1].hasErrors("type"),feedback:r[1].getErrors("type"),help:Te};return r[4]!==void 0&&(o.source=r[4]),r[0].prefixCategory!==void 0&&(o.target=r[0].prefixCategory),e=new He({props:o}),Z.push(()=>Q(e,"source",l)),Z.push(()=>Q(e,"target",s)),e.$on("change",r[18]),{c(){A(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,u){U(e,a,u),i=!0},p(a,u){const c={};u[0]&2&&(c.invalid=a[1].hasErrors("type")),u[0]&2&&(c.feedback=a[1].getErrors("type")),!t&&u[0]&16&&(t=!0,c.source=a[4],ee(()=>t=!1)),!n&&u[0]&1&&(n=!0,c.target=a[0].prefixCategory,ee(()=>n=!1)),e.$set(c)},i(a){i||(T(e.$$.fragment,a),i=!0)},o(a){F(e.$$.fragment,a),i=!1},d(a){B(e,a)}}}function st(r){let e,t,n,i,l;function s(u){r[19](u)}function o(u){r[20](u)}let a={id:"prefix",title:"Prefix",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,clearable:!0,placeholder:"-- Please select --",invalid:r[1].hasErrors("type"),feedback:r[1].getErrors("type"),help:Te};return r[5]!==void 0&&(a.source=r[5]),r[0].prefix!==void 0&&(a.target=r[0].prefix),t=new He({props:a}),Z.push(()=>Q(t,"source",s)),Z.push(()=>Q(t,"target",o)),t.$on("change",r[21]),{c(){e=E("div"),A(t.$$.fragment),this.h()},l(u){e=y(u,"DIV",{class:!0});var c=L(e);M(t.$$.fragment,c),c.forEach(m),this.h()},h(){p(e,"class","w-1/4")},m(u,c){P(u,e,c),U(t,e,null),l=!0},p(u,c){const v={};c[0]&2&&(v.invalid=u[1].hasErrors("type")),c[0]&2&&(v.feedback=u[1].getErrors("type")),!n&&c[0]&32&&(n=!0,v.source=u[5],ee(()=>n=!1)),!i&&c[0]&1&&(i=!0,v.target=u[0].prefix,ee(()=>i=!1)),t.$set(v)},i(u){l||(T(t.$$.fragment,u),l=!0)},o(u){F(t.$$.fragment,u),l=!1},d(u){u&&m(e),B(t)}}}function er(r){let e,t,n=r[3]&&lt(r);return{c(){n&&n.c(),e=ke()},l(i){n&&n.l(i),e=ke()},m(i,l){n&&n.m(i,l),P(i,e,l),t=!0},p(i,l){i[3]?n?(n.p(i,l),l[0]&8&&T(n,1)):(n=lt(i),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(he(),F(n,1,1,()=>{n=null}),ge())},i(i){t||(T(n),t=!0)},o(i){F(n),t=!1},d(i){n&&n.d(i),i&&m(e)}}}let Te=!0;function tr(r,e,t){let n,i,l,s,o;ye(r,ct,h=>t(26,i=h)),ye(r,dt,h=>t(27,l=h)),ye(r,pt,h=>t(28,s=h)),ye(r,ae,h=>t(29,o=h));let{link:a}=e,u=!1,c=oe.get(),v=o,V=s,k=l,S=i;const b=Tt();Vt(()=>{console.log("ðŸš€ ~ file: ExternalLink.svelte:28 ~ linksList:",v),Le.setHelpItemList(Rt),oe.reset(),console.log("ðŸš€ ~ file: ExternalLink.svelte:45 ~ onMount ~ types:",S),setTimeout(async()=>{a.id>0&&t(1,c=oe(a,""))},10),t(3,u=!0)});function _(h){setTimeout(async()=>{t(1,c=oe(a,h.target.id))},100)}function d(){oe.reset(),b("cancel")}async function w(){var h=await(a.id==0)?jt(a):Ht(a);(await h).status===200?b("success"):b("fail"),oe.reset()}function D(h,me){console.log(me,h),me=="type"&&h.detail.text=="prefix"&&(console.log("reset prefix"),t(0,a.prefix=void 0,a)),t(1,c=oe(a,me))}function I(h){r.$$.not_equal(a.name,h)&&(a.name=h,t(0,a))}function f(h){et.call(this,r,h)}function C(h){S=h,t(2,S)}function W(h){r.$$.not_equal(a.type,h)&&(a.type=h,t(0,a))}const te=h=>D(h,"type");function z(h){V=h,t(4,V)}function K(h){r.$$.not_equal(a.prefixCategory,h)&&(a.prefixCategory=h,t(0,a))}const J=h=>D(h,"type");function $e(h){k=h,t(5,k)}function H(h){r.$$.not_equal(a.prefix,h)&&(a.prefix=h,t(0,a))}const X=h=>D(h,"type");function ce(h){r.$$.not_equal(a.uri,h)&&(a.uri=h,t(0,a))}function de(h){et.call(this,r,h)}function pe(h){a=h,t(0,a)}const Y=()=>d();return r.$$set=h=>{"link"in h&&t(0,a=h.link)},r.$$.update=()=>{r.$$.dirty[0]&1,r.$$.dirty[0]&2&&t(6,n=c.isValid()),r.$$.dirty[0]&4},[a,c,S,u,V,k,n,_,d,w,D,I,f,C,W,te,z,K,J,$e,H,X,ce,de,pe,Y]}class rr extends xe{constructor(e){super(),Ae(this,e,tr,er,Me,{link:0},null,[-1,-1])}}function nr(r){let e,t;return e=new Dt({props:{error:r[18]}}),{c(){A(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,i){U(e,n,i),t=!0},p:be,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function ir(r){let e,t,n,i,l,s,o,a,u,c,v;const V=[ar,lr],k=[];function S(d,w){return d[0].id<1?0:1}n=S(r),i=k[n]=V[n](r);let b=!r[1]&&ot(r),_=r[1]&&ut(r);return c=new Nt({props:{config:r[3]}}),c.$on("action",r[13]),{c(){e=E("div"),t=E("div"),i.c(),l=G(),s=E("div"),b&&b.c(),o=G(),_&&_.c(),a=G(),u=E("div"),A(c.$$.fragment),this.h()},l(d){e=y(d,"DIV",{class:!0});var w=L(e);t=y(w,"DIV",{class:!0});var D=L(t);i.l(D),D.forEach(m),l=j(w),s=y(w,"DIV",{class:!0});var I=L(s);b&&b.l(I),I.forEach(m),w.forEach(m),o=j(d),_&&_.l(d),a=j(d),u=y(d,"DIV",{class:!0});var f=L(u);M(c.$$.fragment,f),f.forEach(m),this.h()},h(){p(t,"class","h3 h-9"),p(s,"class","text-right"),p(e,"class","grid grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(u,"class","table table-compact w-full")},m(d,w){P(d,e,w),$(e,t),k[n].m(t,null),$(e,l),$(e,s),b&&b.m(s,null),P(d,o,w),_&&_.m(d,w),P(d,a,w),P(d,u,w),U(c,u,null),v=!0},p(d,w){let D=n;n=S(d),n===D?k[n].p(d,w):(he(),F(k[D],1,1,()=>{k[D]=null}),ge(),i=k[n],i?i.p(d,w):(i=k[n]=V[n](d),i.c()),T(i,1),i.m(t,null)),d[1]?b&&(he(),F(b,1,1,()=>{b=null}),ge()):b?(b.p(d,w),w&2&&T(b,1)):(b=ot(d),b.c(),T(b,1),b.m(s,null)),d[1]?_?(_.p(d,w),w&2&&T(_,1)):(_=ut(d),_.c(),T(_,1),_.m(a.parentNode,a)):_&&(he(),F(_,1,1,()=>{_=null}),ge())},i(d){v||(T(i),T(b),T(_),T(c.$$.fragment,d),v=!0)},o(d){F(i),F(b),F(_),F(c.$$.fragment,d),v=!1},d(d){d&&m(e),k[n].d(),b&&b.d(),d&&m(o),_&&_.d(d),d&&m(a),d&&m(u),B(c)}}}function lr(r){let e,t=r[0].name+"",n,i,l,s;return{c(){e=E("span"),n=ie(t)},l(o){e=y(o,"SPAN",{});var a=L(e);n=le(a,t),a.forEach(m)},m(o,a){P(o,e,a),$(e,n),s=!0},p(o,a){(!s||a&1)&&t!==(t=o[0].name+"")&&_e(n,t)},i(o){s||(Ue(()=>{s&&(l&&l.end(1),i=Ge(e,ve,{delay:400}),i.start())}),s=!0)},o(o){i&&i.invalidate(),l=je(e,ve,{}),s=!1},d(o){o&&m(e),o&&l&&l.end()}}}function ar(r){let e,t,n,i,l;return{c(){e=E("span"),t=ie("Create neáº‡ External link")},l(s){e=y(s,"SPAN",{});var o=L(e);t=le(o,"Create neáº‡ External link"),o.forEach(m)},m(s,o){P(s,e,o),$(e,t),l=!0},p:be,i(s){l||(Ue(()=>{l&&(i&&i.end(1),n=Ge(e,ve,{delay:400}),n.start())}),l=!0)},o(s){n&&n.invalidate(),i=je(e,ve,{}),l=!1},d(s){s&&m(e),s&&i&&i.end()}}}function ot(r){let e,t,n,i,l,s;return t=new ue({props:{icon:ft}}),{c(){e=E("button"),A(t.$$.fragment),this.h()},l(o){e=y(o,"BUTTON",{class:!0,title:!0,id:!0});var a=L(e);M(t.$$.fragment,a),a.forEach(m),this.h()},h(){p(e,"class","btn variant-filled-secondary shadow-md h-9 w-16"),p(e,"title","Create neáº‡ External Link"),p(e,"id","create")},m(o,a){P(o,e,a),U(t,e,null),i=!0,l||(s=[R(e,"mouseover",r[9]),R(e,"click",r[10])],l=!0)},p:be,i(o){i||(T(t.$$.fragment,o),Ue(()=>{i&&(n||(n=tt(e,ve,{},!0)),n.run(1))}),i=!0)},o(o){F(t.$$.fragment,o),n||(n=tt(e,ve,{},!1)),n.run(0),i=!1},d(o){o&&m(e),B(t),o&&n&&n.end(),l=!1,qe(s)}}}function ut(r){let e,t,n,i,l;return t=new rr({props:{link:r[0]}}),t.$on("cancel",r[11]),t.$on("success",r[12]),t.$on("fail",r[8]),{c(){e=E("div"),A(t.$$.fragment)},l(s){e=y(s,"DIV",{});var o=L(e);M(t.$$.fragment,o),o.forEach(m)},m(s,o){P(s,e,o),U(t,e,null),l=!0},p(s,o){const a={};o&1&&(a.link=s[0]),t.$set(a)},i(s){l||(T(t.$$.fragment,s),Ue(()=>{l&&(i&&i.end(1),n=Ge(e,Qe,{}),n.start())}),l=!0)},o(s){F(t.$$.fragment,s),n&&n.invalidate(),i=je(e,Qe,{}),l=!1},d(s){s&&m(e),B(t),s&&i&&i.end()}}}function sr(r){let e,t,n,i,l,s,o,a,u,c;return s=new ue({props:{icon:ft}}),u=new Pt({props:{cols:5}}),{c(){e=E("div"),t=E("div"),n=G(),i=E("div"),l=E("button"),A(s.$$.fragment),o=G(),a=E("div"),A(u.$$.fragment),this.h()},l(v){e=y(v,"DIV",{class:!0});var V=L(e);t=y(V,"DIV",{class:!0}),L(t).forEach(m),n=j(V),i=y(V,"DIV",{class:!0});var k=L(i);l=y(k,"BUTTON",{class:!0});var S=L(l);M(s.$$.fragment,S),S.forEach(m),k.forEach(m),V.forEach(m),o=j(v),a=y(v,"DIV",{class:!0});var b=L(a);M(u.$$.fragment,b),b.forEach(m),this.h()},h(){p(t,"class","h-9 w-96 placeholder animate-pulse"),p(l,"class","btn placeholder animate-pulse shadow-md h-9 w-16"),p(i,"class","flex justify-end"),p(e,"class","grid w-full grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(a,"class","table-container w-full")},m(v,V){P(v,e,V),$(e,t),$(e,n),$(e,i),$(i,l),U(s,l,null),P(v,o,V),P(v,a,V),U(u,a,null),c=!0},p:be,i(v){c||(T(s.$$.fragment,v),T(u.$$.fragment,v),c=!0)},o(v){F(s.$$.fragment,v),F(u.$$.fragment,v),c=!1},d(v){v&&m(e),B(s),v&&m(o),v&&m(a),B(u)}}}function or(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!0,pending:sr,then:ir,catch:nr,error:18,blocks:[,,,]};return St(r[2](),n),{c(){e=ke(),n.block.c()},l(i){e=ke(),n.block.l(i)},m(i,l){P(i,e,l),n.block.m(i,n.anchor=l),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,l){r=i,It(n,r,l)},i(i){t||(T(n.block),t=!0)},o(i){for(let l=0;l<3;l+=1){const s=n.blocks[l];F(s)}t=!1},d(i){i&&m(e),n.block.d(i),n.token=null,n=null}}}function ur(r){let e,t,n,i;return e=new Lt({props:{help:!0,title:"Manage External Links",$$slots:{default:[or]},$$scope:{ctx:r}}}),n=new Ct({}),{c(){A(e.$$.fragment),t=G(),A(n.$$.fragment)},l(l){M(e.$$.fragment,l),t=j(l),M(n.$$.fragment,l)},m(l,s){U(e,l,s),P(l,t,s),U(n,l,s),i=!0},p(l,[s]){const o={};s&524291&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){i||(T(e.$$.fragment,l),T(n.$$.fragment,l),i=!0)},o(l){F(e.$$.fragment,l),F(n.$$.fragment,l),i=!1},d(l){B(e,l),l&&m(t),B(n,l)}}}function fr(r,e,t){let n;ye(r,ae,f=>t(15,n=f));const i=Ft();let l=[],s=new rt,o=!1;async function a(){t(1,o=!1),l=await Mt(),t(0,s=new rt),ae.set(l),console.log("ðŸš€ ~ file: +page.svelte:50 ~ reload ~ externalLinks:",l);const f=await Ut();ct.set(f);const C=await Bt();pt.set(C);const W=await qt();dt.set(W),console.log("ðŸš€ ~ file: +page.svelte:60 ~ reload ~ prefixesAsList:",W),console.log("store",n)}const u={id:"ExternalLinks",data:ae,optionsComponent:Kt,columns:{id:{fixedWidth:30},uri:{header:"Uri",disableFiltering:!0,disableSorting:!0,exclude:!1},type:{instructions:{toStringFn:f=>f==null?void 0:f.text,toSortableValueFn:f=>f==null?void 0:f.text,toFilterableValueFn:f=>f==null?void 0:f.text}},prefix:{instructions:{toStringFn:f=>f!=null?f.text:"",toSortableValueFn:f=>f!=null?f.text:"",toFilterableValueFn:f=>f!=null?f.text:""}},prefixCategory:{header:"Prefix category",instructions:{toStringFn:f=>f!=null?f.name:"",toSortableValueFn:f=>f!=null?f.name:"",toFilterableValueFn:f=>f!=null?f.name:""}},optionsColumn:{fixedWidth:140}}};function c(){o&&v(),t(1,o=!o)}function v(){t(0,s={id:0,name:"",type:"",uri:""}),t(1,o=!1)}function V(f){if(f.action=="edit"&&(t(1,o=!1),t(0,s=n.find(C=>C.id===f.id)),t(1,o=!0),window.scrollTo({top:60,behavior:"smooth"})),f.action=="link"){let C=f.url;C.startsWith("http")||(C="https://"+C),window.open(f.url)}if(f.action=="delete"){const C={type:"confirm",title:"Delete External Link",body:"Are you sure you wish to delete external link "+s.name+"?",response:W=>{W===!0&&k(f.id)}};i.trigger(C)}}async function k(f){console.log("ðŸš€ ~ file: +page.svelte:112 ~ deleteFn ~ id:",f),await Gt(f)?(Ie.showNotification({notificationType:Fe.success,message:"External Link deleted."}),a()):Ie.showNotification({notificationType:Fe.error,message:"Can't delete external link."})}function S(f){const C=f>0?"External link updated.":"External link created.";Ie.showNotification({notificationType:Fe.success,message:C}),t(1,o=!1),setTimeout(async()=>{a()},10)}function b(){Ie.showNotification({notificationType:Fe.error,message:"Can't save external Link."})}return[s,o,a,u,c,v,V,S,b,()=>{Le.show("create")},()=>c(),()=>v(),()=>S(s.id),f=>V(f.detail.type)]}class wr extends xe{constructor(e){super(),Ae(this,e,fr,ur,Me,{})}}export{wr as component,$r as universal};
