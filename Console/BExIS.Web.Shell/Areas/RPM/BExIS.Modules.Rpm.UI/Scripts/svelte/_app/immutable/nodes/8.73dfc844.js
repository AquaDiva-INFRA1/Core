import{A as ae,F as K,a as Me,c as Ue,n as W,g as X,h as Y,P as Oe,k as ke,d as he,s as _e}from"../chunks/eslint4b.es.291451ed.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.0e3888ae.js";import{S as De,i as Ee,s as Ie,e as ve,b as N,g as w,v as ne,d as y,f as se,h as p,W as Be,o as Te,w as x,Y as ee,k as E,y as L,a as O,l as I,m as T,z as q,c as B,n as b,H as D,A as M,M as j,Z as Fe,_ as ie,B as U,O as ye,a3 as Re,q as oe,r as re,a4 as Pe,I as Z,$ as Ve,a0 as Ce,a1 as Ne,u as Ae}from"../chunks/index.59d1c272.js";import{w as He}from"../chunks/index.75aa493d.js";import{g as Je}from"../chunks/stores.78226074.js";import{M as je,E as ze}from"../chunks/ErrorMessage.13e1af6e.js";import{T as Ge,a as Ke}from"../chunks/TablePlaceholder.f956c013.js";import{K as We,V as Xe,v as H,w as te,T as ge}from"../chunks/vest.production.0974e7aa.js";import{T as Ye}from"../chunks/TextArea.d1c31edd.js";import{T as Ze}from"../chunks/tableOptions.60347c53.js";function Qe(){return{}}const Ii=Object.freeze(Object.defineProperty({__proto__:null,load:Qe},Symbol.toStringTag,{value:"Module"})),xe=async()=>{try{return(await ae.get("/rpm/dimension/GetDimensions")).data}catch(t){throw console.error(t),t}},ei=async t=>{try{return(await ae.post("/rpm/dimension/EditDimension",t)).data}catch(e){throw console.error(e),e}},ii=async t=>{try{return(await ae.post("/rpm/dimension/DeleteDimension",{id:t})).data}catch(e){throw console.error(e),e}},J=We((t,e)=>{Xe(e),H("name","name is required",()=>{te(t.dimension.name).isNotBlank()}),H("name","name is not unique",()=>t.dimensions.find(i=>i.name.toLowerCase().trim()===t.dimension.name.toLowerCase().trim())==null||t.dimensions.filter(i=>i.name.toLowerCase().trim()===t.dimension.name.toLowerCase().trim()&&i.id!=t.dimension.id).length==0),H("description","description is required",()=>{te(t.dimension.description).isNotBlank()}),H("specification","specification is required",()=>{te(t.dimension.specification).isNotBlank()}),H("specification","specification has to be like this pattern L([0-9],[0-9])M([0-9],[0-9])T([0-9],[0-9])I([0-9],[0-9])Θ([0-9],[0-9])N([0-9],[0-9])J([0-9],[0-9])",()=>{var n;let i={regex:new RegExp("^(L\\([0-9],[0-9]\\)M\\([0-9],[0-9]\\)T\\([0-9],[0-9]\\)I\\([0-9],[0-9]\\)Θ\\([0-9],[0-9]\\)N\\([0-9],[0-9]\\)J\\([0-9],[0-9]\\))?$"),check:!1};return i.output=(n=t.dimension.specification.match(i.regex))==null?void 0:n[0],i.output!=null&&i.output!=null&&i.output!=""&&(t.dimension.specification=i.output,i.check=!0),i.check}),H("specification","add specification",()=>t.dimension.specification!="L(0,0)M(0,0)T(0,0)I(0,0)Θ(0,0)N(0,0)J(0,0)")});function be(t){let e,i,n,a,o,s,l,r,d,C,h,m,g,v,c,_,f,k,$,F,z,A,Q,le;function Se(u){t[7](u)}let ce={id:"name",label:"Name",help:!0,required:!0,valid:t[1].isValid("name"),invalid:t[1].hasErrors("name"),feedback:t[1].getErrors("name")};t[0].name!==void 0&&(ce.value=t[0].name),a=new ge({props:ce}),x.push(()=>ee(a,"value",Se)),a.$on("input",t[3]);function Le(u){t[8](u)}let fe={id:"specification",label:"Specification",help:!0,required:!0,valid:t[1].isValid("specification"),invalid:t[1].hasErrors("specification"),feedback:t[1].getErrors("specification")};t[0].specification!==void 0&&(fe.value=t[0].specification),r=new ge({props:fe}),x.push(()=>ee(r,"value",Le)),r.$on("input",t[3]);function qe(u){t[9](u)}let ue={id:"description",label:"Description",help:!0,required:!0,valid:t[1].isValid("description"),invalid:t[1].hasErrors("description"),feedback:t[1].getErrors("description")};return t[0].description!==void 0&&(ue.value=t[0].description),m=new Ye({props:ue}),x.push(()=>ee(m,"value",qe)),m.$on("input",t[3]),f=new K({props:{icon:Me}}),F=new K({props:{icon:Ue}}),{c(){e=E("form"),i=E("div"),n=E("div"),L(a.$$.fragment),s=O(),l=E("div"),L(r.$$.fragment),C=O(),h=E("div"),L(m.$$.fragment),v=O(),c=E("div"),_=E("button"),L(f.$$.fragment),k=O(),$=E("button"),L(F.$$.fragment),this.h()},l(u){e=I(u,"FORM",{});var V=T(e);i=I(V,"DIV",{class:!0});var S=T(i);n=I(S,"DIV",{class:!0});var R=T(n);q(a.$$.fragment,R),R.forEach(p),s=B(S),l=I(S,"DIV",{class:!0});var P=T(l);q(r.$$.fragment,P),P.forEach(p),C=B(S),h=I(S,"DIV",{class:!0});var de=T(h);q(m.$$.fragment,de),de.forEach(p),v=B(S),c=I(S,"DIV",{class:!0});var G=T(c);_=I(G,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var me=T(_);q(f.$$.fragment,me),me.forEach(p),k=B(G),$=I(G,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var pe=T($);q(F.$$.fragment,pe),pe.forEach(p),G.forEach(p),S.forEach(p),V.forEach(p),this.h()},h(){b(n,"class","pb-3"),b(l,"class","pb-3"),b(h,"class","pb-3 col-span-2"),b(_,"type","button"),b(_,"class","btn variant-filled-warning h-9 w-16 shadow-md"),b(_,"title","Cancel"),b(_,"id","cancel"),b($,"type","submit"),b($,"class","btn variant-filled-primary h-9 w-16 shadow-md"),b($,"title",z="Save Unit, "+t[0].name),b($,"id","save"),$.disabled=t[2],b(c,"class","py-5 text-right col-span-2"),b(i,"class","grid grid-cols-2 gap-5")},m(u,V){N(u,e,V),D(e,i),D(i,n),M(a,n,null),D(i,s),D(i,l),M(r,l,null),D(i,C),D(i,h),M(m,h,null),D(i,v),D(i,c),D(c,_),M(f,_,null),D(c,k),D(c,$),M(F,$,null),A=!0,Q||(le=[j(_,"mouseover",t[10]),j(_,"click",t[11]),j($,"mouseover",t[12]),j(e,"submit",Fe(t[4]))],Q=!0)},p(u,V){const S={};V&2&&(S.valid=u[1].isValid("name")),V&2&&(S.invalid=u[1].hasErrors("name")),V&2&&(S.feedback=u[1].getErrors("name")),!o&&V&1&&(o=!0,S.value=u[0].name,ie(()=>o=!1)),a.$set(S);const R={};V&2&&(R.valid=u[1].isValid("specification")),V&2&&(R.invalid=u[1].hasErrors("specification")),V&2&&(R.feedback=u[1].getErrors("specification")),!d&&V&1&&(d=!0,R.value=u[0].specification,ie(()=>d=!1)),r.$set(R);const P={};V&2&&(P.valid=u[1].isValid("description")),V&2&&(P.invalid=u[1].hasErrors("description")),V&2&&(P.feedback=u[1].getErrors("description")),!g&&V&1&&(g=!0,P.value=u[0].description,ie(()=>g=!1)),m.$set(P),(!A||V&1&&z!==(z="Save Unit, "+u[0].name))&&b($,"title",z),(!A||V&4)&&($.disabled=u[2])},i(u){A||(w(a.$$.fragment,u),w(r.$$.fragment,u),w(m.$$.fragment,u),w(f.$$.fragment,u),w(F.$$.fragment,u),A=!0)},o(u){y(a.$$.fragment,u),y(r.$$.fragment,u),y(m.$$.fragment,u),y(f.$$.fragment,u),y(F.$$.fragment,u),A=!1},d(u){u&&p(e),U(a),U(r),U(m),U(f),U(F),Q=!1,ye(le)}}}function ti(t){let e,i,n=t[0]&&be(t);return{c(){n&&n.c(),e=ve()},l(a){n&&n.l(a),e=ve()},m(a,o){n&&n.m(a,o),N(a,e,o),i=!0},p(a,[o]){a[0]?n?(n.p(a,o),o&1&&w(n,1)):(n=be(a),n.c(),w(n,1),n.m(e.parentNode,e)):n&&(ne(),y(n,1,1,()=>{n=null}),se())},i(a){i||(w(n),i=!0)},o(a){y(n),i=!1},d(a){n&&n.d(a),a&&p(e)}}}function ni(t,e,i){let n;const a=Be();let o=J.get(),{dimension:s}=e,{dimensions:l}=e;Te(async()=>{s.id==0?(J.reset(),i(0,s.specification="L(0,0)M(0,0)T(0,0)I(0,0)Θ(0,0)N(0,0)J(0,0)",s)):setTimeout(async()=>{i(1,o=J({dimension:s,dimensions:l},""))},10)});function r(f){setTimeout(async()=>{i(1,o=J({dimension:s,dimensions:l},f.target.id))},10)}async function d(){let f=await ei(s);console.log("DimensionValidationResult",f),console.log("result.dimensionListItem.name",f.dimensionListItem.name);let k;f.validationResult.isValid!=!0?(k="Can't save Dimension",f.dimensionListItem.name!=""&&(k+=' "'+f.dimensionListItem.name+'" .'),f.validationResult.validationItems!=null&&f.validationResult.validationItems.length>0&&f.validationResult.validationItems.forEach($=>{console.log("validationItem",$),k+="<li>"+$.message+"</li>"}),W.showNotification({notificationType:X.error,message:k})):(k='Unit "'+f.dimensionListItem.name+'" saved.',W.showNotification({notificationType:X.success,message:k}),J.reset(),a("save"))}function C(){J.reset(),a("cancel")}function h(f){t.$$.not_equal(s.name,f)&&(s.name=f,i(0,s))}function m(f){t.$$.not_equal(s.specification,f)&&(s.specification=f,i(0,s))}function g(f){t.$$.not_equal(s.description,f)&&(s.description=f,i(0,s))}const v=()=>{Y.show("cancel")},c=()=>C(),_=()=>{Y.show("save")};return t.$$set=f=>{"dimension"in f&&i(0,s=f.dimension),"dimensions"in f&&i(6,l=f.dimensions)},t.$$.update=()=>{t.$$.dirty&2&&i(2,n=!o.isValid())},[s,o,n,r,d,C,l,h,m,g,v,c,_]}class si extends De{constructor(e){super(),Ee(this,e,ni,ti,Ie,{dimension:0,dimensions:6})}}const ai=[{id:"create",name:"Create neẇ Dimension",description:"Click here to create a new dimension"},{id:"delete",name:"Delete Dimension",description:"Click here to delete the dimension"},{id:"edit",name:"Edit Dimension",description:"Click here to edit the dimension"},{id:"save",name:"Save Dimension",description:"Click here to save the dimension"},{id:"cancel",name:"Cancel",description:"Click here to cancel"},{id:"name",name:"Name",description:"Name of the dimension. <li>Has to be unique.</li>"},{id:"description",name:"Description",description:"Description of the dimension. <li>a shot overview how the unit should be used.</li>"},{id:"specification",name:"Specification ",description:"Specification of the dimension. <li>tbd</li>"}],oi={helpItems:ai};function ri(t){let e,i;return e=new ze({props:{error:t[15]}}),{c(){L(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,a){M(e,n,a),i=!0},p:Z,i(n){i||(w(e.$$.fragment,n),i=!0)},o(n){y(e.$$.fragment,n),i=!1},d(n){U(e,n)}}}function li(t){let e,i,n,a,o,s,l,r,d;function C(c,_){return c[0].id<1?fi:ci}let h=C(t),m=h(t),g=!t[1]&&$e(t),v=t[1]&&we(t);return r=new Ge({props:{config:{id:"dimensions",data:t[3],optionsComponent:Ze,columns:{id:{exclude:!0},inUse:{disableFiltering:!0,exclude:!0}}}}}),r.$on("action",t[10]),{c(){e=E("div"),i=E("div"),m.c(),n=O(),a=E("div"),g&&g.c(),o=O(),v&&v.c(),s=O(),l=E("div"),L(r.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var _=T(e);i=I(_,"DIV",{class:!0});var f=T(i);m.l(f),f.forEach(p),n=B(_),a=I(_,"DIV",{class:!0});var k=T(a);g&&g.l(k),k.forEach(p),_.forEach(p),o=B(c),v&&v.l(c),s=B(c),l=I(c,"DIV",{class:!0});var $=T(l);q(r.$$.fragment,$),$.forEach(p),this.h()},h(){b(i,"class","h3 h-9"),b(a,"class","text-right"),b(e,"class","grid grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),b(l,"class","table table-compact w-full")},m(c,_){N(c,e,_),D(e,i),m.m(i,null),D(e,n),D(e,a),g&&g.m(a,null),N(c,o,_),v&&v.m(c,_),N(c,s,_),N(c,l,_),M(r,l,null),d=!0},p(c,_){h===(h=C(c))&&m?m.p(c,_):(m.d(1),m=h(c),m&&(m.c(),m.m(i,null))),c[1]?g&&(ne(),y(g,1,1,()=>{g=null}),se()):g?(g.p(c,_),_&2&&w(g,1)):(g=$e(c),g.c(),w(g,1),g.m(a,null)),c[1]?v?(v.p(c,_),_&2&&w(v,1)):(v=we(c),v.c(),w(v,1),v.m(s.parentNode,s)):v&&(ne(),y(v,1,1,()=>{v=null}),se())},i(c){d||(w(g),w(v),w(r.$$.fragment,c),d=!0)},o(c){y(g),y(v),y(r.$$.fragment,c),d=!1},d(c){c&&p(e),m.d(),g&&g.d(),c&&p(o),v&&v.d(c),c&&p(s),c&&p(l),U(r)}}}function ci(t){let e=t[0].name+"",i;return{c(){i=oe(e)},l(n){i=re(n,e)},m(n,a){N(n,i,a)},p(n,a){a&1&&e!==(e=n[0].name+"")&&Ae(i,e)},d(n){n&&p(i)}}}function fi(t){let e;return{c(){e=oe("Create neẇ Dimension")},l(i){e=re(i,"Create neẇ Dimension")},m(i,n){N(i,e,n)},p:Z,d(i){i&&p(e)}}}function $e(t){let e,i,n,a,o,s,l;return i=new K({props:{icon:ke}}),{c(){e=E("button"),L(i.$$.fragment),this.h()},l(r){e=I(r,"BUTTON",{class:!0,title:!0,id:!0});var d=T(e);q(i.$$.fragment,d),d.forEach(p),this.h()},h(){b(e,"class","btn variant-filled-secondary shadow-md h-9 w-16"),b(e,"title","Create neẇ Dimension"),b(e,"id","create")},m(r,d){N(r,e,d),M(i,e,null),o=!0,s||(l=[j(e,"mouseover",t[8]),j(e,"click",t[9])],s=!0)},p:Z,i(r){o||(w(i.$$.fragment,r),Ve(()=>{o&&(a&&a.end(1),n=Ce(e,he,{}),n.start())}),o=!0)},o(r){y(i.$$.fragment,r),n&&n.invalidate(),a=Ne(e,he,{}),o=!1},d(r){r&&p(e),U(i),r&&a&&a.end(),s=!1,ye(l)}}}function we(t){let e,i,n,a,o;return i=new si({props:{dimension:t[0],dimensions:t[2]}}),i.$on("cancel",t[6]),i.$on("save",t[4]),{c(){e=E("div"),L(i.$$.fragment)},l(s){e=I(s,"DIV",{});var l=T(e);q(i.$$.fragment,l),l.forEach(p)},m(s,l){N(s,e,l),M(i,e,null),o=!0},p(s,l){const r={};l&1&&(r.dimension=s[0]),l&4&&(r.dimensions=s[2]),i.$set(r)},i(s){o||(w(i.$$.fragment,s),Ve(()=>{o&&(a&&a.end(1),n=Ce(e,_e,{}),n.start())}),o=!0)},o(s){y(i.$$.fragment,s),n&&n.invalidate(),a=Ne(e,_e,{}),o=!1},d(s){s&&p(e),U(i),s&&a&&a.end()}}}function ui(t){let e,i,n,a,o,s,l,r,d,C;return s=new K({props:{icon:ke}}),d=new Ke({props:{cols:4}}),{c(){e=E("div"),i=E("div"),n=O(),a=E("div"),o=E("button"),L(s.$$.fragment),l=O(),r=E("div"),L(d.$$.fragment),this.h()},l(h){e=I(h,"DIV",{class:!0});var m=T(e);i=I(m,"DIV",{class:!0}),T(i).forEach(p),n=B(m),a=I(m,"DIV",{class:!0});var g=T(a);o=I(g,"BUTTON",{class:!0});var v=T(o);q(s.$$.fragment,v),v.forEach(p),g.forEach(p),m.forEach(p),l=B(h),r=I(h,"DIV",{});var c=T(r);q(d.$$.fragment,c),c.forEach(p),this.h()},h(){b(i,"class","h-9 w-96 placeholder animate-pulse"),b(o,"class","btn placeholder animate-pulse shadow-md h-9 w-16"),b(a,"class","flex justify-end"),b(e,"class","grid w-full grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500")},m(h,m){N(h,e,m),D(e,i),D(e,n),D(e,a),D(a,o),M(s,o,null),N(h,l,m),N(h,r,m),M(d,r,null),C=!0},p:Z,i(h){C||(w(s.$$.fragment,h),w(d.$$.fragment,h),C=!0)},o(h){y(s.$$.fragment,h),y(d.$$.fragment,h),C=!1},d(h){h&&p(e),U(s),h&&p(l),h&&p(r),U(d)}}}function di(t){let e,i,n,a,o,s={ctx:t,current:null,token:null,hasCatch:!0,pending:ui,then:li,catch:ri,error:15,blocks:[,,,]};return Re(t[4](),s),{c(){e=E("div"),i=E("h1"),n=oe("Dimensions"),a=O(),s.block.c(),this.h()},l(l){e=I(l,"DIV",{class:!0});var r=T(e);i=I(r,"H1",{class:!0});var d=T(i);n=re(d,"Dimensions"),d.forEach(p),a=B(r),s.block.l(r),r.forEach(p),this.h()},h(){b(i,"class","h1"),b(e,"class","w-full")},m(l,r){N(l,e,r),D(e,i),D(i,n),D(e,a),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,o=!0},p(l,r){t=l,Pe(s,t,r)},i(l){o||(w(s.block),o=!0)},o(l){for(let r=0;r<3;r+=1){const d=s.blocks[r];y(d)}o=!1},d(l){l&&p(e),s.block.d(),s.token=null,s=null}}}function mi(t){let e,i,n,a;return e=new Oe({props:{help:!0,title:"Manage Dimensions",$$slots:{default:[di]},$$scope:{ctx:t}}}),n=new je({}),{c(){L(e.$$.fragment),i=O(),L(n.$$.fragment)},l(o){q(e.$$.fragment,o),i=B(o),q(n.$$.fragment,o)},m(o,s){M(e,o,s),N(o,i,s),M(n,o,s),a=!0},p(o,[s]){const l={};s&65543&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){a||(w(e.$$.fragment,o),w(n.$$.fragment,o),a=!0)},o(o){y(e.$$.fragment,o),y(n.$$.fragment,o),a=!1},d(o){U(e,o),o&&p(i),U(n,o)}}}function pi(t,e,i){let n;const a=Je();let o=oi.helpItems,s=[];const l=He([]);let r,d=!1;Te(async()=>{Y.setHelpItemList(o),i(1,d=!1)});async function C(){i(1,d=!1),i(7,s=await xe()),h()}async function h(){i(0,r={id:0,name:"",description:"",specification:"",inUse:!1})}function m(k){if(i(0,r={...n.find($=>$.id===k.id)}),k.action=="edit"&&i(1,d=!0),k.action=="delete"){const $={type:"confirm",title:"Delete Unit",body:'Are you sure you wish to delete Dimension "'+r.name+'" ('+r.specification+")?",response:F=>{F===!0&&g(k.id)}};a.trigger($)}}async function g(k){await ii(k)!=!0?W.showNotification({notificationType:X.error,message:`Can't delete Dimension "`+r.name+'".'}):W.showNotification({notificationType:X.success,message:'Dimension "'+r.name+'" deleted.'}),C()}function v(){d&&h(),i(1,d=!d)}const c=()=>{Y.show("create")},_=()=>v(),f=k=>m(k.detail.type);return t.$$.update=()=>{t.$$.dirty&128&&i(2,n=s),t.$$.dirty&128&&l.set(s)},[r,d,n,l,C,m,v,s,c,_,f]}class Ti extends De{constructor(e){super(),Ee(this,e,pi,mi,Ie,{})}}export{Ti as component,Ii as universal};
