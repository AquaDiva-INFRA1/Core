import{S as $e,i as ke,t as k,g as ne,b as y,e as se,f as x,c as q,a as L,m as M,d as U,j as we,k as De}from"../chunks/index.DYURmr33.js";import{A as ae,F as X,q as Me,d as Ue,n as K,j as Q,a as W,P as Fe,k as Ee,g as me,s as pe}from"../chunks/eslint4b.es.BLUuBmqK.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.CX43xlbX.js";import{s as Ie,f as he,i as N,d as m,I as Oe,J as Te,F as ee,e as D,j as F,c as E,b as T,l as O,a as b,m as I,v as H,z as Be,G as ie,w as ye,g as Re,n as Y,q as Ce,t as Ve,k as Ne,o as je}from"../chunks/scheduler.CYFbRwgw.js";import{M as Pe,h as Je,u as Ae,E as He}from"../chunks/ErrorMessage.M_oOSnJZ.js";import{w as ze}from"../chunks/index.C7Wq-A05.js";import{g as Ge}from"../chunks/stores.BUBXUlFe.js";import{T as Xe,a as Ke}from"../chunks/TablePlaceholder.CbMr_W_-.js";import{b as Qe,o as We,p as J,v as te,T as _e}from"../chunks/vest.production.D6A33y39.js";import{T as Ye}from"../chunks/TextArea.DOnOi33E.js";import{T as Ze}from"../chunks/tableOptions.Cdfnr5CL.js";function xe(){return{}}const yi=Object.freeze(Object.defineProperty({__proto__:null,load:xe},Symbol.toStringTag,{value:"Module"})),ei=async()=>{try{return(await ae.get("/rpm/dimension/GetDimensions")).data}catch(t){throw console.error(t),t}},ii=async t=>{try{return(await ae.post("/rpm/dimension/EditDimension",t)).data}catch(e){throw console.error(e),e}},ti=async t=>{try{return(await ae.post("/rpm/dimension/DeleteDimension",{id:t})).data}catch(e){throw console.error(e),e}},A=Qe((t,e)=>{We(e),J("name","name is required",()=>{te(t.dimension.name).isNotBlank()}),J("name","name is not unique",()=>t.dimensions.find(i=>i.name.toLowerCase().trim()===t.dimension.name.toLowerCase().trim())==null||t.dimensions.filter(i=>i.name.toLowerCase().trim()===t.dimension.name.toLowerCase().trim()&&i.id!=t.dimension.id).length==0),J("description","description is required",()=>{te(t.dimension.description).isNotBlank()}),J("specification","specification is required",()=>{te(t.dimension.specification).isNotBlank()}),J("specification","specification has to be like this pattern L([0-9],[0-9])M([0-9],[0-9])T([0-9],[0-9])I([0-9],[0-9])Θ([0-9],[0-9])N([0-9],[0-9])J([0-9],[0-9])",()=>{var n;let i={regex:new RegExp("^(L\\([0-9],[0-9]\\)M\\([0-9],[0-9]\\)T\\([0-9],[0-9]\\)I\\([0-9],[0-9]\\)Θ\\([0-9],[0-9]\\)N\\([0-9],[0-9]\\)J\\([0-9],[0-9]\\))?$"),check:!1};return i.output=(n=t.dimension.specification.match(i.regex))==null?void 0:n[0],i.output!=null&&i.output!=null&&i.output!=""&&(t.dimension.specification=i.output,i.check=!0),i.check}),J("specification","add specification",()=>t.dimension.specification!="L(0,0)M(0,0)T(0,0)I(0,0)Θ(0,0)N(0,0)J(0,0)")});function ve(t){let e,i,n,a,r,s,l,o,p,V,_,d,g,v,c,h,f,w,$,B,z,P,Z,oe;function Se(u){t[7](u)}let re={id:"name",label:"Name",help:!0,required:!0,valid:t[1].isValid("name"),invalid:t[1].hasErrors("name"),feedback:t[1].getErrors("name")};t[0].name!==void 0&&(re.value=t[0].name),a=new _e({props:re}),ee.push(()=>x(a,"value",Se)),a.$on("input",t[3]);function qe(u){t[8](u)}let le={id:"specification",label:"Specification",help:!0,required:!0,valid:t[1].isValid("specification"),invalid:t[1].hasErrors("specification"),feedback:t[1].getErrors("specification")};t[0].specification!==void 0&&(le.value=t[0].specification),o=new _e({props:le}),ee.push(()=>x(o,"value",qe)),o.$on("input",t[3]);function Le(u){t[9](u)}let ce={id:"description",label:"Description",help:!0,required:!0,valid:t[1].isValid("description"),invalid:t[1].hasErrors("description"),feedback:t[1].getErrors("description")};return t[0].description!==void 0&&(ce.value=t[0].description),d=new Ye({props:ce}),ee.push(()=>x(d,"value",Le)),d.$on("input",t[3]),f=new X({props:{icon:Me}}),B=new X({props:{icon:Ue}}),{c(){e=D("form"),i=D("div"),n=D("div"),q(a.$$.fragment),s=F(),l=D("div"),q(o.$$.fragment),V=F(),_=D("div"),q(d.$$.fragment),v=F(),c=D("div"),h=D("button"),q(f.$$.fragment),w=F(),$=D("button"),q(B.$$.fragment),this.h()},l(u){e=E(u,"FORM",{});var C=T(e);i=E(C,"DIV",{class:!0});var S=T(i);n=E(S,"DIV",{class:!0});var R=T(n);L(a.$$.fragment,R),R.forEach(m),s=O(S),l=E(S,"DIV",{class:!0});var j=T(l);L(o.$$.fragment,j),j.forEach(m),V=O(S),_=E(S,"DIV",{class:!0});var fe=T(_);L(d.$$.fragment,fe),fe.forEach(m),v=O(S),c=E(S,"DIV",{class:!0});var G=T(c);h=E(G,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var ue=T(h);L(f.$$.fragment,ue),ue.forEach(m),w=O(G),$=E(G,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var de=T($);L(B.$$.fragment,de),de.forEach(m),G.forEach(m),S.forEach(m),C.forEach(m),this.h()},h(){b(n,"class","pb-3"),b(l,"class","pb-3"),b(_,"class","pb-3 col-span-2"),b(h,"type","button"),b(h,"class","btn variant-filled-warning h-9 w-16 shadow-md"),b(h,"title","Cancel"),b(h,"id","cancel"),b($,"type","submit"),b($,"class","btn variant-filled-primary h-9 w-16 shadow-md"),b($,"title",z="Save Unit, "+t[0].name),b($,"id","save"),$.disabled=t[2],b(c,"class","py-5 text-right col-span-2"),b(i,"class","grid grid-cols-2 gap-5")},m(u,C){N(u,e,C),I(e,i),I(i,n),M(a,n,null),I(i,s),I(i,l),M(o,l,null),I(i,V),I(i,_),M(d,_,null),I(i,v),I(i,c),I(c,h),M(f,h,null),I(c,w),I(c,$),M(B,$,null),P=!0,Z||(oe=[H(h,"mouseover",t[10]),H(h,"click",t[11]),H($,"mouseover",t[12]),H(e,"submit",Be(t[4]))],Z=!0)},p(u,C){const S={};C&2&&(S.valid=u[1].isValid("name")),C&2&&(S.invalid=u[1].hasErrors("name")),C&2&&(S.feedback=u[1].getErrors("name")),!r&&C&1&&(r=!0,S.value=u[0].name,ie(()=>r=!1)),a.$set(S);const R={};C&2&&(R.valid=u[1].isValid("specification")),C&2&&(R.invalid=u[1].hasErrors("specification")),C&2&&(R.feedback=u[1].getErrors("specification")),!p&&C&1&&(p=!0,R.value=u[0].specification,ie(()=>p=!1)),o.$set(R);const j={};C&2&&(j.valid=u[1].isValid("description")),C&2&&(j.invalid=u[1].hasErrors("description")),C&2&&(j.feedback=u[1].getErrors("description")),!g&&C&1&&(g=!0,j.value=u[0].description,ie(()=>g=!1)),d.$set(j),(!P||C&1&&z!==(z="Save Unit, "+u[0].name))&&b($,"title",z),(!P||C&4)&&($.disabled=u[2])},i(u){P||(k(a.$$.fragment,u),k(o.$$.fragment,u),k(d.$$.fragment,u),k(f.$$.fragment,u),k(B.$$.fragment,u),P=!0)},o(u){y(a.$$.fragment,u),y(o.$$.fragment,u),y(d.$$.fragment,u),y(f.$$.fragment,u),y(B.$$.fragment,u),P=!1},d(u){u&&m(e),U(a),U(o),U(d),U(f),U(B),Z=!1,ye(oe)}}}function ni(t){let e,i,n=t[0]&&ve(t);return{c(){n&&n.c(),e=he()},l(a){n&&n.l(a),e=he()},m(a,r){n&&n.m(a,r),N(a,e,r),i=!0},p(a,[r]){a[0]?n?(n.p(a,r),r&1&&k(n,1)):(n=ve(a),n.c(),k(n,1),n.m(e.parentNode,e)):n&&(ne(),y(n,1,1,()=>{n=null}),se())},i(a){i||(k(n),i=!0)},o(a){y(n),i=!1},d(a){a&&m(e),n&&n.d(a)}}}function si(t,e,i){let n;const a=Oe();let r=A.get(),{dimension:s}=e,{dimensions:l}=e;Te(async()=>{s.id==0?(A.reset(),i(0,s.specification="L(0,0)M(0,0)T(0,0)I(0,0)Θ(0,0)N(0,0)J(0,0)",s)):setTimeout(async()=>{i(1,r=A({dimension:s,dimensions:l},""))},10)});function o(f){setTimeout(async()=>{i(1,r=A({dimension:s,dimensions:l},f.target.id))},10)}async function p(){let f=await ii(s);console.log("DimensionValidationResult",f),console.log("result.dimensionListItem.name",f.dimensionListItem.name);let w;f.validationResult.isValid!=!0?(w="Can't save Dimension",f.dimensionListItem.name!=""&&(w+=' "'+f.dimensionListItem.name+'" .'),f.validationResult.validationItems!=null&&f.validationResult.validationItems.length>0&&f.validationResult.validationItems.forEach($=>{console.log("validationItem",$),w+="<li>"+$.message+"</li>"}),K.showNotification({notificationType:Q.error,message:w})):(w='Unit "'+f.dimensionListItem.name+'" saved.',K.showNotification({notificationType:Q.success,message:w}),A.reset(),a("save"))}function V(){A.reset(),a("cancel")}function _(f){t.$$.not_equal(s.name,f)&&(s.name=f,i(0,s))}function d(f){t.$$.not_equal(s.specification,f)&&(s.specification=f,i(0,s))}function g(f){t.$$.not_equal(s.description,f)&&(s.description=f,i(0,s))}const v=()=>{W.show("cancel")},c=()=>V(),h=()=>{W.show("save")};return t.$$set=f=>{"dimension"in f&&i(0,s=f.dimension),"dimensions"in f&&i(6,l=f.dimensions)},t.$$.update=()=>{t.$$.dirty&2&&i(2,n=!r.isValid())},[s,r,n,o,p,V,l,_,d,g,v,c,h]}class ai extends $e{constructor(e){super(),ke(this,e,si,ni,Ie,{dimension:0,dimensions:6})}}const oi=[{id:"create",name:"Create neẇ Dimension",description:"Click here to create a new dimension"},{id:"delete",name:"Delete Dimension",description:"Click here to delete the dimension"},{id:"edit",name:"Edit Dimension",description:"Click here to edit the dimension"},{id:"save",name:"Save Dimension",description:"Click here to save the dimension"},{id:"cancel",name:"Cancel",description:"Click here to cancel"},{id:"name",name:"Name",description:"Name of the dimension. <li>Has to be unique.</li>"},{id:"description",name:"Description",description:"Description of the dimension. <li>a shot overview how the unit should be used.</li>"},{id:"specification",name:"Specification ",description:"Specification of the dimension. <li>tbd</li>"}],ri={helpItems:oi};function li(t){let e,i;return e=new He({props:{error:t[15]}}),{c(){q(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){M(e,n,a),i=!0},p:Y,i(n){i||(k(e.$$.fragment,n),i=!0)},o(n){y(e.$$.fragment,n),i=!1},d(n){U(e,n)}}}function ci(t){let e,i,n,a,r,s,l,o,p;function V(c,h){return c[0].id<1?ui:fi}let _=V(t),d=_(t),g=!t[1]&&ge(t),v=t[1]&&be(t);return o=new Xe({props:{config:{id:"dimensions",data:t[3],optionsComponent:Ze,columns:{id:{exclude:!0},inUse:{disableFiltering:!0,exclude:!0}}}}}),o.$on("action",t[10]),{c(){e=D("div"),i=D("div"),d.c(),n=F(),a=D("div"),g&&g.c(),r=F(),v&&v.c(),s=F(),l=D("div"),q(o.$$.fragment),this.h()},l(c){e=E(c,"DIV",{class:!0});var h=T(e);i=E(h,"DIV",{class:!0});var f=T(i);d.l(f),f.forEach(m),n=O(h),a=E(h,"DIV",{class:!0});var w=T(a);g&&g.l(w),w.forEach(m),h.forEach(m),r=O(c),v&&v.l(c),s=O(c),l=E(c,"DIV",{class:!0});var $=T(l);L(o.$$.fragment,$),$.forEach(m),this.h()},h(){b(i,"class","h3 h-9"),b(a,"class","text-right"),b(e,"class","grid grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),b(l,"class","table table-compact w-full")},m(c,h){N(c,e,h),I(e,i),d.m(i,null),I(e,n),I(e,a),g&&g.m(a,null),N(c,r,h),v&&v.m(c,h),N(c,s,h),N(c,l,h),M(o,l,null),p=!0},p(c,h){_===(_=V(c))&&d?d.p(c,h):(d.d(1),d=_(c),d&&(d.c(),d.m(i,null))),c[1]?g&&(ne(),y(g,1,1,()=>{g=null}),se()):g?(g.p(c,h),h&2&&k(g,1)):(g=ge(c),g.c(),k(g,1),g.m(a,null)),c[1]?v?(v.p(c,h),h&2&&k(v,1)):(v=be(c),v.c(),k(v,1),v.m(s.parentNode,s)):v&&(ne(),y(v,1,1,()=>{v=null}),se())},i(c){p||(k(g),k(v),k(o.$$.fragment,c),p=!0)},o(c){y(g),y(v),y(o.$$.fragment,c),p=!1},d(c){c&&(m(e),m(r),m(s),m(l)),d.d(),g&&g.d(),v&&v.d(c),U(o)}}}function fi(t){let e=t[0].name+"",i;return{c(){i=Ve(e)},l(n){i=Ne(n,e)},m(n,a){N(n,i,a)},p(n,a){a&1&&e!==(e=n[0].name+"")&&je(i,e)},d(n){n&&m(i)}}}function ui(t){let e;return{c(){e=Ve("Create neẇ Dimension")},l(i){e=Ne(i,"Create neẇ Dimension")},m(i,n){N(i,e,n)},p:Y,d(i){i&&m(e)}}}function ge(t){let e,i,n,a,r,s,l;return i=new X({props:{icon:Ee}}),{c(){e=D("button"),q(i.$$.fragment),this.h()},l(o){e=E(o,"BUTTON",{class:!0,title:!0,id:!0});var p=T(e);L(i.$$.fragment,p),p.forEach(m),this.h()},h(){b(e,"class","btn variant-filled-secondary shadow-md h-9 w-16"),b(e,"title","Create neẇ Dimension"),b(e,"id","create")},m(o,p){N(o,e,p),M(i,e,null),r=!0,s||(l=[H(e,"mouseover",t[8]),H(e,"click",t[9])],s=!0)},p:Y,i(o){r||(k(i.$$.fragment,o),o&&Ce(()=>{r&&(a&&a.end(1),n=we(e,me,{}),n.start())}),r=!0)},o(o){y(i.$$.fragment,o),n&&n.invalidate(),o&&(a=De(e,me,{})),r=!1},d(o){o&&m(e),U(i),o&&a&&a.end(),s=!1,ye(l)}}}function be(t){let e,i,n,a,r;return i=new ai({props:{dimension:t[0],dimensions:t[2]}}),i.$on("cancel",t[6]),i.$on("save",t[4]),{c(){e=D("div"),q(i.$$.fragment)},l(s){e=E(s,"DIV",{});var l=T(e);L(i.$$.fragment,l),l.forEach(m)},m(s,l){N(s,e,l),M(i,e,null),r=!0},p(s,l){const o={};l&1&&(o.dimension=s[0]),l&4&&(o.dimensions=s[2]),i.$set(o)},i(s){r||(k(i.$$.fragment,s),s&&Ce(()=>{r&&(a&&a.end(1),n=we(e,pe,{}),n.start())}),r=!0)},o(s){y(i.$$.fragment,s),n&&n.invalidate(),s&&(a=De(e,pe,{})),r=!1},d(s){s&&m(e),U(i),s&&a&&a.end()}}}function di(t){let e,i,n,a,r,s,l,o,p,V;return s=new X({props:{icon:Ee}}),p=new Ke({props:{cols:4}}),{c(){e=D("div"),i=D("div"),n=F(),a=D("div"),r=D("button"),q(s.$$.fragment),l=F(),o=D("div"),q(p.$$.fragment),this.h()},l(_){e=E(_,"DIV",{class:!0});var d=T(e);i=E(d,"DIV",{class:!0}),T(i).forEach(m),n=O(d),a=E(d,"DIV",{class:!0});var g=T(a);r=E(g,"BUTTON",{class:!0});var v=T(r);L(s.$$.fragment,v),v.forEach(m),g.forEach(m),d.forEach(m),l=O(_),o=E(_,"DIV",{});var c=T(o);L(p.$$.fragment,c),c.forEach(m),this.h()},h(){b(i,"class","h-9 w-96 placeholder animate-pulse"),b(r,"class","btn placeholder animate-pulse shadow-md h-9 w-16"),b(a,"class","flex justify-end"),b(e,"class","grid w-full grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500")},m(_,d){N(_,e,d),I(e,i),I(e,n),I(e,a),I(a,r),M(s,r,null),N(_,l,d),N(_,o,d),M(p,o,null),V=!0},p:Y,i(_){V||(k(s.$$.fragment,_),k(p.$$.fragment,_),V=!0)},o(_){y(s.$$.fragment,_),y(p.$$.fragment,_),V=!1},d(_){_&&(m(e),m(l),m(o)),U(s),U(p)}}}function mi(t){let e,i,n="Dimensions",a,r,s={ctx:t,current:null,token:null,hasCatch:!0,pending:di,then:ci,catch:li,error:15,blocks:[,,,]};return Je(t[4](),s),{c(){e=D("div"),i=D("h1"),i.textContent=n,a=F(),s.block.c(),this.h()},l(l){e=E(l,"DIV",{class:!0});var o=T(e);i=E(o,"H1",{class:!0,"data-svelte-h":!0}),Re(i)!=="svelte-zulwaf"&&(i.textContent=n),a=O(o),s.block.l(o),o.forEach(m),this.h()},h(){b(i,"class","h1"),b(e,"class","w-full")},m(l,o){N(l,e,o),I(e,i),I(e,a),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,r=!0},p(l,o){t=l,Ae(s,t,o)},i(l){r||(k(s.block),r=!0)},o(l){for(let o=0;o<3;o+=1){const p=s.blocks[o];y(p)}r=!1},d(l){l&&m(e),s.block.d(),s.token=null,s=null}}}function pi(t){let e,i,n,a;return e=new Fe({props:{help:!0,title:"Manage Dimensions",$$slots:{default:[mi]},$$scope:{ctx:t}}}),n=new Pe({}),{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment)},l(r){L(e.$$.fragment,r),i=O(r),L(n.$$.fragment,r)},m(r,s){M(e,r,s),N(r,i,s),M(n,r,s),a=!0},p(r,[s]){const l={};s&65543&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){a||(k(e.$$.fragment,r),k(n.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),y(n.$$.fragment,r),a=!1},d(r){r&&m(i),U(e,r),U(n,r)}}}function hi(t,e,i){let n;const a=Ge();let r=ri.helpItems,s=[];const l=ze([]);let o,p=!1;Te(async()=>{W.setHelpItemList(r),i(1,p=!1)});async function V(){i(1,p=!1),i(7,s=await ei()),_()}async function _(){i(0,o={id:0,name:"",description:"",specification:"",inUse:!1})}function d(w){if(i(0,o={...n.find($=>$.id===w.id)}),w.action=="edit"&&i(1,p=!0),w.action=="delete"){const $={type:"confirm",title:"Delete Unit",body:'Are you sure you wish to delete Dimension "'+o.name+'" ('+o.specification+")?",response:B=>{B===!0&&g(w.id)}};a.trigger($)}}async function g(w){await ti(w)!=!0?K.showNotification({notificationType:Q.error,message:`Can't delete Dimension "`+o.name+'".'}):K.showNotification({notificationType:Q.success,message:'Dimension "'+o.name+'" deleted.'}),V()}function v(){p&&_(),i(1,p=!p)}const c=()=>{W.show("create")},h=()=>v(),f=w=>d(w.detail.type);return t.$$.update=()=>{t.$$.dirty&128&&i(2,n=s),t.$$.dirty&128&&l.set(s)},[o,p,n,l,V,d,v,s,c,h,f]}class Ci extends $e{constructor(e){super(),ke(this,e,hi,pi,Ie,{})}}export{Ci as component,yi as universal};
