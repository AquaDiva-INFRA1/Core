import{S as Oe,i as Ae,c as A,a as M,m as U,t as E,b as C,d as B,g as he,e as ge,f as Y,h as Ze,j as qe,k as je}from"../chunks/index.DWlViqnX.js";import{h as bt,A as fe,F as ue,u as kt,f as $t,b as wt,a as Le,q as Et,d as yt,P as Lt,n as Ve,j as Ce,k as ft,g as ve,s as et}from"../chunks/eslint4b.es.Bsf3VjZw.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.5nEx3X7q.js";import{s as Me,e as y,l as j,c as L,h as S,d as m,o as G,a as p,i as N,p as $,x as Q,L as xe,B as Ge,Q as Ie,n as be,j as ke,t as se,m as oe,q as _e,O as ye,R as Tt,S as St,F as Z,P as ee,E as tt,H as Ue,g as Ft}from"../chunks/scheduler.DXasKYkc.js";import{M as Vt,h as Ct,u as It,E as Dt}from"../chunks/ErrorMessage.zD3AipS3.js";import{g as Pt}from"../chunks/stores.DoJTykP1.js";import{e as De,a as rt}from"../chunks/types.eQO6CGud.js";import{T as Nt,a as xt}from"../chunks/TablePlaceholder.C1VOyUyf.js";import{e as ie,a as ct,b as dt,p as pt}from"../chunks/stores.CsOm6McJ.js";import{M as He}from"../chunks/MultiSelect.ChCMpl6M.js";import{y as Ot,p as At,P as Pe,v as Ne,T as nt}from"../chunks/vest.production.Dzjo8v_D.js";function Mt(){return console.log(bt),{}}const Er=Object.freeze(Object.defineProperty({__proto__:null,load:Mt},Symbol.toStringTag,{value:"Module"})),Ut=async()=>{try{return(await fe.get("/rpm/ExternalLink/get")).data}catch(r){throw console.error(r),r}},Bt=async()=>{try{return(await fe.get("/rpm/ExternalLink/getLinkTypes")).data}catch(r){throw console.error(r),r}},qt=async()=>{try{return(await fe.get("/rpm/ExternalLink/GetPrefixCategoriesAsList")).data}catch(r){throw console.error(r),r}},jt=async()=>{try{return(await fe.get("/rpm/ExternalLink/GetPrefixListItems")).data}catch(r){throw console.error(r),r}},Gt=async r=>{try{return await fe.delete("/rpm/ExternalLink/delete?id="+r,null)}catch(e){throw console.error(e),e}},Ht=async r=>{try{return console.log("ðŸš€ ~ file: services.ts:38 ~ create ~ data:",r),await fe.post("/rpm/ExternalLink/create",r)}catch(e){throw console.error(e),e}},Wt=async r=>{try{return await fe.post("/rpm/ExternalLink/update",r)}catch(e){throw console.error(e),e}};function Rt(r){let e,t,n,i,l,s,o,a,u,c,v,T,k,F,b,_,d,w,D;return i=new ue({props:{icon:kt}}),u=new ue({props:{icon:$t}}),F=new ue({props:{icon:wt}}),{c(){e=y("tableOption"),t=y("div"),n=y("button"),A(i.$$.fragment),o=j(),a=y("button"),A(u.$$.fragment),T=j(),k=y("button"),A(F.$$.fragment),this.h()},l(V){e=L(V,"TABLEOPTION",{});var f=S(e);t=L(f,"DIV",{class:!0});var I=S(t);n=L(I,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var W=S(n);M(i.$$.fragment,W),W.forEach(m),o=G(I),a=L(I,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var te=S(a);M(u.$$.fragment,te),te.forEach(m),T=G(I),k=L(I,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var R=S(k);M(F.$$.fragment,R),R.forEach(m),I.forEach(m),f.forEach(m),this.h()},h(){p(n,"type","button"),p(n,"class","chip variant-filled-primary shadow-md"),p(n,"title",l="Link, "+r[0].name),p(n,"id",s="link-"+r[0].id),p(a,"type","button"),p(a,"class","chip variant-filled-primary shadow-md"),p(a,"title",c="Edit External Link, "+r[0].name),p(a,"id",v="edit-"+r[0].id),p(k,"type","button"),p(k,"class","chip variant-filled-error shadow-md"),p(k,"title",b="Delete External Link, "+r[0].name),p(k,"id",_="delete-"+r[0].id),p(t,"class","w-18")},m(V,f){N(V,e,f),$(e,t),$(t,n),U(i,n,null),$(t,o),$(t,a),U(u,a,null),$(t,T),$(t,k),U(F,k,null),d=!0,w||(D=[Q(n,"mouseover",r[3]),Q(n,"click",xe(r[4])),Q(a,"mouseover",r[5]),Q(a,"click",xe(r[6])),Q(k,"mouseover",r[7]),Q(k,"click",xe(r[8]))],w=!0)},p(V,[f]){(!d||f&1&&l!==(l="Link, "+V[0].name))&&p(n,"title",l),(!d||f&1&&s!==(s="link-"+V[0].id))&&p(n,"id",s),(!d||f&1&&c!==(c="Edit External Link, "+V[0].name))&&p(a,"title",c),(!d||f&1&&v!==(v="edit-"+V[0].id))&&p(a,"id",v),(!d||f&1&&b!==(b="Delete External Link, "+V[0].name))&&p(k,"title",b),(!d||f&1&&_!==(_="delete-"+V[0].id))&&p(k,"id",_)},i(V){d||(E(i.$$.fragment,V),E(u.$$.fragment,V),E(F.$$.fragment,V),d=!0)},o(V){C(i.$$.fragment,V),C(u.$$.fragment,V),C(F.$$.fragment,V),d=!1},d(V){V&&m(e),B(i),B(u),B(F),w=!1,Ge(D)}}}function zt(r,e,t){let{row:n}=e,{dispatchFn:i}=e,l="";n.uri!=""&&(l=n.uri,n.prefix&&(l=""+n.prefix.url+n.uri));const s=()=>{Le.show("link")},o=()=>i({type:{action:"link",url:l}}),a=()=>{Le.show("edit")},u=()=>i({type:{action:"edit",id:n.id}}),c=()=>{Le.show("delete")},v=()=>i({type:{action:"delete",id:n.id}});return r.$$set=T=>{"row"in T&&t(0,n=T.row),"dispatchFn"in T&&t(1,i=T.dispatchFn)},[n,i,l,s,o,a,u,c,v]}class Qt extends Oe{constructor(e){super(),Ae(this,e,zt,Rt,Me,{row:0,dispatchFn:1})}}const ae=Ot((r={},e)=>{At(e),Pe("name","name is required",()=>{Ne(r.name).isNotBlank()}),Pe("name","name allready exist.",()=>{const t=Ie(ie).map(l=>l.name),n=r.id>0?Ie(ie).find(l=>l.id==r.id):{id:0,name:""},i=n?t.filter(l=>l!=n.name):t;Ne(r.name).notInside(i)}),Pe("uri","uri is required",()=>{Ne(r.uri).isNotBlank()}),Pe("uri","uri allready exist.",()=>{const t=r.id>0?Ie(ie).find(i=>i.id==r.id):{id:0,name:"",type:"",uri:""},n=Ie(ie).map(i=>i.uri!=(t==null?void 0:t.uri)?i.uri:"");Ne(r.uri).notInside(n)})}),Xt=[{id:"create",name:"Create new external link",description:"Click here to create a new external link"},{id:"delete",name:"Delete external link",description:"Click here to delete the external link"},{id:"edit",name:"Edit external link",description:"Click here to edit the external link"},{id:"save",name:"Save external link",description:"Click here to save the external link"},{id:"cancel",name:"Cancel",description:"Click here to cancel"},{id:"name",name:"Name",description:"Name of the external link. <li>Has to be unique.</li>"},{id:"uri",name:"Uri",description:"The destination of the external link on the internet."},{id:"type",name:"Type",description:"Type is a context for a group of external links for a better selection of meanings."}];function it(r){let e;function t(l,s){var o;return(o=l[0].prefix)!=null&&o.id?Kt:Jt}let n=t(r),i=n(r);return{c(){i.c(),e=ke()},l(l){i.l(l),e=ke()},m(l,s){i.m(l,s),N(l,e,s)},p(l,s){n===(n=t(l))&&i?i.p(l,s):(i.d(1),i=n(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){l&&m(e),i.d(l)}}}function Jt(r){let e,t=r[0].uri+"",n;return{c(){e=y("a"),n=se(t),this.h()},l(i){e=L(i,"A",{class:!0,target:!0});var l=S(e);n=oe(l,t),l.forEach(m),this.h()},h(){p(e,"class","a"),p(e,"target","_blank")},m(i,l){N(i,e,l),$(e,n)},p(i,l){l&1&&t!==(t=i[0].uri+"")&&_e(n,t)},d(i){i&&m(e)}}}function Kt(r){let e,t,n=r[0].prefix.text+"",i,l,s=r[0].uri+"",o,a,u,c,v=r[0].prefix.url+"",T,k=r[0].uri+"",F,b;return{c(){e=y("div"),t=y("b"),i=se(n),l=se(":"),o=se(s),a=j(),u=y("div"),c=y("a"),T=se(v),F=se(k),this.h()},l(_){e=L(_,"DIV",{});var d=S(e);t=L(d,"B",{class:!0});var w=S(t);i=oe(w,n),l=oe(w,":"),o=oe(w,s),w.forEach(m),d.forEach(m),a=G(_),u=L(_,"DIV",{});var D=S(u);c=L(D,"A",{class:!0,target:!0,href:!0});var V=S(c);T=oe(V,v),F=oe(V,k),V.forEach(m),D.forEach(m),this.h()},h(){p(t,"class","text-sm"),p(c,"class","a"),p(c,"target","_blank"),p(c,"href",b=""+(r[0].prefix.url+r[0].uri))},m(_,d){N(_,e,d),$(e,t),$(t,i),$(t,l),$(t,o),N(_,a,d),N(_,u,d),$(u,c),$(c,T),$(c,F)},p(_,d){d&1&&n!==(n=_[0].prefix.text+"")&&_e(i,n),d&1&&s!==(s=_[0].uri+"")&&_e(o,s),d&1&&v!==(v=_[0].prefix.url+"")&&_e(T,v),d&1&&k!==(k=_[0].uri+"")&&_e(F,k),d&1&&b!==(b=""+(_[0].prefix.url+_[0].uri))&&p(c,"href",b)},d(_){_&&(m(e),m(a),m(u))}}}function Yt(r){let e,t=r[0].uri!=""&&it(r);return{c(){e=y("div"),t&&t.c(),this.h()},l(n){e=L(n,"DIV",{class:!0});var i=S(e);t&&t.l(i),i.forEach(m),this.h()},h(){p(e,"class","card p-5 flex-col gap-2")},m(n,i){N(n,e,i),t&&t.m(e,null)},p(n,[i]){n[0].uri!=""?t?t.p(n,i):(t=it(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:be,o:be,d(n){n&&m(e),t&&t.d()}}}function Zt(r,e,t){let{link:n}=e;return console.log("ðŸš€ ~ file: UrlPreview.svelte:6 ~ link:",n),r.$$set=i=>{"link"in i&&t(0,n=i.link)},[n]}class er extends Oe{constructor(e){super(),Ae(this,e,Zt,Yt,Me,{link:0})}}function lt(r){var Qe,Xe;let e,t,n,i,l,s,o,a,u,c,v,T,k,F,b,_,d,w,D,V,f,I,W,te,R,z,X,$e,H,J,ce,de,pe,K,h,me;function mt(g){r[11](g)}let We={id:"name",placeholder:"Name",valid:r[1].isValid("name"),invalid:r[1].hasErrors("name"),feedback:r[1].getErrors("name"),help:Te};r[0].name!==void 0&&(We.value=r[0].name),l=new nt({props:We}),Z.push(()=>Y(l,"value",mt)),l.$on("change",r[12]),l.$on("input",r[7]);function _t(g){r[13](g)}function ht(g){r[14](g)}let Be={id:"type",title:"Type",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,clearable:!1,placeholder:"-- Please select --",invalid:r[1].hasErrors("type"),feedback:r[1].getErrors("type"),help:Te};r[2]!==void 0&&(Be.source=r[2]),r[0].type!==void 0&&(Be.target=r[0].type),c=new He({props:Be}),Z.push(()=>Y(c,"source",_t)),Z.push(()=>Y(c,"target",ht)),c.$on("change",r[15]);let x=((Qe=r[0].type)==null?void 0:Qe.id)===De.prefix&&at(r),O=((Xe=r[0].type)==null?void 0:Xe.id)!==De.prefix&&st(r);function gt(g){r[22](g)}let Re={id:"uri",label:"Uri",placeholder:"Uri",valid:r[1].isValid("uri"),invalid:r[1].hasErrors("uri"),feedback:r[1].getErrors("uri"),help:Te};r[0].uri!==void 0&&(Re.value=r[0].uri),D=new nt({props:Re}),Z.push(()=>Y(D,"value",gt)),D.$on("change",r[23]),D.$on("input",r[7]);function vt(g){r[24](g)}let ze={};return r[0]!==void 0&&(ze.link=r[0]),I=new er({props:ze}),Z.push(()=>Y(I,"link",vt)),X=new ue({props:{icon:Et}}),J=new ue({props:{icon:yt}}),{c(){e=y("form"),t=y("div"),n=y("div"),i=y("div"),A(l.$$.fragment),o=j(),a=y("div"),u=y("div"),A(c.$$.fragment),k=j(),F=y("div"),x&&x.c(),b=j(),_=y("div"),O&&O.c(),d=j(),w=y("div"),A(D.$$.fragment),f=j(),A(I.$$.fragment),te=j(),R=y("div"),z=y("button"),A(X.$$.fragment),$e=j(),H=y("button"),A(J.$$.fragment),this.h()},l(g){e=L(g,"FORM",{});var P=S(e);t=L(P,"DIV",{id:!0,class:!0});var q=S(t);n=L(q,"DIV",{class:!0});var re=S(n);i=L(re,"DIV",{class:!0});var ne=S(i);M(l.$$.fragment,ne),ne.forEach(m),re.forEach(m),o=G(q),a=L(q,"DIV",{class:!0});var le=S(a);u=L(le,"DIV",{class:!0});var we=S(u);M(c.$$.fragment,we),we.forEach(m),k=G(le),F=L(le,"DIV",{class:!0});var Ee=S(F);x&&x.l(Ee),Ee.forEach(m),le.forEach(m),b=G(q),_=L(q,"DIV",{class:!0});var Se=S(_);O&&O.l(Se),d=G(Se),w=L(Se,"DIV",{class:!0});var Je=S(w);M(D.$$.fragment,Je),Je.forEach(m),Se.forEach(m),f=G(q),M(I.$$.fragment,q),te=G(q),R=L(q,"DIV",{class:!0});var Fe=S(R);z=L(Fe,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var Ke=S(z);M(X.$$.fragment,Ke),Ke.forEach(m),$e=G(Fe),H=L(Fe,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var Ye=S(H);M(J.$$.fragment,Ye),Ye.forEach(m),Fe.forEach(m),q.forEach(m),P.forEach(m),this.h()},h(){p(i,"class","w-1/2"),p(n,"class","flex gap-5 items-center"),p(u,"class","w-1/4"),p(F,"class","w-1/4"),p(a,"class","flex gap-5 items-center"),p(w,"class","grow"),p(_,"class","flex gap-5"),p(z,"type","button"),p(z,"class","btn variant-filled-warning h-9 w-16 shadow-md"),p(z,"title","Cancel"),p(z,"id","cancel"),p(H,"type","submit"),p(H,"class","btn variant-filled-primary h-9 w-16 shadow-md"),p(H,"title",ce="Save external link, "+r[0].name),p(H,"id","save"),H.disabled=de=!r[6],p(R,"class","py-5 text-right col-span-2"),p(t,"id",pe="link-"+r[0].id+"-form"),p(t,"class","space-y-5 card shadow-md p-5")},m(g,P){N(g,e,P),$(e,t),$(t,n),$(n,i),U(l,i,null),$(t,o),$(t,a),$(a,u),U(c,u,null),$(a,k),$(a,F),x&&x.m(F,null),$(t,b),$(t,_),O&&O.m(_,null),$(_,d),$(_,w),U(D,w,null),$(t,f),U(I,t,null),$(t,te),$(t,R),$(R,z),U(X,z,null),$(R,$e),$(R,H),U(J,H,null),K=!0,h||(me=[Q(z,"click",r[25]),Q(e,"submit",xe(r[9]))],h=!0)},p(g,P){var we,Ee;const q={};P[0]&2&&(q.valid=g[1].isValid("name")),P[0]&2&&(q.invalid=g[1].hasErrors("name")),P[0]&2&&(q.feedback=g[1].getErrors("name")),!s&&P[0]&1&&(s=!0,q.value=g[0].name,ee(()=>s=!1)),l.$set(q);const re={};P[0]&2&&(re.invalid=g[1].hasErrors("type")),P[0]&2&&(re.feedback=g[1].getErrors("type")),!v&&P[0]&4&&(v=!0,re.source=g[2],ee(()=>v=!1)),!T&&P[0]&1&&(T=!0,re.target=g[0].type,ee(()=>T=!1)),c.$set(re),((we=g[0].type)==null?void 0:we.id)===De.prefix?x?(x.p(g,P),P[0]&1&&E(x,1)):(x=at(g),x.c(),E(x,1),x.m(F,null)):x&&(he(),C(x,1,1,()=>{x=null}),ge()),((Ee=g[0].type)==null?void 0:Ee.id)!==De.prefix?O?(O.p(g,P),P[0]&1&&E(O,1)):(O=st(g),O.c(),E(O,1),O.m(_,d)):O&&(he(),C(O,1,1,()=>{O=null}),ge());const ne={};P[0]&2&&(ne.valid=g[1].isValid("uri")),P[0]&2&&(ne.invalid=g[1].hasErrors("uri")),P[0]&2&&(ne.feedback=g[1].getErrors("uri")),!V&&P[0]&1&&(V=!0,ne.value=g[0].uri,ee(()=>V=!1)),D.$set(ne);const le={};!W&&P[0]&1&&(W=!0,le.link=g[0],ee(()=>W=!1)),I.$set(le),(!K||P[0]&1&&ce!==(ce="Save external link, "+g[0].name))&&p(H,"title",ce),(!K||P[0]&64&&de!==(de=!g[6]))&&(H.disabled=de),(!K||P[0]&1&&pe!==(pe="link-"+g[0].id+"-form"))&&p(t,"id",pe)},i(g){K||(E(l.$$.fragment,g),E(c.$$.fragment,g),E(x),E(O),E(D.$$.fragment,g),E(I.$$.fragment,g),E(X.$$.fragment,g),E(J.$$.fragment,g),K=!0)},o(g){C(l.$$.fragment,g),C(c.$$.fragment,g),C(x),C(O),C(D.$$.fragment,g),C(I.$$.fragment,g),C(X.$$.fragment,g),C(J.$$.fragment,g),K=!1},d(g){g&&m(e),B(l),B(c),x&&x.d(),O&&O.d(),B(D),B(I),B(X),B(J),h=!1,Ge(me)}}}function at(r){let e,t,n,i;function l(a){r[16](a)}function s(a){r[17](a)}let o={id:"prefixCategory",title:"Prefix Category",itemId:"id",itemLabel:"name",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,clearable:!0,placeholder:"-- Please select --",invalid:r[1].hasErrors("type"),feedback:r[1].getErrors("type"),help:Te};return r[4]!==void 0&&(o.source=r[4]),r[0].prefixCategory!==void 0&&(o.target=r[0].prefixCategory),e=new He({props:o}),Z.push(()=>Y(e,"source",l)),Z.push(()=>Y(e,"target",s)),e.$on("change",r[18]),{c(){A(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,u){U(e,a,u),i=!0},p(a,u){const c={};u[0]&2&&(c.invalid=a[1].hasErrors("type")),u[0]&2&&(c.feedback=a[1].getErrors("type")),!t&&u[0]&16&&(t=!0,c.source=a[4],ee(()=>t=!1)),!n&&u[0]&1&&(n=!0,c.target=a[0].prefixCategory,ee(()=>n=!1)),e.$set(c)},i(a){i||(E(e.$$.fragment,a),i=!0)},o(a){C(e.$$.fragment,a),i=!1},d(a){B(e,a)}}}function st(r){let e,t,n,i,l;function s(u){r[19](u)}function o(u){r[20](u)}let a={id:"prefix",title:"Prefix",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,clearable:!0,placeholder:"-- Please select --",invalid:r[1].hasErrors("type"),feedback:r[1].getErrors("type"),help:Te};return r[5]!==void 0&&(a.source=r[5]),r[0].prefix!==void 0&&(a.target=r[0].prefix),t=new He({props:a}),Z.push(()=>Y(t,"source",s)),Z.push(()=>Y(t,"target",o)),t.$on("change",r[21]),{c(){e=y("div"),A(t.$$.fragment),this.h()},l(u){e=L(u,"DIV",{class:!0});var c=S(e);M(t.$$.fragment,c),c.forEach(m),this.h()},h(){p(e,"class","w-1/4")},m(u,c){N(u,e,c),U(t,e,null),l=!0},p(u,c){const v={};c[0]&2&&(v.invalid=u[1].hasErrors("type")),c[0]&2&&(v.feedback=u[1].getErrors("type")),!n&&c[0]&32&&(n=!0,v.source=u[5],ee(()=>n=!1)),!i&&c[0]&1&&(i=!0,v.target=u[0].prefix,ee(()=>i=!1)),t.$set(v)},i(u){l||(E(t.$$.fragment,u),l=!0)},o(u){C(t.$$.fragment,u),l=!1},d(u){u&&m(e),B(t)}}}function tr(r){let e,t,n=r[3]&&lt(r);return{c(){n&&n.c(),e=ke()},l(i){n&&n.l(i),e=ke()},m(i,l){n&&n.m(i,l),N(i,e,l),t=!0},p(i,l){i[3]?n?(n.p(i,l),l[0]&8&&E(n,1)):(n=lt(i),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(he(),C(n,1,1,()=>{n=null}),ge())},i(i){t||(E(n),t=!0)},o(i){C(n),t=!1},d(i){i&&m(e),n&&n.d(i)}}}let Te=!0;function rr(r,e,t){let n,i,l,s,o;ye(r,ct,h=>t(26,i=h)),ye(r,dt,h=>t(27,l=h)),ye(r,pt,h=>t(28,s=h)),ye(r,ie,h=>t(29,o=h));let{link:a}=e,u=!1,c=ae.get(),v=o,T=s,k=l,F=i;const b=Tt();St(()=>{console.log("ðŸš€ ~ file: ExternalLink.svelte:28 ~ linksList:",v),Le.setHelpItemList(Xt),ae.reset(),console.log("ðŸš€ ~ file: ExternalLink.svelte:45 ~ onMount ~ types:",F),setTimeout(async()=>{a.id>0&&t(1,c=ae(a,""))},10),t(3,u=!0)});function _(h){setTimeout(async()=>{t(1,c=ae(a,h.target.id))},100)}function d(){ae.reset(),b("cancel")}async function w(){var h=await(a.id==0)?Ht(a):Wt(a);(await h).status===200?b("success"):b("fail"),ae.reset()}function D(h,me){console.log(me,h),me=="type"&&h.detail.text=="prefix"&&(console.log("reset prefix"),t(0,a.prefix=void 0,a)),t(1,c=ae(a,me))}function V(h){r.$$.not_equal(a.name,h)&&(a.name=h,t(0,a))}function f(h){tt.call(this,r,h)}function I(h){F=h,t(2,F)}function W(h){r.$$.not_equal(a.type,h)&&(a.type=h,t(0,a))}const te=h=>D(h,"type");function R(h){T=h,t(4,T)}function z(h){r.$$.not_equal(a.prefixCategory,h)&&(a.prefixCategory=h,t(0,a))}const X=h=>D(h,"type");function $e(h){k=h,t(5,k)}function H(h){r.$$.not_equal(a.prefix,h)&&(a.prefix=h,t(0,a))}const J=h=>D(h,"type");function ce(h){r.$$.not_equal(a.uri,h)&&(a.uri=h,t(0,a))}function de(h){tt.call(this,r,h)}function pe(h){a=h,t(0,a)}const K=()=>d();return r.$$set=h=>{"link"in h&&t(0,a=h.link)},r.$$.update=()=>{r.$$.dirty[0]&1,r.$$.dirty[0]&2&&t(6,n=c.isValid()),r.$$.dirty[0]&4},[a,c,F,u,T,k,n,_,d,w,D,V,f,I,W,te,R,z,X,$e,H,J,ce,de,pe,K]}class nr extends Oe{constructor(e){super(),Ae(this,e,rr,tr,Me,{link:0},null,[-1,-1])}}function ir(r){let e,t;return e=new Dt({props:{error:r[18]}}),{c(){A(e.$$.fragment)},l(n){M(e.$$.fragment,n)},m(n,i){U(e,n,i),t=!0},p:be,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function lr(r){let e,t,n,i,l,s,o,a,u,c,v;const T=[sr,ar],k=[];function F(d,w){return d[0].id<1?0:1}n=F(r),i=k[n]=T[n](r);let b=!r[1]&&ot(r),_=r[1]&&ut(r);return c=new Nt({props:{config:r[3]}}),c.$on("action",r[13]),{c(){e=y("div"),t=y("div"),i.c(),l=j(),s=y("div"),b&&b.c(),o=j(),_&&_.c(),a=j(),u=y("div"),A(c.$$.fragment),this.h()},l(d){e=L(d,"DIV",{class:!0});var w=S(e);t=L(w,"DIV",{class:!0});var D=S(t);i.l(D),D.forEach(m),l=G(w),s=L(w,"DIV",{class:!0});var V=S(s);b&&b.l(V),V.forEach(m),w.forEach(m),o=G(d),_&&_.l(d),a=G(d),u=L(d,"DIV",{class:!0});var f=S(u);M(c.$$.fragment,f),f.forEach(m),this.h()},h(){p(t,"class","h3 h-9"),p(s,"class","text-right"),p(e,"class","grid grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(u,"class","table table-compact w-full")},m(d,w){N(d,e,w),$(e,t),k[n].m(t,null),$(e,l),$(e,s),b&&b.m(s,null),N(d,o,w),_&&_.m(d,w),N(d,a,w),N(d,u,w),U(c,u,null),v=!0},p(d,w){let D=n;n=F(d),n===D?k[n].p(d,w):(he(),C(k[D],1,1,()=>{k[D]=null}),ge(),i=k[n],i?i.p(d,w):(i=k[n]=T[n](d),i.c()),E(i,1),i.m(t,null)),d[1]?b&&(he(),C(b,1,1,()=>{b=null}),ge()):b?(b.p(d,w),w&2&&E(b,1)):(b=ot(d),b.c(),E(b,1),b.m(s,null)),d[1]?_?(_.p(d,w),w&2&&E(_,1)):(_=ut(d),_.c(),E(_,1),_.m(a.parentNode,a)):_&&(he(),C(_,1,1,()=>{_=null}),ge())},i(d){v||(E(i),E(b),E(_),E(c.$$.fragment,d),v=!0)},o(d){C(i),C(b),C(_),C(c.$$.fragment,d),v=!1},d(d){d&&(m(e),m(o),m(a),m(u)),k[n].d(),b&&b.d(),_&&_.d(d),B(c)}}}function ar(r){let e,t=r[0].name+"",n,i,l,s;return{c(){e=y("span"),n=se(t)},l(o){e=L(o,"SPAN",{});var a=S(e);n=oe(a,t),a.forEach(m)},m(o,a){N(o,e,a),$(e,n),s=!0},p(o,a){(!s||a&1)&&t!==(t=o[0].name+"")&&_e(n,t)},i(o){s||(o&&Ue(()=>{s&&(l&&l.end(1),i=qe(e,ve,{delay:400}),i.start())}),s=!0)},o(o){i&&i.invalidate(),o&&(l=je(e,ve,{})),s=!1},d(o){o&&m(e),o&&l&&l.end()}}}function sr(r){let e,t="Create neáº‡ External link",n,i,l;return{c(){e=y("span"),e.textContent=t},l(s){e=L(s,"SPAN",{"data-svelte-h":!0}),Ft(e)!=="svelte-11y7i9c"&&(e.textContent=t)},m(s,o){N(s,e,o),l=!0},p:be,i(s){l||(s&&Ue(()=>{l&&(i&&i.end(1),n=qe(e,ve,{delay:400}),n.start())}),l=!0)},o(s){n&&n.invalidate(),s&&(i=je(e,ve,{})),l=!1},d(s){s&&m(e),s&&i&&i.end()}}}function ot(r){let e,t,n,i,l,s;return t=new ue({props:{icon:ft}}),{c(){e=y("button"),A(t.$$.fragment),this.h()},l(o){e=L(o,"BUTTON",{class:!0,title:!0,id:!0});var a=S(e);M(t.$$.fragment,a),a.forEach(m),this.h()},h(){p(e,"class","btn variant-filled-secondary shadow-md h-9 w-16"),p(e,"title","Create neáº‡ External Link"),p(e,"id","create")},m(o,a){N(o,e,a),U(t,e,null),i=!0,l||(s=[Q(e,"mouseover",r[9]),Q(e,"click",r[10])],l=!0)},p:be,i(o){i||(E(t.$$.fragment,o),o&&Ue(()=>{i&&(n||(n=Ze(e,ve,{},!0)),n.run(1))}),i=!0)},o(o){C(t.$$.fragment,o),o&&(n||(n=Ze(e,ve,{},!1)),n.run(0)),i=!1},d(o){o&&m(e),B(t),o&&n&&n.end(),l=!1,Ge(s)}}}function ut(r){let e,t,n,i,l;return t=new nr({props:{link:r[0]}}),t.$on("cancel",r[11]),t.$on("success",r[12]),t.$on("fail",r[8]),{c(){e=y("div"),A(t.$$.fragment)},l(s){e=L(s,"DIV",{});var o=S(e);M(t.$$.fragment,o),o.forEach(m)},m(s,o){N(s,e,o),U(t,e,null),l=!0},p(s,o){const a={};o&1&&(a.link=s[0]),t.$set(a)},i(s){l||(E(t.$$.fragment,s),s&&Ue(()=>{l&&(i&&i.end(1),n=qe(e,et,{}),n.start())}),l=!0)},o(s){C(t.$$.fragment,s),n&&n.invalidate(),s&&(i=je(e,et,{})),l=!1},d(s){s&&m(e),B(t),s&&i&&i.end()}}}function or(r){let e,t,n,i,l,s,o,a,u,c;return s=new ue({props:{icon:ft}}),u=new xt({props:{cols:5}}),{c(){e=y("div"),t=y("div"),n=j(),i=y("div"),l=y("button"),A(s.$$.fragment),o=j(),a=y("div"),A(u.$$.fragment),this.h()},l(v){e=L(v,"DIV",{class:!0});var T=S(e);t=L(T,"DIV",{class:!0}),S(t).forEach(m),n=G(T),i=L(T,"DIV",{class:!0});var k=S(i);l=L(k,"BUTTON",{class:!0});var F=S(l);M(s.$$.fragment,F),F.forEach(m),k.forEach(m),T.forEach(m),o=G(v),a=L(v,"DIV",{class:!0});var b=S(a);M(u.$$.fragment,b),b.forEach(m),this.h()},h(){p(t,"class","h-9 w-96 placeholder animate-pulse"),p(l,"class","btn placeholder animate-pulse shadow-md h-9 w-16"),p(i,"class","flex justify-end"),p(e,"class","grid w-full grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(a,"class","table-container w-full")},m(v,T){N(v,e,T),$(e,t),$(e,n),$(e,i),$(i,l),U(s,l,null),N(v,o,T),N(v,a,T),U(u,a,null),c=!0},p:be,i(v){c||(E(s.$$.fragment,v),E(u.$$.fragment,v),c=!0)},o(v){C(s.$$.fragment,v),C(u.$$.fragment,v),c=!1},d(v){v&&(m(e),m(o),m(a)),B(s),B(u)}}}function ur(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!0,pending:or,then:lr,catch:ir,error:18,blocks:[,,,]};return Ct(r[2](),n),{c(){e=ke(),n.block.c()},l(i){e=ke(),n.block.l(i)},m(i,l){N(i,e,l),n.block.m(i,n.anchor=l),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,l){r=i,It(n,r,l)},i(i){t||(E(n.block),t=!0)},o(i){for(let l=0;l<3;l+=1){const s=n.blocks[l];C(s)}t=!1},d(i){i&&m(e),n.block.d(i),n.token=null,n=null}}}function fr(r){let e,t,n,i;return e=new Lt({props:{help:!0,title:"Manage External Links",$$slots:{default:[ur]},$$scope:{ctx:r}}}),n=new Vt({}),{c(){A(e.$$.fragment),t=j(),A(n.$$.fragment)},l(l){M(e.$$.fragment,l),t=G(l),M(n.$$.fragment,l)},m(l,s){U(e,l,s),N(l,t,s),U(n,l,s),i=!0},p(l,[s]){const o={};s&524291&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){i||(E(e.$$.fragment,l),E(n.$$.fragment,l),i=!0)},o(l){C(e.$$.fragment,l),C(n.$$.fragment,l),i=!1},d(l){l&&m(t),B(e,l),B(n,l)}}}function cr(r,e,t){let n;ye(r,ie,f=>t(15,n=f));const i=Pt();let l=[],s=new rt,o=!1;async function a(){t(1,o=!1),l=await Ut(),t(0,s=new rt),ie.set(l),console.log("ðŸš€ ~ file: +page.svelte:50 ~ reload ~ externalLinks:",l);const f=await Bt();ct.set(f);const I=await qt();pt.set(I);const W=await jt();dt.set(W),console.log("ðŸš€ ~ file: +page.svelte:60 ~ reload ~ prefixesAsList:",W),console.log("store",n)}const u={id:"ExternalLinks",data:ie,optionsComponent:Qt,columns:{id:{fixedWidth:30},uri:{header:"Uri",disableFiltering:!0,disableSorting:!0,exclude:!1},type:{instructions:{toStringFn:f=>f==null?void 0:f.text,toSortableValueFn:f=>f==null?void 0:f.text,toFilterableValueFn:f=>f==null?void 0:f.text}},prefix:{instructions:{toStringFn:f=>f!=null?f.text:"",toSortableValueFn:f=>f!=null?f.text:"",toFilterableValueFn:f=>f!=null?f.text:""}},prefixCategory:{header:"Prefix category",instructions:{toStringFn:f=>f!=null?f.name:"",toSortableValueFn:f=>f!=null?f.name:"",toFilterableValueFn:f=>f!=null?f.name:""}},optionsColumn:{fixedWidth:140}}};function c(){o&&v(),t(1,o=!o)}function v(){t(0,s={id:0,name:"",type:"",uri:""}),t(1,o=!1)}function T(f){if(f.action=="edit"&&(t(1,o=!1),t(0,s=n.find(I=>I.id===f.id)),t(1,o=!0),window.scrollTo({top:60,behavior:"smooth"})),f.action=="link"){let I=f.url;I.startsWith("http")||(I="https://"+I),window.open(f.url)}if(f.action=="delete"){const I={type:"confirm",title:"Delete External Link",body:"Are you sure you wish to delete external link "+s.name+"?",response:W=>{W===!0&&k(f.id)}};i.trigger(I)}}async function k(f){console.log("ðŸš€ ~ file: +page.svelte:112 ~ deleteFn ~ id:",f),await Gt(f)?(Ve.showNotification({notificationType:Ce.success,message:"External Link deleted."}),a()):Ve.showNotification({notificationType:Ce.error,message:"Can't delete external link."})}function F(f){const I=f>0?"External link updated.":"External link created.";Ve.showNotification({notificationType:Ce.success,message:I}),t(1,o=!1),setTimeout(async()=>{a()},10)}function b(){Ve.showNotification({notificationType:Ce.error,message:"Can't save external Link."})}return[s,o,a,u,c,v,T,F,b,()=>{Le.show("create")},()=>c(),()=>v(),()=>F(s.id),f=>T(f.detail.type)]}class yr extends Oe{constructor(e){super(),Ae(this,e,cr,fr,Me,{})}}export{yr as component,Er as universal};
