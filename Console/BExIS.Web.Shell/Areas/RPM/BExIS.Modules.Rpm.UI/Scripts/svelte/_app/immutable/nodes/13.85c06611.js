import{A as Oe,F as ve,a as Yt,c as Zt,h as Ue,i as Qt,j as Ft,P as xt,n as He,g as je,k as Pt,d as we,s as $t}from"../chunks/eslint4b.es.291451ed.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.0e3888ae.js";import{a6 as wt,S as ke,i as Ve,s as ye,w as X,Y,k as $,y as M,a as H,l as w,m as k,z as q,h as d,c as j,n as p,b as C,H as T,A as U,M as oe,Z as ot,_ as Z,g as S,d as N,B as O,O as Xe,J as Me,W as ei,o as Mt,R as ti,q as Ee,r as De,I as Q,e as ee,u as Ye,a2 as ii,v as We,f as Je,a3 as ni,a4 as ai,$ as Ze,a5 as kt,a0 as ut,a1 as ct}from"../chunks/index.59d1c272.js";import{g as ri}from"../chunks/stores.78226074.js";import{S as li,M as si,E as oi}from"../chunks/ErrorMessage.13e1af6e.js";import{T as ui,a as ci}from"../chunks/TablePlaceholder.f956c013.js";import{M as ze}from"../chunks/MultiSelect.6e9522c1.js";import{K as fi,V as di,v as be,w as se,T as pi}from"../chunks/vest.production.0974e7aa.js";import{T as mi}from"../chunks/TextArea.d1c31edd.js";import{u as qt,b as Ut,c as lt,e as Ke,d as _i}from"../chunks/types.1217ad3c.js";import{w as Ot}from"../chunks/index.75aa493d.js";import{M as gi}from"../chunks/MissingValues.c08d686a.js";import{j as hi,p as bi,d as vi}from"../chunks/services.9a728a1c.js";function Ti(){return{}}const dn=Object.freeze(Object.defineProperty({__proto__:null,load:Ti},Symbol.toStringTag,{value:"Module"})),qe=Ot([]),st=Ot([]),$i=async()=>{try{const n=await Oe.get("/rpm/VariableTemplate/GetVariableTemplates");return console.log("ðŸš€ ~ file: services.ts:15 ~ getVariableTemplates ~ response:",n),n.data}catch(n){throw console.error(n),n}},wi=async n=>{try{return(await Oe.post("/rpm/VariableTemplate/Update",n)).data}catch(t){throw console.error(t),t}},ki=async n=>{try{return(await Oe.delete("/rpm/VariableTemplate/Delete",{id:n})).data}catch(t){throw console.error(t),t}},Vi=async()=>{try{return(await Oe.get("/rpm/variableTemplate/getMeanings")).data}catch(n){throw console.error(n),n}},yi=async()=>{try{return(await Oe.get("/rpm/variableTemplate/GetConstraints")).data}catch(n){throw console.error(n),n}},ce=fi((n={},t)=>{di(t),be("name","name is required",()=>{se(n.name).isNotBlank()}),be("name","name allready exist",()=>{const e=n.id>0?wt(qe).find(a=>a.id==n.id):{id:0,name:""},i=wt(qe).map(a=>a.name!=(e==null?void 0:e.name)?a.name:"");se(n.name).notInside(i)}),be("description","description is required",()=>{se(n.description).isNotBlank()}),be("dataType","datatype is required",()=>{se(n.dataType).isNotNull(),se(n.dataType.text).isNotUndefined(),se(n.dataType.text).isNotEmpty()}),be("dataType","data type not match with the unit",()=>!!n.unit.dataTypes.includes(n.dataType.text)),be("unit","unit is required",()=>{se(n.unit).isNotNull(),se(n.unit.text).isNotUndefined(),se(n.unit.text).isNotEmpty()}),be("unit","unit not match with the data type",()=>!!n.unit.dataTypes.includes(n.dataType.text))});function Ei(n){let t="Approved",e;return{c(){e=Ee(t)},l(i){e=De(i,t)},m(i,a){C(i,e,a)},p:Q,d(i){i&&d(e)}}}function Di(n){let t,e,i,a,r,l,u,s,f,E,g,I,D,V,y,_,m,h,F,te,ie,Te,b,A,ne,fe,ae,z,Se,Ie,Ne,de,K,Ce,Fe,Pe,ue,R,c,G,W,L,P,Qe,J,pe,Ae,Be,Le,me,xe,ft;function At(o){n[13](o)}let dt={id:"name",label:"Name",valid:n[4].isValid("name"),invalid:n[4].hasErrors("name"),feedback:n[4].getErrors("name"),required:!0,help:Re};n[0].name!==void 0&&(dt.value=n[0].name),r=new pi({props:dt}),X.push(()=>Y(r,"value",At)),r.$on("input",n[8]);function Bt(o){n[14](o)}let pt={id:"description",label:"Description",valid:n[4].isValid("description"),invalid:n[4].hasErrors("description"),feedback:n[4].getErrors("description"),help:Re,required:!0};n[0].description!==void 0&&(pt.value=n[0].description),f=new mi({props:pt}),X.push(()=>Y(f,"value",Bt)),f.$on("input",n[8]);function Lt(o){n[15](o)}function Gt(o){n[16](o)}let et={id:"unit",title:"Unit",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,clearable:!1,placeholder:"-- Please select --",invalid:n[4].hasErrors("unit"),feedback:n[4].getErrors("unit"),help:Re,loading:n[5],required:!0};n[3]!==void 0&&(et.source=n[3]),n[0].unit!==void 0&&(et.target=n[0].unit),V=new ze({props:et}),X.push(()=>Y(V,"source",Lt)),X.push(()=>Y(V,"target",Gt)),V.$on("change",n[17]);function Ht(o){n[18](o)}function jt(o){n[19](o)}let tt={id:"dataType",title:"Data Type",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!1,placeholder:"-- Please select --",invalid:n[4].hasErrors("dataType"),feedback:n[4].getErrors("dataType"),clearable:!1,help:Re,loading:n[5],required:!0};n[2]!==void 0&&(tt.source=n[2]),n[0].dataType!==void 0&&(tt.target=n[0].dataType),F=new ze({props:tt}),X.push(()=>Y(F,"source",Ht)),X.push(()=>Y(F,"target",jt)),F.$on("change",n[20]);function zt(o){n[21](o)}let mt={};n[0].missingValues!==void 0&&(mt.list=n[0].missingValues),A=new gi({props:mt}),X.push(()=>Y(A,"list",zt));function Kt(o){n[23](o)}function Rt(o){n[24](o)}let it={id:"links",title:"Meanings",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!0,placeholder:"-- Please select --",loading:n[5]};n[6]!==void 0&&(it.source=n[6]),n[0].meanings!==void 0&&(it.target=n[0].meanings),z=new ze({props:it}),X.push(()=>Y(z,"source",Kt)),X.push(()=>Y(z,"target",Rt));function Wt(o){n[25](o)}function Jt(o){n[26](o)}let nt={id:"constraints",title:"Constraints",itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,complexTarget:!0,isMulti:!0,placeholder:"-- Please select --",loading:n[5]};n[7]!==void 0&&(nt.source=n[7]),n[0].constraints!==void 0&&(nt.target=n[0].constraints),K=new ze({props:nt}),X.push(()=>Y(K,"source",Wt)),X.push(()=>Y(K,"target",Jt));function Xt(o){n[27](o)}let _t={name:"Approved",$$slots:{default:[Ei]},$$scope:{ctx:n}};return n[0].approved!==void 0&&(_t.checked=n[0].approved),R=new li({props:_t}),X.push(()=>Y(R,"checked",Xt)),R.$on("change",n[28]),P=new ve({props:{icon:Yt}}),pe=new ve({props:{icon:Zt}}),{c(){t=$("form"),e=$("div"),i=$("div"),a=$("div"),M(r.$$.fragment),u=H(),s=$("div"),M(f.$$.fragment),g=H(),I=$("div"),D=$("div"),M(V.$$.fragment),m=H(),h=$("div"),M(F.$$.fragment),Te=H(),b=$("div"),M(A.$$.fragment),fe=H(),ae=$("div"),M(z.$$.fragment),Ne=H(),de=$("div"),M(K.$$.fragment),Pe=H(),ue=$("div"),M(R.$$.fragment),G=H(),W=$("div"),L=$("button"),M(P.$$.fragment),Qe=H(),J=$("button"),M(pe.$$.fragment),this.h()},l(o){t=w(o,"FORM",{});var v=k(t);e=w(v,"DIV",{id:!0,class:!0});var B=k(e);i=w(B,"DIV",{class:!0});var x=k(i);a=w(x,"DIV",{class:!0});var re=k(a);q(r.$$.fragment,re),re.forEach(d),u=j(x),s=w(x,"DIV",{class:!0});var le=k(s);q(f.$$.fragment,le),le.forEach(d),x.forEach(d),g=j(B),I=w(B,"DIV",{class:!0});var _e=k(I);D=w(_e,"DIV",{class:!0});var ge=k(D);q(V.$$.fragment,ge),ge.forEach(d),m=j(_e),h=w(_e,"DIV",{class:!0});var he=k(h);q(F.$$.fragment,he),he.forEach(d),_e.forEach(d),Te=j(B),b=w(B,"DIV",{id:!0});var $e=k(b);q(A.$$.fragment,$e),$e.forEach(d),fe=j(B),ae=w(B,"DIV",{});var gt=k(ae);q(z.$$.fragment,gt),gt.forEach(d),Ne=j(B),de=w(B,"DIV",{});var ht=k(de);q(K.$$.fragment,ht),ht.forEach(d),Pe=j(B),ue=w(B,"DIV",{class:!0});var bt=k(ue);q(R.$$.fragment,bt),bt.forEach(d),G=j(B),W=w(B,"DIV",{class:!0});var Ge=k(W);L=w(Ge,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var vt=k(L);q(P.$$.fragment,vt),vt.forEach(d),Qe=j(Ge),J=w(Ge,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var Tt=k(J);q(pe.$$.fragment,Tt),Tt.forEach(d),Ge.forEach(d),B.forEach(d),v.forEach(d),this.h()},h(){p(a,"class","grow"),p(s,"class","grow"),p(i,"class","flex gap-5"),p(D,"class","grow w-1/2"),p(h,"class","grow w-1/2"),p(I,"class","flex gap-5"),p(b,"id","missingvaluesContainer"),p(ue,"class","flex gap-5"),p(L,"type","button"),p(L,"class","btn variant-filled-warning h-9 w-16 shadow-md"),p(L,"title","Cancel"),p(L,"id","cancel"),p(J,"type","submit"),p(J,"class","btn variant-filled-primary h-9 w-16 shadow-md"),p(J,"title",Ae="Save Variable Template, "+n[0].name),p(J,"id","save"),J.disabled=Be=!n[1],p(W,"class","py-5 text-right col-span-2"),p(e,"id",Le="variable-"+n[0].id+"-form"),p(e,"class","flex-col space-y-5 card shadow-md p-5 ")},m(o,v){C(o,t,v),T(t,e),T(e,i),T(i,a),U(r,a,null),T(i,u),T(i,s),U(f,s,null),T(e,g),T(e,I),T(I,D),U(V,D,null),T(I,m),T(I,h),U(F,h,null),T(e,Te),T(e,b),U(A,b,null),T(e,fe),T(e,ae),U(z,ae,null),T(e,Ne),T(e,de),U(K,de,null),T(e,Pe),T(e,ue),U(R,ue,null),T(e,G),T(e,W),T(W,L),U(P,L,null),T(W,Qe),T(W,J),U(pe,J,null),me=!0,xe||(ft=[oe(b,"mouseover",n[22]),oe(L,"click",n[29]),oe(t,"submit",ot(n[11]))],xe=!0)},p(o,v){const B={};v[0]&16&&(B.valid=o[4].isValid("name")),v[0]&16&&(B.invalid=o[4].hasErrors("name")),v[0]&16&&(B.feedback=o[4].getErrors("name")),!l&&v[0]&1&&(l=!0,B.value=o[0].name,Z(()=>l=!1)),r.$set(B);const x={};v[0]&16&&(x.valid=o[4].isValid("description")),v[0]&16&&(x.invalid=o[4].hasErrors("description")),v[0]&16&&(x.feedback=o[4].getErrors("description")),!E&&v[0]&1&&(E=!0,x.value=o[0].description,Z(()=>E=!1)),f.$set(x);const re={};v[0]&16&&(re.invalid=o[4].hasErrors("unit")),v[0]&16&&(re.feedback=o[4].getErrors("unit")),v[0]&32&&(re.loading=o[5]),!y&&v[0]&8&&(y=!0,re.source=o[3],Z(()=>y=!1)),!_&&v[0]&1&&(_=!0,re.target=o[0].unit,Z(()=>_=!1)),V.$set(re);const le={};v[0]&16&&(le.invalid=o[4].hasErrors("dataType")),v[0]&16&&(le.feedback=o[4].getErrors("dataType")),v[0]&32&&(le.loading=o[5]),!te&&v[0]&4&&(te=!0,le.source=o[2],Z(()=>te=!1)),!ie&&v[0]&1&&(ie=!0,le.target=o[0].dataType,Z(()=>ie=!1)),F.$set(le);const _e={};!ne&&v[0]&1&&(ne=!0,_e.list=o[0].missingValues,Z(()=>ne=!1)),A.$set(_e);const ge={};v[0]&32&&(ge.loading=o[5]),!Se&&v[0]&64&&(Se=!0,ge.source=o[6],Z(()=>Se=!1)),!Ie&&v[0]&1&&(Ie=!0,ge.target=o[0].meanings,Z(()=>Ie=!1)),z.$set(ge);const he={};v[0]&32&&(he.loading=o[5]),!Ce&&v[0]&128&&(Ce=!0,he.source=o[7],Z(()=>Ce=!1)),!Fe&&v[0]&1&&(Fe=!0,he.target=o[0].constraints,Z(()=>Fe=!1)),K.$set(he);const $e={};v[1]&128&&($e.$$scope={dirty:v,ctx:o}),!c&&v[0]&1&&(c=!0,$e.checked=o[0].approved,Z(()=>c=!1)),R.$set($e),(!me||v[0]&1&&Ae!==(Ae="Save Variable Template, "+o[0].name))&&p(J,"title",Ae),(!me||v[0]&2&&Be!==(Be=!o[1]))&&(J.disabled=Be),(!me||v[0]&1&&Le!==(Le="variable-"+o[0].id+"-form"))&&p(e,"id",Le)},i(o){me||(S(r.$$.fragment,o),S(f.$$.fragment,o),S(V.$$.fragment,o),S(F.$$.fragment,o),S(A.$$.fragment,o),S(z.$$.fragment,o),S(K.$$.fragment,o),S(R.$$.fragment,o),S(P.$$.fragment,o),S(pe.$$.fragment,o),me=!0)},o(o){N(r.$$.fragment,o),N(f.$$.fragment,o),N(V.$$.fragment,o),N(F.$$.fragment,o),N(A.$$.fragment,o),N(z.$$.fragment,o),N(K.$$.fragment,o),N(R.$$.fragment,o),N(P.$$.fragment,o),N(pe.$$.fragment,o),me=!1},d(o){o&&d(t),O(r),O(f),O(V),O(F),O(A),O(z),O(K),O(R),O(P),O(pe),xe=!1,Xe(ft)}}}let Re=!0;function Si(n,t,e){let i,a,r,l;Me(n,qt,c=>e(31,i=c)),Me(n,Ut,c=>e(32,a=c)),Me(n,st,c=>e(6,r=c)),Me(n,lt,c=>e(7,l=c));let{missingValues:u}=t,{variable:s}=t,f,E,{isValid:g=!1}=t,I=!1,D=ce.get();const V=ei();Mt(()=>{console.log("variable",s),ce.reset(),e(2,f=a),e(3,E=i),setTimeout(async()=>{s.id>0&&e(4,D=ce(s,"")),F()},10)});function y(c){setTimeout(async()=>{e(4,D=ce(s,c.target.id))},100)}function _(c,G){e(5,I=!0),setTimeout(async()=>{console.log(s),e(4,D=ce(s,G)),G=="dataType"&&e(4,D=ce(s,"unit")),G=="unit"&&e(4,D=ce(s,"dataType")),F(),e(5,I=!1)},100)}function m(){ce.reset(),V("cancel")}async function h(){var c=await wi(s);V(c?"success":"fail")}function F(){console.log("filter lists"),te(s.unit,a),ie(s.dataType,i)}function te(c,G){let W=""+(c==null?void 0:c.text),L="others";c!=null&&c!=null&&c.dataTypes.length>0&&(G.forEach(P=>{P.group=c.dataTypes.includes(P.text)==!0?W:L}),e(2,f=[...G.filter(P=>P.group!=L),...G.filter(P=>P.group==L)]))}function ie(c,G){let W=""+(c==null?void 0:c.text),L="others";c&&G&&(G.forEach(P=>{P.group=P.dataTypes.includes(c.text)==!0?W:L}),e(3,E=[...G.filter(P=>P.group!=L),...G.filter(P=>P.group==L)]))}function Te(c){n.$$.not_equal(s.name,c)&&(s.name=c,e(0,s))}function b(c){n.$$.not_equal(s.description,c)&&(s.description=c,e(0,s))}function A(c){E=c,e(3,E)}function ne(c){n.$$.not_equal(s.unit,c)&&(s.unit=c,e(0,s))}const fe=c=>_(c,"unit");function ae(c){f=c,e(2,f)}function z(c){n.$$.not_equal(s.dataType,c)&&(s.dataType=c,e(0,s))}const Se=c=>_(c,"dataType");function Ie(c){n.$$.not_equal(s.missingValues,c)&&(s.missingValues=c,e(0,s))}const Ne=()=>{Ue.show("missingvaluesContainer")};function de(c){r=c,st.set(r)}function K(c){n.$$.not_equal(s.meanings,c)&&(s.meanings=c,e(0,s))}function Ce(c){l=c,lt.set(l)}function Fe(c){n.$$.not_equal(s.constraints,c)&&(s.constraints=c,e(0,s))}function Pe(c){n.$$.not_equal(s.approved,c)&&(s.approved=c,e(0,s))}function ue(c){ti.call(this,n,c)}const R=()=>m();return n.$$set=c=>{"missingValues"in c&&e(12,u=c.missingValues),"variable"in c&&e(0,s=c.variable),"isValid"in c&&e(1,g=c.isValid)},n.$$.update=()=>{n.$$.dirty[0]&1,n.$$.dirty[0]&4,n.$$.dirty[0]&8,n.$$.dirty[0]&16&&e(1,g=D.isValid())},[s,g,f,E,D,I,r,l,y,_,m,h,u,Te,b,A,ne,fe,ae,z,Se,Ie,Ne,de,K,Ce,Fe,Pe,ue,R]}class Ii extends ke{constructor(t){super(),Ve(this,t,Si,Di,ye,{missingValues:12,variable:0,isValid:1},null,[-1,-1])}}function Vt(n){let t=n[0].text+"",e;return{c(){e=Ee(t)},l(i){e=De(i,t)},m(i,a){C(i,e,a)},p(i,a){a&1&&t!==(t=i[0].text+"")&&Ye(e,t)},d(i){i&&d(e)}}}function Ni(n){let t,e=n[0]!=null&&n[0].text!=null&&Vt(n);return{c(){e&&e.c(),t=ee()},l(i){e&&e.l(i),t=ee()},m(i,a){e&&e.m(i,a),C(i,t,a)},p(i,[a]){i[0]!=null&&i[0].text!=null?e?e.p(i,a):(e=Vt(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:Q,o:Q,d(i){e&&e.d(i),i&&d(t)}}}function Ci(n,t,e){let{value:i}=t;return n.$$set=a=>{"value"in a&&e(0,i=a.value)},[i]}class at extends ke{constructor(t){super(),Ve(this,t,Ci,Ni,ye,{value:0})}}function yt(n,t,e){const i=n.slice();return i[1]=t[e],i}function Et(n){let t;function e(r,l){if(r[0].length>1)return Pi;if(r[0][0]!=null&&r[0][0]!=null)return Fi}let i=e(n),a=i&&i(n);return{c(){a&&a.c(),t=ee()},l(r){a&&a.l(r),t=ee()},m(r,l){a&&a.m(r,l),C(r,t,l)},p(r,l){i===(i=e(r))&&a?a.p(r,l):(a&&a.d(1),a=i&&i(r),a&&(a.c(),a.m(t.parentNode,t)))},d(r){a&&a.d(r),r&&d(t)}}}function Fi(n){let t=n[0][0]+"",e;return{c(){e=Ee(t)},l(i){e=De(i,t)},m(i,a){C(i,e,a)},p(i,a){a&1&&t!==(t=i[0][0]+"")&&Ye(e,t)},d(i){i&&d(e)}}}function Pi(n){let t,e=n[0],i=[];for(let a=0;a<e.length;a+=1)i[a]=St(yt(n,e,a));return{c(){for(let a=0;a<i.length;a+=1)i[a].c();t=ee()},l(a){for(let r=0;r<i.length;r+=1)i[r].l(a);t=ee()},m(a,r){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(a,r);C(a,t,r)},p(a,r){if(r&1){e=a[0];let l;for(l=0;l<e.length;l+=1){const u=yt(a,e,l);i[l]?i[l].p(u,r):(i[l]=St(u),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=e.length}},d(a){ii(i,a),a&&d(t)}}}function Dt(n){let t,e=n[1]+"",i;return{c(){t=$("li"),i=Ee(e)},l(a){t=w(a,"LI",{});var r=k(t);i=De(r,e),r.forEach(d)},m(a,r){C(a,t,r),T(t,i)},p(a,r){r&1&&e!==(e=a[1]+"")&&Ye(i,e)},d(a){a&&d(t)}}}function St(n){let t,e=n[1]!=null&&Dt(n);return{c(){e&&e.c(),t=ee()},l(i){e&&e.l(i),t=ee()},m(i,a){e&&e.m(i,a),C(i,t,a)},p(i,a){i[1]!=null?e?e.p(i,a):(e=Dt(i),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(i){e&&e.d(i),i&&d(t)}}}function Mi(n){let t,e=n[0]!=null&&n[0]!=null&&Et(n);return{c(){t=$("div"),e&&e.c()},l(i){t=w(i,"DIV",{});var a=k(t);e&&e.l(a),a.forEach(d)},m(i,a){C(i,t,a),e&&e.m(t,null)},p(i,[a]){i[0]!=null&&i[0]!=null?e?e.p(i,a):(e=Et(i),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:Q,o:Q,d(i){i&&d(t),e&&e.d()}}}function qi(n,t,e){let{value:i}=t;return n.$$set=a=>{"value"in a&&e(0,i=a.value)},[i]}class rt extends ke{constructor(t){super(),Ve(this,t,qi,Mi,ye,{value:0})}}function Ui(n){let t,e;return{c(){t=$("input"),this.h()},l(i){t=w(i,"INPUT",{type:!0,name:!0,id:!0}),this.h()},h(){p(t,"type","checkbox"),p(t,"name","isApproved"),p(t,"id",e=n[1].id),t.checked=n[0],t.disabled=!0},m(i,a){C(i,t,a)},p(i,[a]){a&2&&e!==(e=i[1].id)&&p(t,"id",e),a&1&&(t.checked=i[0])},i:Q,o:Q,d(i){i&&d(t)}}}function Oi(n,t,e){let{value:i}=t,{row:a}=t;return n.$$set=r=>{"value"in r&&e(0,i=r.value),"row"in r&&e(1,a=r.row)},[i,a]}class It extends ke{constructor(t){super(),Ve(this,t,Oi,Ui,ye,{value:0,row:1})}}function Ai(n){let t,e,i,a,r;return e=new ve({props:{icon:Ft}}),{c(){t=$("button"),M(e.$$.fragment),this.h()},l(l){t=w(l,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var u=k(t);q(e.$$.fragment,u),u.forEach(d),this.h()},h(){p(t,"type","button"),p(t,"class","chip variant-filled-error shadow-md"),p(t,"title",i="Delete Variable Template, "+n[0].name),p(t,"id",a="delete-"+n[0].id),t.disabled=!0},m(l,u){C(l,t,u),U(e,t,null),r=!0},p(l,u){(!r||u&1&&i!==(i="Delete Variable Template, "+l[0].name))&&p(t,"title",i),(!r||u&1&&a!==(a="delete-"+l[0].id))&&p(t,"id",a)},i(l){r||(S(e.$$.fragment,l),r=!0)},o(l){N(e.$$.fragment,l),r=!1},d(l){l&&d(t),O(e)}}}function Bi(n){let t,e,i,a,r,l,u;return e=new ve({props:{icon:Ft}}),{c(){t=$("button"),M(e.$$.fragment),this.h()},l(s){t=w(s,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var f=k(t);q(e.$$.fragment,f),f.forEach(d),this.h()},h(){p(t,"type","button"),p(t,"class","chip variant-filled-error shadow-md"),p(t,"title",i="Delete Variable Template, "+n[0].name),p(t,"id",a="delete-"+n[0].id)},m(s,f){C(s,t,f),U(e,t,null),r=!0,l||(u=[oe(t,"mouseover",n[4]),oe(t,"click",ot(n[5]))],l=!0)},p(s,f){(!r||f&1&&i!==(i="Delete Variable Template, "+s[0].name))&&p(t,"title",i),(!r||f&1&&a!==(a="delete-"+s[0].id))&&p(t,"id",a)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){N(e.$$.fragment,s),r=!1},d(s){s&&d(t),O(e),l=!1,Xe(u)}}}function Li(n){let t,e,i,a,r,l,u,s,f,E,g,I;a=new ve({props:{icon:Qt}});const D=[Bi,Ai],V=[];function y(_,m){return _[0].inUse===!1?0:1}return s=y(n),f=V[s]=D[s](n),{c(){t=$("tableOption"),e=$("div"),i=$("button"),M(a.$$.fragment),u=H(),f.c(),this.h()},l(_){t=w(_,"TABLEOPTION",{});var m=k(t);e=w(m,"DIV",{class:!0});var h=k(e);i=w(h,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var F=k(i);q(a.$$.fragment,F),F.forEach(d),u=j(h),f.l(h),h.forEach(d),m.forEach(d),this.h()},h(){p(i,"type","button"),p(i,"class","chip variant-filled-primary shadow-md"),p(i,"title",r="Edit Variable Template, "+n[0].name),p(i,"id",l="edit-"+n[0].id),p(e,"class","w-18")},m(_,m){C(_,t,m),T(t,e),T(e,i),U(a,i,null),T(e,u),V[s].m(e,null),E=!0,g||(I=[oe(i,"mouseover",n[2]),oe(i,"click",ot(n[3]))],g=!0)},p(_,[m]){(!E||m&1&&r!==(r="Edit Variable Template, "+_[0].name))&&p(i,"title",r),(!E||m&1&&l!==(l="edit-"+_[0].id))&&p(i,"id",l);let h=s;s=y(_),s===h?V[s].p(_,m):(We(),N(V[h],1,1,()=>{V[h]=null}),Je(),f=V[s],f?f.p(_,m):(f=V[s]=D[s](_),f.c()),S(f,1),f.m(e,null))},i(_){E||(S(a.$$.fragment,_),S(f),E=!0)},o(_){N(a.$$.fragment,_),N(f),E=!1},d(_){_&&d(t),O(a),V[s].d(),g=!1,Xe(I)}}}function Gi(n,t,e){let{row:i}=t,{dispatchFn:a}=t;const r=()=>{Ue.show("edit")},l=()=>a({type:{action:"edit",id:i.id}}),u=()=>{Ue.show("delete")},s=()=>a({type:{action:"delete",id:i.id}});return n.$$set=f=>{"row"in f&&e(0,i=f.row),"dispatchFn"in f&&e(1,a=f.dispatchFn)},[i,a,r,l,u,s]}class Hi extends ke{constructor(t){super(),Ve(this,t,Gi,Li,ye,{row:0,dispatchFn:1})}}const ji=[{id:"create",name:"Create neáº‡ Variable Template",description:"Click here to ceate a new Variable Template"},{id:"delete",name:"Delete Variable Template",description:"Click here to detete the Variable Template"},{id:"edit",name:"Edit Variable Template",description:"Click here to edit the Variable Template"},{id:"save",name:"Save Variable Template",description:"Click here to save the Variable Template"},{id:"cancel",name:"Cancel",description:"Click here to cancel"},{id:"name",name:"Name",description:"Name of the Variable Template. <li>Has to be unique.</li>"},{id:"description",name:"Description",description:"Description of th Variable Template. <li>a short overview how the Variable Template shold be used.</li>"},{id:"dataType",name:"Data Type",description:"Type od the values <li>eg. number, text, boolean etc.</li>"},{id:"unit",name:"Unit",description:"Type od the values <li>eg. kg, cm, % etc.</li>"},{id:"missingvaluesContainer",name:"MissingValues",description:"Please insert placeholders here to describe that the value cannot be measured.</br> eg: <b>NA - Not available<b>"}];function zi(n){let t,e;return t=new oi({props:{error:n[20]}}),{c(){M(t.$$.fragment)},l(i){q(t.$$.fragment,i)},m(i,a){U(t,i,a),e=!0},p:Q,i(i){e||(S(t.$$.fragment,i),e=!0)},o(i){N(t.$$.fragment,i),e=!1},d(i){O(t,i)}}}function Ki(n){let t,e,i,a,r,l,u,s,f,E,g;const I=[Wi,Ri],D=[];function V(m,h){return m[0].id<1?0:1}i=V(n),a=D[i]=I[i](n);let y=!n[1]&&Nt(n),_=n[1]&&Ct(n);return E=new ui({props:{config:n[3]}}),E.$on("action",n[14]),{c(){t=$("div"),e=$("div"),a.c(),r=H(),l=$("div"),y&&y.c(),u=H(),_&&_.c(),s=H(),f=$("div"),M(E.$$.fragment),this.h()},l(m){t=w(m,"DIV",{class:!0});var h=k(t);e=w(h,"DIV",{class:!0});var F=k(e);a.l(F),F.forEach(d),r=j(h),l=w(h,"DIV",{class:!0});var te=k(l);y&&y.l(te),te.forEach(d),h.forEach(d),u=j(m),_&&_.l(m),s=j(m),f=w(m,"DIV",{class:!0});var ie=k(f);q(E.$$.fragment,ie),ie.forEach(d),this.h()},h(){p(e,"class","h3 h-9"),p(l,"class","text-right"),p(t,"class","grid grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(f,"class","table table-compact w-full")},m(m,h){C(m,t,h),T(t,e),D[i].m(e,null),T(t,r),T(t,l),y&&y.m(l,null),C(m,u,h),_&&_.m(m,h),C(m,s,h),C(m,f,h),U(E,f,null),g=!0},p(m,h){let F=i;i=V(m),i===F?D[i].p(m,h):(We(),N(D[F],1,1,()=>{D[F]=null}),Je(),a=D[i],a?a.p(m,h):(a=D[i]=I[i](m),a.c()),S(a,1),a.m(e,null)),m[1]?y&&(We(),N(y,1,1,()=>{y=null}),Je()):y?(y.p(m,h),h&2&&S(y,1)):(y=Nt(m),y.c(),S(y,1),y.m(l,null)),m[1]?_?(_.p(m,h),h&2&&S(_,1)):(_=Ct(m),_.c(),S(_,1),_.m(s.parentNode,s)):_&&(We(),N(_,1,1,()=>{_=null}),Je())},i(m){g||(S(a),S(y),S(_),S(E.$$.fragment,m),g=!0)},o(m){N(a),N(y),N(_),N(E.$$.fragment,m),g=!1},d(m){m&&d(t),D[i].d(),y&&y.d(),m&&d(u),_&&_.d(m),m&&d(s),m&&d(f),O(E)}}}function Ri(n){let t,e=n[0].name+"",i,a,r,l;return{c(){t=$("span"),i=Ee(e)},l(u){t=w(u,"SPAN",{});var s=k(t);i=De(s,e),s.forEach(d)},m(u,s){C(u,t,s),T(t,i),l=!0},p(u,s){(!l||s&1)&&e!==(e=u[0].name+"")&&Ye(i,e)},i(u){l||(Ze(()=>{l&&(r&&r.end(1),a=ut(t,we,{delay:400}),a.start())}),l=!0)},o(u){a&&a.invalidate(),r=ct(t,we,{}),l=!1},d(u){u&&d(t),u&&r&&r.end()}}}function Wi(n){let t,e,i,a,r;return{c(){t=$("span"),e=Ee("Create neáº‡ Variable Template")},l(l){t=w(l,"SPAN",{});var u=k(t);e=De(u,"Create neáº‡ Variable Template"),u.forEach(d)},m(l,u){C(l,t,u),T(t,e),r=!0},p:Q,i(l){r||(Ze(()=>{r&&(a&&a.end(1),i=ut(t,we,{delay:400}),i.start())}),r=!0)},o(l){i&&i.invalidate(),a=ct(t,we,{}),r=!1},d(l){l&&d(t),l&&a&&a.end()}}}function Nt(n){let t,e,i,a,r,l;return e=new ve({props:{icon:Pt}}),{c(){t=$("button"),M(e.$$.fragment),this.h()},l(u){t=w(u,"BUTTON",{class:!0,title:!0,id:!0});var s=k(t);q(e.$$.fragment,s),s.forEach(d),this.h()},h(){p(t,"class","btn variant-filled-secondary shadow-md h-9 w-16"),p(t,"title","Create neáº‡ Variable Template"),p(t,"id","create")},m(u,s){C(u,t,s),U(e,t,null),a=!0,r||(l=[oe(t,"mouseover",n[10]),oe(t,"click",n[11])],r=!0)},p:Q,i(u){a||(S(e.$$.fragment,u),Ze(()=>{a&&(i||(i=kt(t,we,{},!0)),i.run(1))}),a=!0)},o(u){N(e.$$.fragment,u),i||(i=kt(t,we,{},!1)),i.run(0),a=!1},d(u){u&&d(t),O(e),u&&i&&i.end(),r=!1,Xe(l)}}}function Ct(n){let t,e,i,a,r;return e=new Ii({props:{variable:n[0],missingValues:n[2]}}),e.$on("cancel",n[12]),e.$on("success",n[13]),e.$on("fail",n[8]),{c(){t=$("div"),M(e.$$.fragment)},l(l){t=w(l,"DIV",{});var u=k(t);q(e.$$.fragment,u),u.forEach(d)},m(l,u){C(l,t,u),U(e,t,null),r=!0},p(l,u){const s={};u&1&&(s.variable=l[0]),e.$set(s)},i(l){r||(S(e.$$.fragment,l),Ze(()=>{r&&(a&&a.end(1),i=ut(t,$t,{}),i.start())}),r=!0)},o(l){N(e.$$.fragment,l),i&&i.invalidate(),a=ct(t,$t,{}),r=!1},d(l){l&&d(t),O(e),l&&a&&a.end()}}}function Ji(n){let t,e,i,a,r,l,u,s,f,E;return l=new ve({props:{icon:Pt}}),f=new ci({props:{cols:5}}),{c(){t=$("div"),e=$("div"),i=H(),a=$("div"),r=$("button"),M(l.$$.fragment),u=H(),s=$("div"),M(f.$$.fragment),this.h()},l(g){t=w(g,"DIV",{class:!0});var I=k(t);e=w(I,"DIV",{class:!0}),k(e).forEach(d),i=j(I),a=w(I,"DIV",{class:!0});var D=k(a);r=w(D,"BUTTON",{class:!0});var V=k(r);q(l.$$.fragment,V),V.forEach(d),D.forEach(d),I.forEach(d),u=j(g),s=w(g,"DIV",{class:!0});var y=k(s);q(f.$$.fragment,y),y.forEach(d),this.h()},h(){p(e,"class","h-9 w-96 placeholder animate-pulse"),p(r,"class","btn placeholder animate-pulse shadow-md h-9 w-16"),p(a,"class","flex justify-end"),p(t,"class","grid w-full grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),p(s,"class","table-container w-full")},m(g,I){C(g,t,I),T(t,e),T(t,i),T(t,a),T(a,r),U(l,r,null),C(g,u,I),C(g,s,I),U(f,s,null),E=!0},p:Q,i(g){E||(S(l.$$.fragment,g),S(f.$$.fragment,g),E=!0)},o(g){N(l.$$.fragment,g),N(f.$$.fragment,g),E=!1},d(g){g&&d(t),O(l),g&&d(u),g&&d(s),O(f)}}}function Xi(n){let t,e,i={ctx:n,current:null,token:null,hasCatch:!0,pending:Ji,then:Ki,catch:zi,error:20,blocks:[,,,]};return ni(n[4](),i),{c(){t=ee(),i.block.c()},l(a){t=ee(),i.block.l(a)},m(a,r){C(a,t,r),i.block.m(a,i.anchor=r),i.mount=()=>t.parentNode,i.anchor=t,e=!0},p(a,r){n=a,ai(i,n,r)},i(a){e||(S(i.block),e=!0)},o(a){for(let r=0;r<3;r+=1){const l=i.blocks[r];N(l)}e=!1},d(a){a&&d(t),i.block.d(a),i.token=null,i=null}}}function Yi(n){let t,e,i,a;return t=new xt({props:{help:!0,title:"Manage Variable Template",$$slots:{default:[Xi]},$$scope:{ctx:n}}}),i=new si({}),{c(){M(t.$$.fragment),e=H(),M(i.$$.fragment)},l(r){q(t.$$.fragment,r),e=j(r),q(i.$$.fragment,r)},m(r,l){U(t,r,l),C(r,e,l),U(i,r,l),a=!0},p(r,[l]){const u={};l&2097155&&(u.$$scope={dirty:l,ctx:r}),t.$set(u)},i(r){a||(S(t.$$.fragment,r),S(i.$$.fragment,r),a=!0)},o(r){N(t.$$.fragment,r),N(i.$$.fragment,r),a=!1},d(r){O(t,r),r&&d(e),O(i,r)}}}function Zi(n,t,e){let i;Me(n,qe,b=>e(16,i=b));const a=ri();let r=[new Ke],l=new Ke,u=ji,s=[],f=!1;const E={id:"VariableTemplates",data:qe,optionsComponent:Hi,columns:{id:{disableFiltering:!0,exclude:!0},approved:{header:"Approved",instructions:{renderComponent:It},disableFiltering:!0,exclude:!1},inUse:{header:"Approved",instructions:{renderComponent:It},disableFiltering:!0,exclude:!0},dataType:{header:"Data Type",disableFiltering:!0,instructions:{renderComponent:at,toFilterableValueFn:b=>b.text,toStringFn:b=>b.text}},systemType:{exclude:!0},unit:{header:"Unit",instructions:{renderComponent:at,toStringFn:b=>b.text,toFilterableValueFn:b=>b.text}},displayPattern:{header:"Display Pattern",instructions:{renderComponent:at,toStringFn:b=>b.text,toFilterableValueFn:b=>b.text}},missingValues:{instructions:{renderComponent:rt},disableFiltering:!0,exclude:!0},meanings:{instructions:{renderComponent:rt},disableFiltering:!0,exclude:!0},constraints:{instructions:{renderComponent:rt},disableFiltering:!0,exclude:!0}}};Mt(async()=>{Ue.setHelpItemList(u);const b=await hi();Ut.set(b);const A=await bi();qt.set(A);const ne=await Vi();st.set(ne);const fe=await yi();lt.set(fe);const ae=await vi();_i.set(ae),e(1,f=!1)});async function g(){e(1,f=!1),e(0,l=new Ke),r=await $i(),console.log("variable templates",r),qe.set(r),console.log("store",i)}function I(b){const A=b>0?"Variable Template updated.":"Variable Template created.";He.showNotification({notificationType:je.success,message:A}),g(),e(1,f=!1)}function D(){f&&V(),e(1,f=!f)}function V(){e(0,l=new Ke),e(1,f=!1)}function y(){He.showNotification({notificationType:je.error,message:"Can't save Variable Template."})}async function _(b){await ki(b)!=!0?He.showNotification({notificationType:je.error,message:"Can't delete Variable Template."}):(He.showNotification({notificationType:je.success,message:"Variable Template deleted."}),g())}function m(b){if(b.action=="edit"&&(e(0,l=i.find(A=>A.id===b.id)),e(1,f=!0),window.scrollTo({top:60,behavior:"smooth"})),b.action=="delete"){const A={type:"confirm",title:"Delete Variable Template",body:'Are you sure you wish to delete variable template "'+l.name+'"?',response:ne=>{ne===!0&&_(b.id)}};a.trigger(A)}}return[l,f,s,E,g,I,D,V,y,m,()=>{Ue.show("create")},()=>D(),()=>V(),()=>I(l.id),b=>m(b.detail.type)]}class pn extends ke{constructor(t){super(),Ve(this,t,Zi,Yi,ye,{})}}export{pn as component,dn as universal};
