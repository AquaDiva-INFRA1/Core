import{s as $e,j as me,i as N,d as m,R as Me,S as ke,F as x,e as D,l as B,c as E,h as T,o as F,a as b,p as I,x as j,L as Ue,P as ee,B as we,g as Be,n as Y,H as De,t as Ee,m as Ie,q as Fe}from"../chunks/scheduler.BD3IPErK.js";import{M as Pe,h as Re,u as Oe,E as He}from"../chunks/ErrorMessage.C_-DmavX.js";import{S as Te,i as ye,t as k,g as ne,b as y,e as se,f as ie,c as S,a as q,m as M,d as U,j as Ce,k as Ve}from"../chunks/index.CufQnT-K.js";import{F as X,k as Ae,c as Je,P as je,h as Ne,d as pe,s as he}from"../chunks/Page.DNGIaKrR.js";import{w as Ge}from"../chunks/index.Bq99oXf3.js";import{g as ze}from"../chunks/stores.CsfdB5nm.js";import{A as ae,n as K,b as Q,a as W}from"../chunks/eslint4b.es.C89pjaTy.js";import{T as Xe,a as Ke}from"../chunks/TablePlaceholder.Cg2Oo5AA.js";import{y as Qe,p as We,P as A,v as te,T as _e}from"../chunks/vest.production.DBLC5iAh.js";import{T as Ye}from"../chunks/TextArea.a3zJiS0i.js";import{T as Ze}from"../chunks/tableOptions.Dpr8r06l.js";const xe=async()=>{try{return(await ae.get("/rpm/dimension/GetDimensions")).data}catch(t){throw console.error(t),t}},ei=async t=>{try{return(await ae.post("/rpm/dimension/EditDimension",t)).data}catch(e){throw console.error(e),e}},ii=async t=>{try{return(await ae.post("/rpm/dimension/DeleteDimension",{id:t})).data}catch(e){throw console.error(e),e}},J=Qe((t,e)=>{We(e),A("name","name is required",()=>{te(t.dimension.name).isNotBlank()}),A("name","name is not unique",()=>t.dimensions.find(i=>i.name.toLowerCase().trim()===t.dimension.name.toLowerCase().trim())==null||t.dimensions.filter(i=>i.name.toLowerCase().trim()===t.dimension.name.toLowerCase().trim()&&i.id!=t.dimension.id).length==0),A("description","description is required",()=>{te(t.dimension.description).isNotBlank()}),A("specification","specification is required",()=>{te(t.dimension.specification).isNotBlank()}),A("specification","specification has to be like this pattern L([0-9],[0-9])M([0-9],[0-9])T([0-9],[0-9])I([0-9],[0-9])Θ([0-9],[0-9])N([0-9],[0-9])J([0-9],[0-9])",()=>{var n;let i={regex:new RegExp("^(L\\([0-9],[0-9]\\)M\\([0-9],[0-9]\\)T\\([0-9],[0-9]\\)I\\([0-9],[0-9]\\)Θ\\([0-9],[0-9]\\)N\\([0-9],[0-9]\\)J\\([0-9],[0-9]\\))?$"),check:!1};return i.output=(n=t.dimension.specification.match(i.regex))==null?void 0:n[0],i.output!=null&&i.output!=null&&i.output!=""&&(t.dimension.specification=i.output,i.check=!0),i.check}),A("specification","add specification",()=>t.dimension.specification!="L(0,0)M(0,0)T(0,0)I(0,0)Θ(0,0)N(0,0)J(0,0)")});function ve(t){let e,i,n,a,r,s,l,o,p,V,_,d,g,v,c,h,f,w,$,P,G,H,Z,oe;function Le(u){t[7](u)}let re={id:"name",label:"Name",help:!0,required:!0,valid:t[1].isValid("name"),invalid:t[1].hasErrors("name"),feedback:t[1].getErrors("name")};t[0].name!==void 0&&(re.value=t[0].name),a=new _e({props:re}),x.push(()=>ie(a,"value",Le)),a.$on("input",t[3]);function Se(u){t[8](u)}let le={id:"specification",label:"Specification",help:!0,required:!0,valid:t[1].isValid("specification"),invalid:t[1].hasErrors("specification"),feedback:t[1].getErrors("specification")};t[0].specification!==void 0&&(le.value=t[0].specification),o=new _e({props:le}),x.push(()=>ie(o,"value",Se)),o.$on("input",t[3]);function qe(u){t[9](u)}let ce={id:"description",label:"Description",help:!0,required:!0,valid:t[1].isValid("description"),invalid:t[1].hasErrors("description"),feedback:t[1].getErrors("description")};return t[0].description!==void 0&&(ce.value=t[0].description),d=new Ye({props:ce}),x.push(()=>ie(d,"value",qe)),d.$on("input",t[3]),f=new X({props:{icon:Ae}}),P=new X({props:{icon:Je}}),{c(){e=D("form"),i=D("div"),n=D("div"),S(a.$$.fragment),s=B(),l=D("div"),S(o.$$.fragment),V=B(),_=D("div"),S(d.$$.fragment),v=B(),c=D("div"),h=D("button"),S(f.$$.fragment),w=B(),$=D("button"),S(P.$$.fragment),this.h()},l(u){e=E(u,"FORM",{});var C=T(e);i=E(C,"DIV",{class:!0});var L=T(i);n=E(L,"DIV",{class:!0});var R=T(n);q(a.$$.fragment,R),R.forEach(m),s=F(L),l=E(L,"DIV",{class:!0});var O=T(l);q(o.$$.fragment,O),O.forEach(m),V=F(L),_=E(L,"DIV",{class:!0});var fe=T(_);q(d.$$.fragment,fe),fe.forEach(m),v=F(L),c=E(L,"DIV",{class:!0});var z=T(c);h=E(z,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var ue=T(h);q(f.$$.fragment,ue),ue.forEach(m),w=F(z),$=E(z,"BUTTON",{type:!0,class:!0,title:!0,id:!0});var de=T($);q(P.$$.fragment,de),de.forEach(m),z.forEach(m),L.forEach(m),C.forEach(m),this.h()},h(){b(n,"class","pb-3"),b(l,"class","pb-3"),b(_,"class","pb-3 col-span-2"),b(h,"type","button"),b(h,"class","btn variant-filled-warning h-9 w-16 shadow-md"),b(h,"title","Cancel"),b(h,"id","cancel"),b($,"type","submit"),b($,"class","btn variant-filled-primary h-9 w-16 shadow-md"),b($,"title",G="Save Unit, "+t[0].name),b($,"id","save"),$.disabled=t[2],b(c,"class","py-5 text-right col-span-2"),b(i,"class","grid grid-cols-2 gap-5")},m(u,C){N(u,e,C),I(e,i),I(i,n),M(a,n,null),I(i,s),I(i,l),M(o,l,null),I(i,V),I(i,_),M(d,_,null),I(i,v),I(i,c),I(c,h),M(f,h,null),I(c,w),I(c,$),M(P,$,null),H=!0,Z||(oe=[j(h,"mouseover",t[10]),j(h,"click",t[11]),j($,"mouseover",t[12]),j(e,"submit",Ue(t[4]))],Z=!0)},p(u,C){const L={};C&2&&(L.valid=u[1].isValid("name")),C&2&&(L.invalid=u[1].hasErrors("name")),C&2&&(L.feedback=u[1].getErrors("name")),!r&&C&1&&(r=!0,L.value=u[0].name,ee(()=>r=!1)),a.$set(L);const R={};C&2&&(R.valid=u[1].isValid("specification")),C&2&&(R.invalid=u[1].hasErrors("specification")),C&2&&(R.feedback=u[1].getErrors("specification")),!p&&C&1&&(p=!0,R.value=u[0].specification,ee(()=>p=!1)),o.$set(R);const O={};C&2&&(O.valid=u[1].isValid("description")),C&2&&(O.invalid=u[1].hasErrors("description")),C&2&&(O.feedback=u[1].getErrors("description")),!g&&C&1&&(g=!0,O.value=u[0].description,ee(()=>g=!1)),d.$set(O),(!H||C&1&&G!==(G="Save Unit, "+u[0].name))&&b($,"title",G),(!H||C&4)&&($.disabled=u[2])},i(u){H||(k(a.$$.fragment,u),k(o.$$.fragment,u),k(d.$$.fragment,u),k(f.$$.fragment,u),k(P.$$.fragment,u),H=!0)},o(u){y(a.$$.fragment,u),y(o.$$.fragment,u),y(d.$$.fragment,u),y(f.$$.fragment,u),y(P.$$.fragment,u),H=!1},d(u){u&&m(e),U(a),U(o),U(d),U(f),U(P),Z=!1,we(oe)}}}function ti(t){let e,i,n=t[0]&&ve(t);return{c(){n&&n.c(),e=me()},l(a){n&&n.l(a),e=me()},m(a,r){n&&n.m(a,r),N(a,e,r),i=!0},p(a,[r]){a[0]?n?(n.p(a,r),r&1&&k(n,1)):(n=ve(a),n.c(),k(n,1),n.m(e.parentNode,e)):n&&(ne(),y(n,1,1,()=>{n=null}),se())},i(a){i||(k(n),i=!0)},o(a){y(n),i=!1},d(a){a&&m(e),n&&n.d(a)}}}function ni(t,e,i){let n;const a=Me();let r=J.get(),{dimension:s}=e,{dimensions:l}=e;ke(async()=>{s.id==0?(J.reset(),i(0,s.specification="L(0,0)M(0,0)T(0,0)I(0,0)Θ(0,0)N(0,0)J(0,0)",s)):setTimeout(async()=>{i(1,r=J({dimension:s,dimensions:l},""))},10)});function o(f){setTimeout(async()=>{i(1,r=J({dimension:s,dimensions:l},f.target.id))},10)}async function p(){let f=await ei(s);console.log("DimensionValidationResult",f),console.log("result.dimensionListItem.name",f.dimensionListItem.name);let w;f.validationResult.isValid!=!0?(w="Can't save Dimension",f.dimensionListItem.name!=""&&(w+=' "'+f.dimensionListItem.name+'" .'),f.validationResult.validationItems!=null&&f.validationResult.validationItems.length>0&&f.validationResult.validationItems.forEach($=>{console.log("validationItem",$),w+="<li>"+$.message+"</li>"}),K.showNotification({notificationType:Q.error,message:w})):(w='Unit "'+f.dimensionListItem.name+'" saved.',K.showNotification({notificationType:Q.success,message:w}),J.reset(),a("save"))}function V(){J.reset(),a("cancel")}function _(f){t.$$.not_equal(s.name,f)&&(s.name=f,i(0,s))}function d(f){t.$$.not_equal(s.specification,f)&&(s.specification=f,i(0,s))}function g(f){t.$$.not_equal(s.description,f)&&(s.description=f,i(0,s))}const v=()=>{W.show("cancel")},c=()=>V(),h=()=>{W.show("save")};return t.$$set=f=>{"dimension"in f&&i(0,s=f.dimension),"dimensions"in f&&i(6,l=f.dimensions)},t.$$.update=()=>{t.$$.dirty&2&&i(2,n=!r.isValid())},[s,r,n,o,p,V,l,_,d,g,v,c,h]}class si extends Te{constructor(e){super(),ye(this,e,ni,ti,$e,{dimension:0,dimensions:6})}}const ai=[{id:"create",name:"Create neẇ Dimension",description:"Click here to create a new dimension"},{id:"delete",name:"Delete Dimension",description:"Click here to delete the dimension"},{id:"edit",name:"Edit Dimension",description:"Click here to edit the dimension"},{id:"save",name:"Save Dimension",description:"Click here to save the dimension"},{id:"cancel",name:"Cancel",description:"Click here to cancel"},{id:"name",name:"Name",description:"Name of the dimension. <li>Has to be unique.</li>"},{id:"description",name:"Description",description:"Description of the dimension. <li>a shot overview how the unit should be used.</li>"},{id:"specification",name:"Specification ",description:"Specification of the dimension. <li>tbd</li>"}],oi={helpItems:ai};function ri(t){let e,i;return e=new He({props:{error:t[15]}}),{c(){S(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,a){M(e,n,a),i=!0},p:Y,i(n){i||(k(e.$$.fragment,n),i=!0)},o(n){y(e.$$.fragment,n),i=!1},d(n){U(e,n)}}}function li(t){let e,i,n,a,r,s,l,o,p;function V(c,h){return c[0].id<1?fi:ci}let _=V(t),d=_(t),g=!t[1]&&ge(t),v=t[1]&&be(t);return o=new Xe({props:{config:{id:"dimensions",data:t[3],optionsComponent:Ze,columns:{id:{exclude:!0},inUse:{disableFiltering:!0,exclude:!0}}}}}),o.$on("action",t[10]),{c(){e=D("div"),i=D("div"),d.c(),n=B(),a=D("div"),g&&g.c(),r=B(),v&&v.c(),s=B(),l=D("div"),S(o.$$.fragment),this.h()},l(c){e=E(c,"DIV",{class:!0});var h=T(e);i=E(h,"DIV",{class:!0});var f=T(i);d.l(f),f.forEach(m),n=F(h),a=E(h,"DIV",{class:!0});var w=T(a);g&&g.l(w),w.forEach(m),h.forEach(m),r=F(c),v&&v.l(c),s=F(c),l=E(c,"DIV",{class:!0});var $=T(l);q(o.$$.fragment,$),$.forEach(m),this.h()},h(){b(i,"class","h3 h-9"),b(a,"class","text-right"),b(e,"class","grid grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500"),b(l,"class","table table-compact w-full")},m(c,h){N(c,e,h),I(e,i),d.m(i,null),I(e,n),I(e,a),g&&g.m(a,null),N(c,r,h),v&&v.m(c,h),N(c,s,h),N(c,l,h),M(o,l,null),p=!0},p(c,h){_===(_=V(c))&&d?d.p(c,h):(d.d(1),d=_(c),d&&(d.c(),d.m(i,null))),c[1]?g&&(ne(),y(g,1,1,()=>{g=null}),se()):g?(g.p(c,h),h&2&&k(g,1)):(g=ge(c),g.c(),k(g,1),g.m(a,null)),c[1]?v?(v.p(c,h),h&2&&k(v,1)):(v=be(c),v.c(),k(v,1),v.m(s.parentNode,s)):v&&(ne(),y(v,1,1,()=>{v=null}),se())},i(c){p||(k(g),k(v),k(o.$$.fragment,c),p=!0)},o(c){y(g),y(v),y(o.$$.fragment,c),p=!1},d(c){c&&(m(e),m(r),m(s),m(l)),d.d(),g&&g.d(),v&&v.d(c),U(o)}}}function ci(t){let e=t[0].name+"",i;return{c(){i=Ee(e)},l(n){i=Ie(n,e)},m(n,a){N(n,i,a)},p(n,a){a&1&&e!==(e=n[0].name+"")&&Fe(i,e)},d(n){n&&m(i)}}}function fi(t){let e;return{c(){e=Ee("Create neẇ Dimension")},l(i){e=Ie(i,"Create neẇ Dimension")},m(i,n){N(i,e,n)},p:Y,d(i){i&&m(e)}}}function ge(t){let e,i,n,a,r,s,l;return i=new X({props:{icon:Ne}}),{c(){e=D("button"),S(i.$$.fragment),this.h()},l(o){e=E(o,"BUTTON",{class:!0,title:!0,id:!0});var p=T(e);q(i.$$.fragment,p),p.forEach(m),this.h()},h(){b(e,"class","btn variant-filled-secondary shadow-md h-9 w-16"),b(e,"title","Create neẇ Dimension"),b(e,"id","create")},m(o,p){N(o,e,p),M(i,e,null),r=!0,s||(l=[j(e,"mouseover",t[8]),j(e,"click",t[9])],s=!0)},p:Y,i(o){r||(k(i.$$.fragment,o),o&&De(()=>{r&&(a&&a.end(1),n=Ce(e,pe,{}),n.start())}),r=!0)},o(o){y(i.$$.fragment,o),n&&n.invalidate(),o&&(a=Ve(e,pe,{})),r=!1},d(o){o&&m(e),U(i),o&&a&&a.end(),s=!1,we(l)}}}function be(t){let e,i,n,a,r;return i=new si({props:{dimension:t[0],dimensions:t[2]}}),i.$on("cancel",t[6]),i.$on("save",t[4]),{c(){e=D("div"),S(i.$$.fragment)},l(s){e=E(s,"DIV",{});var l=T(e);q(i.$$.fragment,l),l.forEach(m)},m(s,l){N(s,e,l),M(i,e,null),r=!0},p(s,l){const o={};l&1&&(o.dimension=s[0]),l&4&&(o.dimensions=s[2]),i.$set(o)},i(s){r||(k(i.$$.fragment,s),s&&De(()=>{r&&(a&&a.end(1),n=Ce(e,he,{}),n.start())}),r=!0)},o(s){y(i.$$.fragment,s),n&&n.invalidate(),s&&(a=Ve(e,he,{})),r=!1},d(s){s&&m(e),U(i),s&&a&&a.end()}}}function ui(t){let e,i,n,a,r,s,l,o,p,V;return s=new X({props:{icon:Ne}}),p=new Ke({props:{cols:4}}),{c(){e=D("div"),i=D("div"),n=B(),a=D("div"),r=D("button"),S(s.$$.fragment),l=B(),o=D("div"),S(p.$$.fragment),this.h()},l(_){e=E(_,"DIV",{class:!0});var d=T(e);i=E(d,"DIV",{class:!0}),T(i).forEach(m),n=F(d),a=E(d,"DIV",{class:!0});var g=T(a);r=E(g,"BUTTON",{class:!0});var v=T(r);q(s.$$.fragment,v),v.forEach(m),g.forEach(m),d.forEach(m),l=F(_),o=E(_,"DIV",{});var c=T(o);q(p.$$.fragment,c),c.forEach(m),this.h()},h(){b(i,"class","h-9 w-96 placeholder animate-pulse"),b(r,"class","btn placeholder animate-pulse shadow-md h-9 w-16"),b(a,"class","flex justify-end"),b(e,"class","grid w-full grid-cols-2 gap-5 my-4 pb-1 border-b border-primary-500")},m(_,d){N(_,e,d),I(e,i),I(e,n),I(e,a),I(a,r),M(s,r,null),N(_,l,d),N(_,o,d),M(p,o,null),V=!0},p:Y,i(_){V||(k(s.$$.fragment,_),k(p.$$.fragment,_),V=!0)},o(_){y(s.$$.fragment,_),y(p.$$.fragment,_),V=!1},d(_){_&&(m(e),m(l),m(o)),U(s),U(p)}}}function di(t){let e,i,n="Dimensions",a,r,s={ctx:t,current:null,token:null,hasCatch:!0,pending:ui,then:li,catch:ri,error:15,blocks:[,,,]};return Re(t[4](),s),{c(){e=D("div"),i=D("h1"),i.textContent=n,a=B(),s.block.c(),this.h()},l(l){e=E(l,"DIV",{class:!0});var o=T(e);i=E(o,"H1",{class:!0,"data-svelte-h":!0}),Be(i)!=="svelte-zulwaf"&&(i.textContent=n),a=F(o),s.block.l(o),o.forEach(m),this.h()},h(){b(i,"class","h1"),b(e,"class","w-full")},m(l,o){N(l,e,o),I(e,i),I(e,a),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,r=!0},p(l,o){t=l,Oe(s,t,o)},i(l){r||(k(s.block),r=!0)},o(l){for(let o=0;o<3;o+=1){const p=s.blocks[o];y(p)}r=!1},d(l){l&&m(e),s.block.d(),s.token=null,s=null}}}function mi(t){let e,i,n,a;return e=new je({props:{help:!0,title:"Manage Dimensions",$$slots:{default:[di]},$$scope:{ctx:t}}}),n=new Pe({}),{c(){S(e.$$.fragment),i=B(),S(n.$$.fragment)},l(r){q(e.$$.fragment,r),i=F(r),q(n.$$.fragment,r)},m(r,s){M(e,r,s),N(r,i,s),M(n,r,s),a=!0},p(r,[s]){const l={};s&65543&&(l.$$scope={dirty:s,ctx:r}),e.$set(l)},i(r){a||(k(e.$$.fragment,r),k(n.$$.fragment,r),a=!0)},o(r){y(e.$$.fragment,r),y(n.$$.fragment,r),a=!1},d(r){r&&m(i),U(e,r),U(n,r)}}}function pi(t,e,i){let n;const a=ze();let r=oi.helpItems,s=[];const l=Ge([]);let o,p=!1;ke(async()=>{W.setHelpItemList(r),i(1,p=!1)});async function V(){i(1,p=!1),i(7,s=await xe()),_()}async function _(){i(0,o={id:0,name:"",description:"",specification:"",inUse:!1})}function d(w){if(i(0,o={...n.find($=>$.id===w.id)}),w.action=="edit"&&i(1,p=!0),w.action=="delete"){const $={type:"confirm",title:"Delete Unit",body:'Are you sure you wish to delete Dimension "'+o.name+'" ('+o.specification+")?",response:P=>{P===!0&&g(w.id)}};a.trigger($)}}async function g(w){await ii(w)!=!0?K.showNotification({notificationType:Q.error,message:`Can't delete Dimension "`+o.name+'".'}):K.showNotification({notificationType:Q.success,message:'Dimension "'+o.name+'" deleted.'}),V()}function v(){p&&_(),i(1,p=!p)}const c=()=>{W.show("create")},h=()=>v(),f=w=>d(w.detail.type);return t.$$.update=()=>{t.$$.dirty&128&&i(2,n=s),t.$$.dirty&128&&l.set(s)},[o,p,n,l,V,d,v,s,c,h,f]}class Ti extends Te{constructor(e){super(),ye(this,e,pi,mi,$e,{})}}export{Ti as component};
