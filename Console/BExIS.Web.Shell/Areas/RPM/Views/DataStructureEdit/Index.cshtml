@using Telerik.Web.Mvc.UI
@using BExIS.Web.Shell.Areas.RPM.Models
@model long

<link href="@Url.Content("~/Areas/RPM/Stylesheets/DataStructure.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Areas/RPM/Stylesheets/DataStructureEdit.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Areas/RPM/Scripts/isotope.pkgd.min.js")"></script>
<script src="@Url.Content("~/Areas/RPM/Scripts/packery.pkgd.min.js")"></script>
<script src="@Url.Content("~/Areas/RPM/Scripts/draggabilly.pkgd.min.js")"></script>

<div id="SearchResult">
    <h3 class="bx-rpm-loading"><span class="fa fa-spinner fa-pulse"></span> Loading Variables</h3>
</div>
<div id="DataStructure">
    <h3 class="bx-rpm-loading"><span class="fa fa-spinner fa-pulse"></span> Loading Data Structure
    @if (Model > 0)
    {
        <span> @Model</span>
    }
    </h3>
</div>

<script type="text/javascript">
    $(function () {
        $.get('@Url.Action("_attributeResultBinding", "DataStructureEdit", new { area = "RPM"} )', function (data) {
            $('#SearchResult').html(data);

            $.get('@Url.Action("_dataStructureBinding", "DataStructureEdit", new { area = "RPM", dataStructureId = Model} )', function (data) {
                $('#DataStructure').html(data);
            });
        });
    });

    function onCliclCheckbox(e) {
        if (e.hasAttribute('checked'))
            e.removeAttribute('checked');
        else
            e.setAttribute('checked', 'checked');
    }

    function createMessageWindow(data, title) {
        var windowElement = $.telerik.window.create({
            title: title,
            html: data,
            contentUrl: "",
            actions: ["Close"],
            modal: true,
            resizable: false,
            draggable: true,
            scrollable: false,
            onClose: function () {
                $("#messageWindow").data('tWindow').destroy();
            }
        });

        windowElement.attr('id', 'messageWindow');
        var window = $(windowElement).data('tWindow');
        window.center().open();

        resetAllTelerikIconTitles();
    }

</script>