@using System
@using Telerik.Web.Mvc.UI

<div class="navbar navbar-default navbar-fixed-top" style="z-index: 1337">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="@Url.Action("Index", "Home", new {area = ""})" class="navbar-brand">
                <img alt="BExIS" style="max-width: 40px; margin-top: -10px;" src="~/Content/Images/Bildmarke_BEXIS_cmyk.svg">
            </a>
        </div>
        <div id="navbarCollapse" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li>@Html.ActionLink("Search", "Index", "Home", new {area = "DDM"}, null)</li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Plan<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li>@Html.ActionLink("Data Structure Designer", "DataStructureDesigner", "Home", new {area = "RPM"}, null)</li>
                        <li>@Html.ActionLink("Data Attribute Designer", "AttributeManager", "DataAttribute", new {area = "RPM"}, null)</li>
                        <li>@Html.ActionLink("Unit Manager", "UnitManager", "Unit", new {area = "RPM"}, null)</li>
                        <li>@Html.ActionLink("Data Type Manager", "DataTypeManager", "Home", new {area = "RPM"}, null)</li>

                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Collect<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li>@Html.ActionLink("Create Dataset", "CreateDataset", "Create", new {area = "DCM"}, null)</li>
                        <li>@Html.ActionLink("Upload Data", "Index", "Submit", new {area = "DCM"}, null)</li>
                        <li>@Html.ActionLink("Push Big File", "Index", "Push", new {area = "DCM"}, null)</li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Administration<span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li>@Html.ActionLink("Users", "Users", "Users", new {area = "SAM"}, null)</li>
                        <li>@Html.ActionLink("Groups", "Groups", "Groups", new {area = "SAM"}, null)</li>
                        <li>@Html.ActionLink("Features", "Features", "FeaturePermissions", new {area = "SAM"}, null)</li>
                        <li>@Html.ActionLink("Data", "Data", "DataPermissions", new {area = "SAM"}, null)</li>
                        <li role="separator" class="divider"></li>
                        <li>@Html.ActionLink("Search Manager", "SearchDesigner", "Admin", new {area = "DDM"}, null)</li>
                        <li role="separator" class="divider"></li>
                        <li>@Html.ActionLink("Metadata Structure Import", "ImportMetadataStructureWizard", "ImportMetadataStructure", new {area = "DCM"}, null)</li>
                        <li role="separator" class="divider"></li>
                        <li>@Html.ActionLink("Metadata Export", "Index", "Admin", new {area = "DIM"}, null)</li>
                        <li role="separator" class="divider"></li>
                        <li>@Html.ActionLink("Maintenance", "Index", "Dataset", new {area = "SAM"}, null)</li>
                    </ul>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                @if (Request.IsAuthenticated)
                {
                    <li><a>Welcome <strong>@User.Identity.Name</strong></a></li>
                    <li>@Html.ActionLink("Log Off", "LogOff", "Account", new {area = "SAM"}, null)</li>
                }
                else
                {
                    <li><a href="#" onclick="LogOn()">LogOn</a></li>
                }

                <li><a href="#"><i class="fa fa-cog"></i></a></li>
            </ul>
        </div>
    </div>
    <div class="container-fluid">
    
    </div>
</div>

@(Html.Telerik().Window()
    .Name("Window_Register")
    .Title("Register")
    .Draggable(true)
    .Modal(true)
    .Visible(false)
    .Scrollable(true)
    .ContentHtmlAttributes(new { @style = "overflow:auto; width:auto; height:auto; min-height:225px; min-width:400px" })
    .Content(@<text>
        <div id="Content_Register"></div>
    </text>)
    .ClientEvents(clientEvents => clientEvents
        .OnClose("Window_Register_OnClose")
    )
)

@(Html.Telerik().Window()
    .Name("Window_LogOn")
    .Title("LogOn")
    .Draggable(true)
    .Modal(true)
    .Visible(false)
    .Scrollable(true)
    .ContentHtmlAttributes(new { @style = "overflow:auto; width:auto; height:auto; min-height:225px; min-width:400px" })
    .Content(@<text>
        <div id="Content_LogOn"></div>
    </text>)
    .ClientEvents(clientEvents => clientEvents
        .OnClose("Window_LogOn_OnClose")
    )
)

<script type="text/javascript">

    function Register() {
        $.get('@Url.Action("Register", "Account", new { area = "SAM" })', function (data) {

            $('#Content_Register').html(data);

            var window = $('#Window_Register').data('tWindow');
            window.center().open();
        });
    }

    function Window_Register_Cancel() {
        $('#Window_Register').data('tWindow').close();
    }

    function Window_Register_OnClose() {
        $('#Content_Register').empty();
    }

    function LogOn() {
        $.get('@Url.Action("LogOn", "Account", new { area = "SAM" })', function (data) {

            $('#Content_LogOn').html(data);

            var window = $('#Window_LogOn').data('tWindow');
            window.center().open();
        });
    }

    function Window_LogOn_Cancel() {
        $('#Window_LogOn').data('tWindow').close();
    }

    function Window_LogOn_OnClose() {
        $('#Content_LogOn').empty();
    }
</script>