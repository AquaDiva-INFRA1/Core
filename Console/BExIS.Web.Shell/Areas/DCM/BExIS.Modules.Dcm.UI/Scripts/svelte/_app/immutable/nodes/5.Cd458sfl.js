import{s as ze,h as ot,y as Mt,e as k,F as Y,l as N,c as S,m as G,G as Z,d as _,o as M,a as y,i as P,q as h,H as Ee,z as Ht,A as Lt,B as Ot,g as He,t as bt,r as Oe,R as Jt,n as Qe,k as Wt,j as Ye,u as At,a7 as wt,L as Yt,N as x,a8 as Zt,S as ee,I as xt,a9 as yt}from"../chunks/scheduler.CAfox-jx.js";import{y as en,p as tn,P as Ke,v as Me,T as nn,h as rn,u as sn,E as an}from"../chunks/vest.production.BFcTmUGY.js";import{S as Xe,i as Je,c as T,a as I,m as D,t as v,b,d as V,g as Te,e as Ie,f as te}from"../chunks/index.KweEQ9zd.js";import{F as Ae,f as ln,a as on,b as un,c as cn,d as fn,e as dn,P as mn,g as pn}from"../chunks/Page.423dBf39.js";import{A as ce,a as Pt,b as kt}from"../chunks/eslint4b.es.CUHVcEDL.js";import{S as ut,g as gn,a as _n}from"../chunks/Spinner.BnaZ7UQs.js";import{e as Ze,u as hn,o as $n}from"../chunks/each.CfOkuAUV.js";import{g as jt}from"../chunks/stores.BRdHf4bZ.js";import{M as Bt,D as St,a as ge}from"../chunks/MultiSelect.fzFdbC8L.js";import{C as Ut,T as vn}from"../chunks/ContentContainer.BKGFbrTa.js";import{S as Rt}from"../chunks/SlideToggle.CAAfUJZA.js";import{w as bn}from"../chunks/index.B3w0AL5h.js";function Et(r,e,t){const n=r.slice();return n[12]=e[t],n}function Tt(r){let e,t="in use";return{c(){e=k("span"),e.textContent=t,this.h()},l(n){e=S(n,"SPAN",{class:!0,"data-svelte-h":!0}),He(e)!=="svelte-lkw4zj"&&(e.textContent=t),this.h()},h(){y(e,"class","badge variant-filled-error")},m(n,a){P(n,e,a)},d(n){n&&_(e)}}}function It(r){let e,t;return{c(){e=k("blockquote"),t=Y(r[1]),this.h()},l(n){e=S(n,"BLOCKQUOTE",{class:!0});var a=G(e);t=Z(a,r[1]),a.forEach(_),this.h()},h(){y(e,"class","blockquote mb-5")},m(n,a){P(n,e,a),h(e,t)},p(n,a){a&2&&Ee(t,n[1])},d(n){n&&_(e)}}}function Dt(r){let e,t,n,a,i=r[5].join(", ")+"",s;return{c(){e=k("div"),t=k("i"),n=Y("Restricted to these file types: "),a=k("b"),s=Y(i)},l(l){e=S(l,"DIV",{});var o=G(e);t=S(o,"I",{});var u=G(t);n=Z(u,"Restricted to these file types: "),a=S(u,"B",{});var f=G(a);s=Z(f,i),f.forEach(_),u.forEach(_),o.forEach(_)},m(l,o){P(l,e,o),h(e,t),h(t,n),h(t,a),h(a,s)},p(l,o){o&32&&i!==(i=l[5].join(", ")+"")&&Ee(s,i)},d(l){l&&_(e)}}}function Vt(r){let e,t,n=r[2].text+"",a,i,s,l,o,u,f,m,p,w,c;const H=[yn,wn],B=[];function C(E,O){return E[6]?0:1}l=C(r),o=B[l]=H[l](r);let j=Ze(r[4]),L=[];for(let E=0;E<j.length;E+=1)L[E]=qt(Et(r,j,E));return{c(){e=k("i"),t=Y("Show linked "),a=Y(n),i=Y(`:\r
				`),s=k("button"),o.c(),u=N(),f=k("div"),m=k("ul");for(let E=0;E<L.length;E+=1)L[E].c();this.h()},l(E){e=S(E,"I",{});var O=G(e);t=Z(O,"Show linked "),a=Z(O,n),i=Z(O,`:\r
				`),s=S(O,"BUTTON",{class:!0});var U=G(s);o.l(U),U.forEach(_),O.forEach(_),u=M(E),f=S(E,"DIV",{});var q=G(f);m=S(q,"UL",{class:!0});var A=G(m);for(let K=0;K<L.length;K+=1)L[K].l(A);A.forEach(_),q.forEach(_),this.h()},h(){y(s,"class","btn-icon"),y(m,"class","ul list-disc pl-5"),bt(f,"hidden",r[6])},m(E,O){P(E,e,O),h(e,t),h(e,a),h(e,i),h(e,s),B[l].m(s,null),P(E,u,O),P(E,f,O),h(f,m);for(let U=0;U<L.length;U+=1)L[U]&&L[U].m(m,null);p=!0,w||(c=Oe(s,"click",r[9]),w=!0)},p(E,O){(!p||O&4)&&n!==(n=E[2].text+"")&&Ee(a,n);let U=l;if(l=C(E),l!==U&&(Te(),b(B[U],1,1,()=>{B[U]=null}),Ie(),o=B[l],o||(o=B[l]=H[l](E),o.c()),v(o,1),o.m(s,null)),O&16){j=Ze(E[4]);let q;for(q=0;q<j.length;q+=1){const A=Et(E,j,q);L[q]?L[q].p(A,O):(L[q]=qt(A),L[q].c(),L[q].m(m,null))}for(;q<L.length;q+=1)L[q].d(1);L.length=j.length}(!p||O&64)&&bt(f,"hidden",E[6])},i(E){p||(v(o),p=!0)},o(E){b(o),p=!1},d(E){E&&(_(e),_(u),_(f)),B[l].d(),Jt(L,E),w=!1,c()}}}function wn(r){let e,t;return e=new Ae({props:{icon:ln}}),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function yn(r){let e,t;return e=new Ae({props:{icon:on}}),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function qt(r){let e,t=r[12].text+"",n,a,i=r[12].id+"",s,l;return{c(){e=k("li"),n=Y(t),a=Y(" ("),s=Y(i),l=Y(")")},l(o){e=S(o,"LI",{});var u=G(e);n=Z(u,t),a=Z(u," ("),s=Z(u,i),l=Z(u,")"),u.forEach(_)},m(o,u){P(o,e,u),h(e,n),h(e,a),h(e,s),h(e,l)},p(o,u){u&16&&t!==(t=o[12].text+"")&&Ee(n,t),u&16&&i!==(i=o[12].id+"")&&Ee(s,i)},d(o){o&&_(e)}}}function kn(r){let e;return{c(){e=Y("no action setup")},l(t){e=Z(t,"no action setup")},m(t,n){P(t,e,n)},d(t){t&&_(e)}}}function Sn(r){let e,t,n,a,i,s,l,o,u,f=r[3].text+"",m,p,w,c=r[2].text+"",H,B,C,j,L,E,O,U,q=r[4].length>0&&Tt(),A=r[1]&&It(r),K=r[5].length>0&&Dt(r),R=r[4].length>0&&Vt(r);const ne=r[8].default,fe=Mt(ne,r,r[10],null),X=fe||kn();return{c(){e=k("header"),t=k("div"),n=k("div"),a=k("h2"),i=Y(r[0]),s=N(),l=k("div"),q&&q.c(),o=N(),u=k("span"),m=Y(f),p=N(),w=k("span"),H=Y(c),B=N(),C=k("div"),A&&A.c(),j=N(),K&&K.c(),L=N(),R&&R.c(),E=N(),O=k("footer"),X&&X.c(),this.h()},l(F){e=S(F,"HEADER",{class:!0});var z=G(e);t=S(z,"DIV",{class:!0});var re=G(t);n=S(re,"DIV",{class:!0});var De=G(n);a=S(De,"H2",{class:!0});var _e=G(a);i=Z(_e,r[0]),_e.forEach(_),De.forEach(_),s=M(re),l=S(re,"DIV",{class:!0});var Q=G(l);q&&q.l(Q),o=M(Q),u=S(Q,"SPAN",{class:!0});var ae=G(u);m=Z(ae,f),ae.forEach(_),p=M(Q),w=S(Q,"SPAN",{class:!0});var d=G(w);H=Z(d,c),d.forEach(_),Q.forEach(_),re.forEach(_),z.forEach(_),B=M(F),C=S(F,"DIV",{class:!0});var J=G(C);A&&A.l(J),j=M(J),K&&K.l(J),L=M(J),R&&R.l(J),J.forEach(_),E=M(F),O=S(F,"FOOTER",{class:!0});var he=G(O);X&&X.l(he),he.forEach(_),this.h()},h(){y(a,"class","h2"),y(n,"class","grow text-left"),y(u,"class","badge variant-filled-surface"),y(w,"class","badge variant-filled-secondary"),y(l,"class","grow-0 w-42 text-right"),y(t,"class","flex"),y(e,"class","card-header"),y(C,"class","p-4 grow"),y(O,"class","card-footer")},m(F,z){P(F,e,z),h(e,t),h(t,n),h(n,a),h(a,i),h(t,s),h(t,l),q&&q.m(l,null),h(l,o),h(l,u),h(u,m),h(l,p),h(l,w),h(w,H),P(F,B,z),P(F,C,z),A&&A.m(C,null),h(C,j),K&&K.m(C,null),h(C,L),R&&R.m(C,null),P(F,E,z),P(F,O,z),X&&X.m(O,null),U=!0},p(F,z){(!U||z&1)&&Ee(i,F[0]),F[4].length>0?q||(q=Tt(),q.c(),q.m(l,o)):q&&(q.d(1),q=null),(!U||z&8)&&f!==(f=F[3].text+"")&&Ee(m,f),(!U||z&4)&&c!==(c=F[2].text+"")&&Ee(H,c),F[1]?A?A.p(F,z):(A=It(F),A.c(),A.m(C,j)):A&&(A.d(1),A=null),F[5].length>0?K?K.p(F,z):(K=Dt(F),K.c(),K.m(C,L)):K&&(K.d(1),K=null),F[4].length>0?R?(R.p(F,z),z&16&&v(R,1)):(R=Vt(F),R.c(),v(R,1),R.m(C,null)):R&&(Te(),b(R,1,1,()=>{R=null}),Ie()),fe&&fe.p&&(!U||z&1024)&&Ht(fe,ne,F,F[10],U?Ot(ne,F[10],z,null):Lt(F[10]),null)},i(F){U||(v(R),v(X,F),U=!0)},o(F){b(R),b(X,F),U=!1},d(F){F&&(_(e),_(B),_(C),_(E),_(O)),q&&q.d(),A&&A.d(),K&&K.d(),R&&R.d(),X&&X.d(F)}}}function En(r){let e,t;return e=new Ut({props:{$$slots:{default:[Sn]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},p(n,[a]){const i={};a&1151&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Tn(r,e,t){let{$$slots:n={},$$scope:a}=e,{id:i}=e,{name:s=""}=e,{description:l=""}=e,{entityType:o}=e,{metadataStructure:u}=e,{linkedSubjects:f=[]}=e,{allowedFileTypes:m=[]}=e,p=!0;ot();const w=()=>t(6,p=!p);return r.$$set=c=>{"id"in c&&t(7,i=c.id),"name"in c&&t(0,s=c.name),"description"in c&&t(1,l=c.description),"entityType"in c&&t(2,o=c.entityType),"metadataStructure"in c&&t(3,u=c.metadataStructure),"linkedSubjects"in c&&t(4,f=c.linkedSubjects),"allowedFileTypes"in c&&t(5,m=c.allowedFileTypes),"$$scope"in c&&t(10,a=c.$$scope)},[s,l,o,u,f,m,p,i,n,w,a]}class In extends Xe{constructor(e){super(),Je(this,e,Tn,En,ze,{id:7,name:0,description:1,entityType:2,metadataStructure:3,linkedSubjects:4,allowedFileTypes:5})}}const Dn=async r=>{try{return(await ce.get("/dcm/entitytemplates/Get?id="+r)).data}catch(e){throw console.error(e),e}},Vn=async()=>{try{return(await ce.get("/dcm/entitytemplates/Load")).data}catch(r){throw console.error(r),r}},qn=async()=>{try{return(await ce.get("/dcm/entitytemplates/Entities")).data}catch(r){throw console.error(r),r}},Gn=async()=>{try{return(await ce.get("/dcm/entitytemplates/MetadataStructures")).data}catch(r){throw console.error(r),r}},Cn=async r=>{try{return(await ce.get("/dcm/entitytemplates/SystemKeys?metadataStructureId="+r)).data}catch(e){throw console.error(e),e}},Fn=async()=>{try{return(await ce.get("/dcm/entitytemplates/DataStructures")).data}catch(r){throw console.error(r),r}},Nn=async()=>{try{return(await ce.get("/dcm/entitytemplates/Hooks")).data}catch(r){throw console.error(r),r}},Mn=async()=>{try{return(await ce.get("/dcm/entitytemplates/Groups")).data}catch(r){throw console.error(r),r}},Hn=async()=>{try{return(await ce.get("/dcm/entitytemplates/FileTypes")).data}catch(r){throw console.error(r),r}},Ln=async r=>{try{return(await ce.post("/dcm/entitytemplates/Update",r)).data}catch(e){throw console.error(e),e}},On=async r=>{try{return(await ce.delete("/dcm/entitytemplates/Delete",{id:r})).data}catch(e){throw console.error(e),e}};function Gt(r,e,t){const n=r.slice();return n[8]=e[t],n[10]=t,n}function An(r){let e,t,n;return t=new ut({props:{position:Pt.center,label:"loading entity templates"}}),{c(){e=k("div"),T(t.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var i=G(e);I(t.$$.fragment,i),i.forEach(_),this.h()},h(){y(e,"class","text-surface-800")},m(a,i){P(a,e,i),D(t,e,null),n=!0},p:Qe,i(a){n||(v(t.$$.fragment,a),n=!0)},o(a){b(t.$$.fragment,a),n=!1},d(a){a&&_(e),V(t)}}}function Pn(r){let e,t=[],n=new Map,a,i=Ze(r[0]);const s=l=>l[8].id;for(let l=0;l<i.length;l+=1){let o=Gt(r,i,l),u=s(o);n.set(u,t[l]=Ct(u,o))}return{c(){e=k("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=S(l,"DIV",{class:!0});var o=G(e);for(let u=0;u<t.length;u+=1)t[u].l(o);o.forEach(_),this.h()},h(){y(e,"class","py-5 w-full grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(l,o){P(l,e,o);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);a=!0},p(l,o){o&7&&(i=Ze(l[0]),Te(),t=hn(t,o,s,1,l,i,n,e,$n,Ct,null,Gt),Ie())},i(l){if(!a){for(let o=0;o<i.length;o+=1)v(t[o]);a=!0}},o(l){for(let o=0;o<t.length;o+=1)b(t[o]);a=!1},d(l){l&&_(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function jn(r){let e,t,n,a,i,s,l,o,u,f,m,p;a=new Ae({props:{icon:un}});function w(){return r[3](r[10],r[8])}o=new Ae({props:{icon:cn}});function c(){return r[4](r[8])}return{c(){e=k("div"),t=k("div"),n=k("button"),T(a.$$.fragment),s=N(),l=k("button"),T(o.$$.fragment),u=N(),this.h()},l(H){e=S(H,"DIV",{class:!0});var B=G(e);t=S(B,"DIV",{class:!0});var C=G(t);n=S(C,"BUTTON",{title:!0,class:!0});var j=G(n);I(a.$$.fragment,j),j.forEach(_),s=M(C),l=S(C,"BUTTON",{title:!0,class:!0});var L=G(l);I(o.$$.fragment,L),L.forEach(_),C.forEach(_),B.forEach(_),u=M(H),this.h()},h(){y(n,"title","delete"),y(n,"class","btn variant-filled-error"),n.disabled=i=r[8].linkedSubjects.length>0,y(l,"title","edit"),y(l,"class","btn variant-filled-primary"),y(t,"class","grow text-right gap-2"),y(e,"class","flex h-full justify-end")},m(H,B){P(H,e,B),h(e,t),h(t,n),D(a,n,null),h(t,s),h(t,l),D(o,l,null),P(H,u,B),f=!0,m||(p=[Oe(n,"click",w),Oe(l,"click",c)],m=!0)},p(H,B){r=H,(!f||B&1&&i!==(i=r[8].linkedSubjects.length>0))&&(n.disabled=i)},i(H){f||(v(a.$$.fragment,H),v(o.$$.fragment,H),f=!0)},o(H){b(a.$$.fragment,H),b(o.$$.fragment,H),f=!1},d(H){H&&(_(e),_(u)),V(a),V(o),m=!1,At(p)}}}function Ct(r,e){let t,n,a;const i=[e[8]];let s={$$slots:{default:[jn]},$$scope:{ctx:e}};for(let l=0;l<i.length;l+=1)s=Wt(s,i[l]);return n=new In({props:s}),{key:r,first:null,c(){t=Ye(),T(n.$$.fragment),this.h()},l(l){t=Ye(),I(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,o){P(l,t,o),D(n,l,o),a=!0},p(l,o){e=l;const u=o&1?gn(i,[_n(e[8])]):{};o&2049&&(u.$$scope={dirty:o,ctx:e}),n.$set(u)},i(l){a||(v(n.$$.fragment,l),a=!0)},o(l){b(n.$$.fragment,l),a=!1},d(l){l&&_(t),V(n,l)}}}function Bn(r){let e,t,n,a,i;const s=[Pn,An],l=[];function o(u,f){return u[0]?0:1}return e=o(r),t=l[e]=s[e](r),a=new Bt({}),{c(){t.c(),n=N(),T(a.$$.fragment)},l(u){t.l(u),n=M(u),I(a.$$.fragment,u)},m(u,f){l[e].m(u,f),P(u,n,f),D(a,u,f),i=!0},p(u,[f]){let m=e;e=o(u),e===m?l[e].p(u,f):(Te(),b(l[m],1,1,()=>{l[m]=null}),Ie(),t=l[e],t?t.p(u,f):(t=l[e]=s[e](u),t.c()),v(t,1),t.m(n.parentNode,n))},i(u){i||(v(t),v(a.$$.fragment,u),i=!0)},o(u){b(t),b(a.$$.fragment,u),i=!1},d(u){u&&_(n),l[e].d(u),V(a,u)}}}function Un(r,e,t){const n=jt(),a=ot();let{entitytemplates:i}=e;function s(m){console.log("edit",m),a("edit",m)}function l(m,p){const w={type:"confirm",title:"Please Confirm",body:"Are you sure you wish to remove?",response:c=>{c&&o(m,p)}};n.trigger(w)}async function o(m,p){console.log(m,p);const w=await On(p);console.log(w),w===!0&&t(0,i=i.filter((c,H)=>H!==m))}const u=(m,p)=>l(m,p.id),f=m=>s(m.id);return r.$$set=m=>{"entitytemplates"in m&&t(0,i=m.entitytemplates)},[i,s,l,u,f]}class Rn extends Xe{constructor(e){super(),Je(this,e,Un,Bn,ze,{entitytemplates:0})}}function Kn(r){let e,t,n;const a=r[1].default,i=Mt(a,r,r[0],null);return{c(){e=k("div"),t=k("div"),i&&i.c(),this.h()},l(s){e=S(s,"DIV",{class:!0});var l=G(e);t=S(l,"DIV",{class:!0});var o=G(t);i&&i.l(o),o.forEach(_),l.forEach(_),this.h()},h(){y(t,"class","col-span-10"),y(e,"class","grid grid-cols-10 items-end")},m(s,l){P(s,e,l),h(e,t),i&&i.m(t,null),n=!0},p(s,[l]){i&&i.p&&(!n||l&1)&&Ht(i,a,s,s[0],n?Ot(a,s[0],l,null):Lt(s[0]),null)},i(s){n||(v(i,s),n=!0)},o(s){b(i,s),n=!1},d(s){s&&_(e),i&&i.d(s)}}}function zn(r,e,t){let{$$slots:n={},$$scope:a}=e;return r.$$set=i=>{"$$scope"in i&&t(0,a=i.$$scope)},[a,n]}class me extends Xe{constructor(e){super(),Je(this,e,zn,Kn,ze,{})}}const Le=bn([]),We=en((r={},e)=>{tn(e),Ke("name","name is required",()=>{Me(r.name).isNotBlank()}),Ke("name","name allready exist",()=>{const t=r.id>0?wt(Le).find(a=>a.id==r.id):{id:0,name:""},n=wt(Le).map(a=>a.name!=t.name?a.name:"");return Me(r.name).notInside(n)}),Ke("description","description is required",()=>{Me(r.description).isNotBlank()}),Ke("metadataStructure","metadatastructure is required",()=>{Me(r.metadataStructure).isNotNull(),Me(r.metadataStructure).isNotUndefined()}),Ke("entityType","entity is required",()=>{Me(r.entityType).isNotNull(),Me(r.entityType).isNotUndefined()})}),Qn=[{id:"name",name:"Template Name",description:"Enter a unique name for the entity template."},{id:"entityType",name:"Entity Type",description:"This template belongs to which type of entity?"},{id:"description",name:"Description",description:"Template description helps other people to choose the correct one."},{id:"metadataStructure",name:"Metadata Schema",description:"Metadata schema the dataset is based on."},{id:"metadataFields",name:"Metadata input fields",description:"Set the minimum required information for your dataset.The user must fill this field(s) before the creation of a dataset can start. The listed items (system keys) must be mapped against the selected metadata schema.That is why they are grouped in mapped and unmapped."},{id:"invalidSaveMode",name:"Invalid Save Mode",description:"If the user should be able to save metadata with empty required fields, this option needs to be activated."},{id:"permissions",name:"Permissions",description:"Select the group(s) that will automatically get full access after creating the dataset."},{id:"notification",name:"Notification",description:"Select the group(s) to be notified when something is changed."},{id:"disabledHooks",name:"Disable dataset components",description:"Select components/features that should not be displayed during editing and display of a dataset."},{id:"allowedFileTypes",name:"Restrict allowed file type for upload",description:"Select file types that are allowed during file upload."},{id:"hasDatastructure",name:"Options for data structures",description:'<u>1. active vs not active</u><ul class="ul list-disc p-5"><li><b>active data structure</b> - tabular data will be uploaded</li><li><b>deactivate</b> - files will be uploaded directly and will not be processed further. Select features that should not be displayed during editing and display.</li></ul><u>2. selection or not</u><ul class="ul list-disc p-5"><li> If you activate data structure, you can define a selection of data structures from the system.</li><li>selected - only these structures can be used later, not selected - new structures can be selected.</li></ul>'}];function Xn(r){let e,t;return e=new ut({props:{textCss:"text-secondary-500"}}),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},p:Qe,i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Jn(r){let e,t;return e=new Ut({props:{$$slots:{default:[or]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},p(n,a){const i={};a[0]&1023|a[1]&32&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Ft(r){let e,t;return e=new me({props:{$$slots:{default:[Wn]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},p(n,a){const i={};a[0]&192|a[1]&32&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Wn(r){let e,t,n;function a(s){r[18](s)}let i={id:"metadataFields",title:"Required Fields",source:r[6],itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,help:!0};return r[7].metadataFields!==void 0&&(i.target=r[7].metadataFields),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&64&&(o.source=s[6]),!t&&l[0]&128&&(t=!0,o.target=s[7].metadataFields,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function Yn(r){let e;return{c(){e=Y("Allow saving with empty required fields")},l(t){e=Z(t,"Allow saving with empty required fields")},m(t,n){P(t,e,n)},d(t){t&&_(e)}}}function Zn(r){let e,t,n,a,i;function s(o){r[19](o)}let l={name:"Invalid-save-mode",$$slots:{default:[Yn]},$$scope:{ctx:r}};return r[7].metadataInvalidSaveMode!==void 0&&(l.checked=r[7].metadataInvalidSaveMode),n=new Rt({props:l}),x.push(()=>te(n,"checked",s)),{c(){e=k("div"),t=N(),T(n.$$.fragment),this.h()},l(o){e=S(o,"DIV",{id:!0}),G(e).forEach(_),t=M(o),I(n.$$.fragment,o),this.h()},h(){y(e,"id","invalidSaveMode")},m(o,u){P(o,e,u),P(o,t,u),D(n,o,u),i=!0},p(o,u){const f={};u[1]&32&&(f.$$scope={dirty:u,ctx:o}),!a&&u[0]&128&&(a=!0,f.checked=o[7].metadataInvalidSaveMode,ee(()=>a=!1)),n.$set(f)},i(o){i||(v(n.$$.fragment,o),i=!0)},o(o){b(n.$$.fragment,o),i=!1},d(o){o&&(_(e),_(t)),V(n,o)}}}function xn(r){let e;return{c(){e=Y("Allow to use data structures")},l(t){e=Z(t,"Allow to use data structures")},m(t,n){P(t,e,n)},d(t){t&&_(e)}}}function Nt(r){let e,t,n;function a(s){r[21](s)}let i={id:"datastructures",title:"Limit the selection of allowed data structures",source:r[2],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].datastructureList!==void 0&&(i.target=r[7].datastructureList),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&4&&(o.source=s[2]),!t&&l[0]&128&&(t=!0,o.target=s[7].datastructureList,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function er(r){let e,t,n,a,i,s,l;function o(m){r[20](m)}let u={name:"use_data_structure",$$slots:{default:[xn]},$$scope:{ctx:r}};r[7].hasDatastructure!==void 0&&(u.checked=r[7].hasDatastructure),t=new Rt({props:u}),x.push(()=>te(t,"checked",o));let f=r[7].hasDatastructure&&Nt(r);return{c(){e=k("div"),T(t.$$.fragment),a=N(),f&&f.c(),this.h()},l(m){e=S(m,"DIV",{class:!0});var p=G(e);I(t.$$.fragment,p),a=M(p),f&&f.l(p),p.forEach(_),this.h()},h(){y(e,"class","mt-7 space-y-5")},m(m,p){P(m,e,p),D(t,e,null),h(e,a),f&&f.m(e,null),i=!0,s||(l=Oe(e,"mouseover",r[22]),s=!0)},p(m,p){const w={};p[1]&32&&(w.$$scope={dirty:p,ctx:m}),!n&&p[0]&128&&(n=!0,w.checked=m[7].hasDatastructure,ee(()=>n=!1)),t.$set(w),m[7].hasDatastructure?f?(f.p(m,p),p[0]&128&&v(f,1)):(f=Nt(m),f.c(),v(f,1),f.m(e,null)):f&&(Te(),b(f,1,1,()=>{f=null}),Ie())},i(m){i||(v(t.$$.fragment,m),v(f),i=!0)},o(m){b(t.$$.fragment,m),b(f),i=!1},d(m){m&&_(e),V(t),f&&f.d(),s=!1,l()}}}function tr(r){let e,t,n;function a(s){r[23](s)}let i={id:"permissionsFull",title:"Full",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].permissionGroups.full!==void 0&&(i.target=r[7].permissionGroups.full),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups.full,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function nr(r){let e,t,n;function a(s){r[24](s)}let i={id:"permissionsViewEditGrant",title:"View, Edit and Grant",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].permissionGroups.viewEditGrant!==void 0&&(i.target=r[7].permissionGroups.viewEditGrant),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups.viewEditGrant,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function rr(r){let e,t,n;function a(s){r[25](s)}let i={id:"permissionsViewEdit",title:"View and Edit",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].permissionGroups.viewEdit!==void 0&&(i.target=r[7].permissionGroups.viewEdit),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups.viewEdit,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function sr(r){let e,t,n;function a(s){r[26](s)}let i={id:"permissionsView",title:"View",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].permissionGroups.view!==void 0&&(i.target=r[7].permissionGroups.view),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups.view,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function ar(r){let e,t,n;function a(s){r[27](s)}let i={id:"notification",title:"Send notifications per default to the following groups",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].notificationGroups!==void 0&&(i.target=r[7].notificationGroups),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].notificationGroups,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function lr(r){let e,t,n;function a(s){r[28](s)}let i={id:"disabledHooks",title:"Disable dataset components",source:r[0],help:!0};return r[7].disabledHooks!==void 0&&(i.target=r[7].disabledHooks),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&1&&(o.source=s[0]),!t&&l[0]&128&&(t=!0,o.target=s[7].disabledHooks,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function ir(r){let e,t,n;function a(s){r[29](s)}let i={id:"allowedFileTypes",title:"Restrict allowed file types for file upload",source:r[5],help:!0};return r[7].allowedFileTypes!==void 0&&(i.target=r[7].allowedFileTypes),e=new ge({props:i}),x.push(()=>te(e,"target",a)),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,l){D(e,s,l),n=!0},p(s,l){const o={};l[0]&32&&(o.source=s[5]),!t&&l[0]&128&&(t=!0,o.target=s[7].allowedFileTypes,ee(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function or(r){let e,t,n,a,i,s,l,o,u,f,m,p,w,c,H="Metadata",B,C,j,L,E,O,U,q,A,K="Data Structure",R,ne,fe,X,F="Administration",z,re,De="Set permissions per default to the following groups",_e,Q,ae,d,J,he,$e,xe,ve,et,Ve,ct="Notifications",tt,Pe,be,nt,qe,ft="Dataset Settings",rt,we,ye,st,ke,at,Se,pe,Ge,lt,de,Ce,je,it,dt;function Kt(g){r[14](g)}let mt={id:"name",label:"Template Name",valid:r[8].isValid("name"),invalid:r[8].hasErrors("name"),feedback:r[8].getErrors("name"),required:!0,placeholder:"Define a unique content-related name for your template.",help:!0};r[7].name!==void 0&&(mt.value=r[7].name),n=new nn({props:mt}),x.push(()=>te(n,"value",Kt)),n.$on("input",r[11]);function zt(g){r[15](g)}let pt={id:"entityType",title:"Entity Type",required:!0,source:r[3],valid:r[8].isValid("entityType"),invalid:r[8].hasErrors("entityType"),feedback:r[8].getErrors("entityType"),complexTarget:!0,help:!0};r[7].entityType!==void 0&&(pt.target=r[7].entityType),s=new St({props:pt}),x.push(()=>te(s,"target",zt)),s.$on("change",r[11]);function Qt(g){r[16](g)}let gt={id:"description",label:"Description",valid:r[8].isValid("description"),invalid:r[8].hasErrors("description"),feedback:r[8].getErrors("description"),required:!0,placeholder:"Briefly describe in which cases this template should be used. Based on an entity or use case.",help:!0};r[7].description!==void 0&&(gt.value=r[7].description),u=new vn({props:gt}),x.push(()=>te(u,"value",Qt)),u.$on("input",r[11]);function Xt(g){r[17](g)}let _t={id:"metadataStructure",title:"Metadata Schema",source:r[1],valid:r[8].isValid("metadataStructure"),invalid:r[8].hasErrors("metadataStructure"),feedback:r[8].getErrors("metadataStructure"),complexTarget:!0,required:!0,help:!0};r[7].metadataStructure!==void 0&&(_t.target=r[7].metadataStructure),C=new St({props:_t}),x.push(()=>te(C,"target",Xt)),C.$on("change",r[11]);let W=r[6]&&Ft(r);return O=new me({props:{$$slots:{default:[Zn]},$$scope:{ctx:r}}}),ne=new me({props:{$$slots:{default:[er]},$$scope:{ctx:r}}}),ae=new me({props:{$$slots:{default:[tr]},$$scope:{ctx:r}}}),J=new me({props:{$$slots:{default:[nr]},$$scope:{ctx:r}}}),$e=new me({props:{$$slots:{default:[rr]},$$scope:{ctx:r}}}),ve=new me({props:{$$slots:{default:[sr]},$$scope:{ctx:r}}}),be=new me({props:{$$slots:{default:[ar]},$$scope:{ctx:r}}}),ye=new me({props:{$$slots:{default:[lr]},$$scope:{ctx:r}}}),ke=new me({props:{$$slots:{default:[ir]},$$scope:{ctx:r}}}),Ge=new Ae({props:{icon:fn}}),Ce=new Ae({props:{icon:dn}}),{c(){e=k("form"),t=k("div"),T(n.$$.fragment),i=N(),T(s.$$.fragment),o=N(),T(u.$$.fragment),m=N(),p=k("div"),w=k("div"),c=k("h3"),c.textContent=H,B=N(),T(C.$$.fragment),L=N(),W&&W.c(),E=N(),T(O.$$.fragment),U=N(),q=k("div"),A=k("h3"),A.textContent=K,R=N(),T(ne.$$.fragment),fe=N(),X=k("h3"),X.textContent=F,z=N(),re=k("p"),re.textContent=De,_e=N(),Q=k("div"),T(ae.$$.fragment),d=N(),T(J.$$.fragment),he=N(),T($e.$$.fragment),xe=N(),T(ve.$$.fragment),et=N(),Ve=k("h3"),Ve.textContent=ct,tt=N(),Pe=k("div"),T(be.$$.fragment),nt=N(),qe=k("h3"),qe.textContent=ft,rt=N(),we=k("div"),T(ye.$$.fragment),st=N(),T(ke.$$.fragment),at=N(),Se=k("div"),pe=k("button"),T(Ge.$$.fragment),lt=N(),de=k("button"),T(Ce.$$.fragment),this.h()},l(g){e=S(g,"FORM",{});var $=G(e);t=S($,"DIV",{class:!0});var le=G(t);I(n.$$.fragment,le),i=M(le),I(s.$$.fragment,le),o=M(le),I(u.$$.fragment,le),le.forEach(_),m=M($),p=S($,"DIV",{class:!0});var ie=G(p);w=S(ie,"DIV",{class:!0});var se=G(w);c=S(se,"H3",{class:!0,"data-svelte-h":!0}),He(c)!=="svelte-gn6c29"&&(c.textContent=H),B=M(se),I(C.$$.fragment,se),L=M(se),W&&W.l(se),E=M(se),I(O.$$.fragment,se),se.forEach(_),U=M(ie),q=S(ie,"DIV",{class:!0});var oe=G(q);A=S(oe,"H3",{class:!0,"data-svelte-h":!0}),He(A)!=="svelte-1sgw60h"&&(A.textContent=K),R=M(oe),I(ne.$$.fragment,oe),oe.forEach(_),ie.forEach(_),fe=M($),X=S($,"H3",{class:!0,"data-svelte-h":!0}),He(X)!=="svelte-1a4sqn4"&&(X.textContent=F),z=M($),re=S($,"P",{class:!0,"data-svelte-h":!0}),He(re)!=="svelte-uyt3ow"&&(re.textContent=De),_e=M($),Q=S($,"DIV",{class:!0});var ue=G(Q);I(ae.$$.fragment,ue),d=M(ue),I(J.$$.fragment,ue),he=M(ue),I($e.$$.fragment,ue),xe=M(ue),I(ve.$$.fragment,ue),ue.forEach(_),et=M($),Ve=S($,"H3",{class:!0,"data-svelte-h":!0}),He(Ve)!=="svelte-q471z0"&&(Ve.textContent=ct),tt=M($),Pe=S($,"DIV",{class:!0});var Be=G(Pe);I(be.$$.fragment,Be),Be.forEach(_),nt=M($),qe=S($,"H3",{class:!0,"data-svelte-h":!0}),He(qe)!=="svelte-6vlzwl"&&(qe.textContent=ft),rt=M($),we=S($,"DIV",{class:!0});var Fe=G(we);I(ye.$$.fragment,Fe),st=M(Fe),I(ke.$$.fragment,Fe),Fe.forEach(_),at=M($),Se=S($,"DIV",{class:!0});var Ne=G(Se);pe=S(Ne,"BUTTON",{title:!0,type:!0,class:!0});var Ue=G(pe);I(Ge.$$.fragment,Ue),Ue.forEach(_),lt=M(Ne),de=S(Ne,"BUTTON",{title:!0,type:!0,class:!0});var Re=G(de);I(Ce.$$.fragment,Re),Re.forEach(_),Ne.forEach(_),$.forEach(_),this.h()},h(){y(t,"class","w-full grid grid-cols-1 md:grid-cols-2 gap-4"),y(c,"class","h3"),y(w,"class","flex flex-col space-y-4"),y(A,"class","h3"),y(q,"class","flex flex-col space-y-4"),y(p,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),y(X,"class","h3"),y(re,"class","p"),y(Q,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),y(Ve,"class","h3"),y(Pe,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),y(qe,"class","h3"),y(we,"class","py-5 w-full grid xs:grid-cols-1 md:grid-cols-2 gap-4"),y(pe,"title","cancel"),y(pe,"type","button"),y(pe,"class","btn variant-filled-warning"),y(de,"title","save"),y(de,"type","submit"),y(de,"class","btn variant-filled-primary"),de.disabled=r[9],y(Se,"class","py-5 grow text-right gap-2")},m(g,$){P(g,e,$),h(e,t),D(n,t,null),h(t,i),D(s,t,null),h(t,o),D(u,t,null),h(e,m),h(e,p),h(p,w),h(w,c),h(w,B),D(C,w,null),h(w,L),W&&W.m(w,null),h(w,E),D(O,w,null),h(p,U),h(p,q),h(q,A),h(q,R),D(ne,q,null),h(e,fe),h(e,X),h(e,z),h(e,re),h(e,_e),h(e,Q),D(ae,Q,null),h(Q,d),D(J,Q,null),h(Q,he),D($e,Q,null),h(Q,xe),D(ve,Q,null),h(e,et),h(e,Ve),h(e,tt),h(e,Pe),D(be,Pe,null),h(e,nt),h(e,qe),h(e,rt),h(e,we),D(ye,we,null),h(we,st),D(ke,we,null),h(e,at),h(e,Se),h(Se,pe),D(Ge,pe,null),h(Se,lt),h(Se,de),D(Ce,de,null),je=!0,it||(dt=[Oe(pe,"click",r[12]),Oe(e,"submit",Zt(r[10]))],it=!0)},p(g,$){const le={};$[0]&256&&(le.valid=g[8].isValid("name")),$[0]&256&&(le.invalid=g[8].hasErrors("name")),$[0]&256&&(le.feedback=g[8].getErrors("name")),!a&&$[0]&128&&(a=!0,le.value=g[7].name,ee(()=>a=!1)),n.$set(le);const ie={};$[0]&8&&(ie.source=g[3]),$[0]&256&&(ie.valid=g[8].isValid("entityType")),$[0]&256&&(ie.invalid=g[8].hasErrors("entityType")),$[0]&256&&(ie.feedback=g[8].getErrors("entityType")),!l&&$[0]&128&&(l=!0,ie.target=g[7].entityType,ee(()=>l=!1)),s.$set(ie);const se={};$[0]&256&&(se.valid=g[8].isValid("description")),$[0]&256&&(se.invalid=g[8].hasErrors("description")),$[0]&256&&(se.feedback=g[8].getErrors("description")),!f&&$[0]&128&&(f=!0,se.value=g[7].description,ee(()=>f=!1)),u.$set(se);const oe={};$[0]&2&&(oe.source=g[1]),$[0]&256&&(oe.valid=g[8].isValid("metadataStructure")),$[0]&256&&(oe.invalid=g[8].hasErrors("metadataStructure")),$[0]&256&&(oe.feedback=g[8].getErrors("metadataStructure")),!j&&$[0]&128&&(j=!0,oe.target=g[7].metadataStructure,ee(()=>j=!1)),C.$set(oe),g[6]?W?(W.p(g,$),$[0]&64&&v(W,1)):(W=Ft(g),W.c(),v(W,1),W.m(w,E)):W&&(Te(),b(W,1,1,()=>{W=null}),Ie());const ue={};$[0]&128|$[1]&32&&(ue.$$scope={dirty:$,ctx:g}),O.$set(ue);const Be={};$[0]&132|$[1]&32&&(Be.$$scope={dirty:$,ctx:g}),ne.$set(Be);const Fe={};$[0]&144|$[1]&32&&(Fe.$$scope={dirty:$,ctx:g}),ae.$set(Fe);const Ne={};$[0]&144|$[1]&32&&(Ne.$$scope={dirty:$,ctx:g}),J.$set(Ne);const Ue={};$[0]&144|$[1]&32&&(Ue.$$scope={dirty:$,ctx:g}),$e.$set(Ue);const Re={};$[0]&144|$[1]&32&&(Re.$$scope={dirty:$,ctx:g}),ve.$set(Re);const ht={};$[0]&144|$[1]&32&&(ht.$$scope={dirty:$,ctx:g}),be.$set(ht);const $t={};$[0]&129|$[1]&32&&($t.$$scope={dirty:$,ctx:g}),ye.$set($t);const vt={};$[0]&160|$[1]&32&&(vt.$$scope={dirty:$,ctx:g}),ke.$set(vt),(!je||$[0]&512)&&(de.disabled=g[9])},i(g){je||(v(n.$$.fragment,g),v(s.$$.fragment,g),v(u.$$.fragment,g),v(C.$$.fragment,g),v(W),v(O.$$.fragment,g),v(ne.$$.fragment,g),v(ae.$$.fragment,g),v(J.$$.fragment,g),v($e.$$.fragment,g),v(ve.$$.fragment,g),v(be.$$.fragment,g),v(ye.$$.fragment,g),v(ke.$$.fragment,g),v(Ge.$$.fragment,g),v(Ce.$$.fragment,g),je=!0)},o(g){b(n.$$.fragment,g),b(s.$$.fragment,g),b(u.$$.fragment,g),b(C.$$.fragment,g),b(W),b(O.$$.fragment,g),b(ne.$$.fragment,g),b(ae.$$.fragment,g),b(J.$$.fragment,g),b($e.$$.fragment,g),b(ve.$$.fragment,g),b(be.$$.fragment,g),b(ye.$$.fragment,g),b(ke.$$.fragment,g),b(Ge.$$.fragment,g),b(Ce.$$.fragment,g),je=!1},d(g){g&&_(e),V(n),V(s),V(u),V(C),W&&W.d(),V(O),V(ne),V(ae),V(J),V($e),V(ve),V(be),V(ye),V(ke),V(Ge),V(Ce),it=!1,At(dt)}}}function ur(r){let e,t,n,a,i;const s=[Jn,Xn],l=[];function o(u,f){return u[7]?0:1}return e=o(r),t=l[e]=s[e](r),a=new Bt({}),{c(){t.c(),n=N(),T(a.$$.fragment)},l(u){t.l(u),n=M(u),I(a.$$.fragment,u)},m(u,f){l[e].m(u,f),P(u,n,f),D(a,u,f),i=!0},p(u,f){let m=e;e=o(u),e===m?l[e].p(u,f):(Te(),b(l[m],1,1,()=>{l[m]=null}),Ie(),t=l[e],t?t.p(u,f):(t=l[e]=s[e](u),t.c()),v(t,1),t.m(n.parentNode,n))},i(u){i||(v(t),v(a.$$.fragment,u),i=!0)},o(u){b(t),b(a.$$.fragment,u),i=!1},d(u){u&&_(n),l[e].d(u),V(a,u)}}}function cr(r,e,t){let n;const a=jt();kt.setHelpItemList(Qn);let{id:i=0}=e,{hooks:s=[]}=e,{metadataStructures:l=[]}=e,{dataStructures:o=[]}=e,u,{entities:f=[]}=e,{groups:m=[]}=e,{filetypes:p}=e;const w=ot();let c;We.reset(),Yt(async()=>{console.log("start entity template",i),H(),console.log("onmount")});async function H(){t(7,c=await Dn(i)),console.log("load entity",c),console.log("load filetypes",p),L("metadataStructure"),i>0&&(t(8,C=We(c)),console.log("validate",C))}async function B(){console.log("before submit",c);const d=await Ln(c);d!=!1&&(console.log("save",d),w("save",d))}let C=We.get();async function j(d){setTimeout(async()=>{t(8,C=We(c,d.target.id))},10),console.log(d.target.id),L(d.target.id)}async function L(d){if(d==="metadataStructure"){let J=0;c.metadataStructure!=null&&(J=c.metadataStructure.id),t(6,u=await Cn(J)),console.log(u)}}function E(){let d="create";i>0&&(d="edit");const J={type:"confirm",title:"Cancel "+d+" entity template",body:"Are you sure you wish to cancel the current form?",response:he=>{he===!0&&w("cancel")}};a.trigger(J)}function O(d){r.$$.not_equal(c.name,d)&&(c.name=d,t(7,c))}function U(d){r.$$.not_equal(c.entityType,d)&&(c.entityType=d,t(7,c))}function q(d){r.$$.not_equal(c.description,d)&&(c.description=d,t(7,c))}function A(d){r.$$.not_equal(c.metadataStructure,d)&&(c.metadataStructure=d,t(7,c))}function K(d){r.$$.not_equal(c.metadataFields,d)&&(c.metadataFields=d,t(7,c))}function R(d){r.$$.not_equal(c.metadataInvalidSaveMode,d)&&(c.metadataInvalidSaveMode=d,t(7,c))}function ne(d){r.$$.not_equal(c.hasDatastructure,d)&&(c.hasDatastructure=d,t(7,c))}function fe(d){r.$$.not_equal(c.datastructureList,d)&&(c.datastructureList=d,t(7,c))}const X=()=>kt.show("hasDatastructure");function F(d){r.$$.not_equal(c.permissionGroups.full,d)&&(c.permissionGroups.full=d,t(7,c))}function z(d){r.$$.not_equal(c.permissionGroups.viewEditGrant,d)&&(c.permissionGroups.viewEditGrant=d,t(7,c))}function re(d){r.$$.not_equal(c.permissionGroups.viewEdit,d)&&(c.permissionGroups.viewEdit=d,t(7,c))}function De(d){r.$$.not_equal(c.permissionGroups.view,d)&&(c.permissionGroups.view=d,t(7,c))}function _e(d){r.$$.not_equal(c.notificationGroups,d)&&(c.notificationGroups=d,t(7,c))}function Q(d){r.$$.not_equal(c.disabledHooks,d)&&(c.disabledHooks=d,t(7,c))}function ae(d){r.$$.not_equal(c.allowedFileTypes,d)&&(c.allowedFileTypes=d,t(7,c))}return r.$$set=d=>{"id"in d&&t(13,i=d.id),"hooks"in d&&t(0,s=d.hooks),"metadataStructures"in d&&t(1,l=d.metadataStructures),"dataStructures"in d&&t(2,o=d.dataStructures),"entities"in d&&t(3,f=d.entities),"groups"in d&&t(4,m=d.groups),"filetypes"in d&&t(5,p=d.filetypes)},r.$$.update=()=>{r.$$.dirty[0]&128,r.$$.dirty[0]&64,r.$$.dirty[0]&256&&t(9,n=!C.isValid())},[s,l,o,f,m,p,u,c,C,n,B,j,E,i,O,U,q,A,K,R,ne,fe,X,F,z,re,De,_e,Q,ae]}class fr extends Xe{constructor(e){super(),Je(this,e,cr,ur,ze,{id:13,hooks:0,metadataStructures:1,dataStructures:2,entities:3,groups:4,filetypes:5},null,[-1,-1])}}function dr(r){let e,t;return e=new an({props:{error:r[18]}}),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},p:Qe,i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function mr(r){let e,t,n,a,i,s;const l=[gr,pr],o=[];function u(p,w){return p[6]?0:1}e=u(r),t=o[e]=l[e](r);function f(p){r[14](p)}let m={};return r[8]!==void 0&&(m.entitytemplates=r[8]),a=new Rn({props:m}),x.push(()=>te(a,"entitytemplates",f)),a.$on("edit",r[12]),{c(){t.c(),n=N(),T(a.$$.fragment)},l(p){t.l(p),n=M(p),I(a.$$.fragment,p)},m(p,w){o[e].m(p,w),P(p,n,w),D(a,p,w),s=!0},p(p,w){let c=e;e=u(p),e===c?o[e].p(p,w):(Te(),b(o[c],1,1,()=>{o[c]=null}),Ie(),t=o[e],t?t.p(p,w):(t=o[e]=l[e](p),t.c()),v(t,1),t.m(n.parentNode,n));const H={};!i&&w&256&&(i=!0,H.entitytemplates=p[8],ee(()=>i=!1)),a.$set(H)},i(p){s||(v(t),v(a.$$.fragment,p),s=!0)},o(p){b(t),b(a.$$.fragment,p),s=!1},d(p){p&&_(n),o[e].d(p),V(a,p)}}}function pr(r){let e,t,n,a,i,s;return n=new Ae({props:{icon:pn}}),{c(){e=k("div"),t=k("button"),T(n.$$.fragment),this.h()},l(l){e=S(l,"DIV",{class:!0});var o=G(e);t=S(o,"BUTTON",{title:!0,type:!0,class:!0});var u=G(t);I(n.$$.fragment,u),u.forEach(_),o.forEach(_),this.h()},h(){y(t,"title","create"),y(t,"type","button"),y(t,"class","btn variant-filled-primary"),y(e,"class","w-screen")},m(l,o){P(l,e,o),h(e,t),D(n,t,null),a=!0,i||(s=Oe(t,"click",r[11]),i=!0)},p:Qe,i(l){a||(v(n.$$.fragment,l),a=!0)},o(l){b(n.$$.fragment,l),a=!1},d(l){l&&_(e),V(n),i=!1,s()}}}function gr(r){let e,t;return e=new fr({props:{id:r[7],hooks:r[0],metadataStructures:r[1],dataStructures:r[2],entities:r[3],groups:r[4],filetypes:r[5]}}),e.$on("save",r[10]),e.$on("cancel",r[13]),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},p(n,a){const i={};a&128&&(i.id=n[7]),a&1&&(i.hooks=n[0]),a&2&&(i.metadataStructures=n[1]),a&4&&(i.dataStructures=n[2]),a&8&&(i.entities=n[3]),a&16&&(i.groups=n[4]),a&32&&(i.filetypes=n[5]),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function _r(r){let e,t,n;return t=new ut({props:{position:Pt.center,label:"loading entity templates"}}),{c(){e=k("div"),T(t.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var i=G(e);I(t.$$.fragment,i),i.forEach(_),this.h()},h(){y(e,"class","text-surface-800")},m(a,i){P(a,e,i),D(t,e,null),n=!0},p:Qe,i(a){n||(v(t.$$.fragment,a),n=!0)},o(a){b(t.$$.fragment,a),n=!1},d(a){a&&_(e),V(t)}}}function hr(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!0,pending:_r,then:mr,catch:dr,value:17,error:18,blocks:[,,,]};return rn(r[9](),n),{c(){e=Ye(),n.block.c()},l(a){e=Ye(),n.block.l(a)},m(a,i){P(a,e,i),n.block.m(a,n.anchor=i),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(a,i){r=a,sn(n,r,i)},i(a){t||(v(n.block),t=!0)},o(a){for(let i=0;i<3;i+=1){const s=n.blocks[i];b(s)}t=!1},d(a){a&&_(e),n.block.d(a),n.token=null,n=null}}}function $r(r){let e,t;return e=new mn({props:{title:"Entity Templates",note:"On this page you can edit entity template.",help:!0,$$slots:{default:[hr]},$$scope:{ctx:r}}}),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,a){D(e,n,a),t=!0},p(n,[a]){const i={};a&524799&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function vr(r,e,t){let n,a;xt(r,Le,j=>t(8,a=j));let i=[],s=[],l=[],o=[],u=[],f=[],m=!1;async function p(){t(0,i=await Nn()),console.log("hooks",i),t(1,s=await Gn()),t(2,l=await Fn()),t(3,o=await qn()),t(4,u=await Mn()),t(5,f=await Hn()),Le.set(await Vn())}async function w(j){const L=j.detail;yt(Le,a=a.filter(E=>E.id!==L.id),a),yt(Le,a=[...a,L],a),t(6,m=!1)}async function c(){t(7,n=0),t(6,m=!m)}async function H(j){""+j.detail,t(6,m=!1),setTimeout(async()=>{t(7,n=j.detail),t(6,m=!0)},500)}const B=()=>t(6,m=!1);function C(j){a=j,Le.set(a)}return t(7,n=0),[i,s,l,o,u,f,m,n,a,p,w,c,H,B,C]}class Cr extends Xe{constructor(e){super(),Je(this,e,vr,$r,ze,{})}}export{Cr as component};
