import{A as ie,p as vt,d as st}from"../chunks/eslint4b.es.3a44f70d.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.684c05eb.js";import{S as Be,i as je,s as Pe,y as q,z as F,A as M,g as $,d as v,B as N,Q as We,C as yt,k as E,q as J,a as C,l as T,m as D,r as Q,h as p,c as G,n as k,b as B,G as _,u as be,v as ve,f as ye,D as wt,E as kt,F as St,J as lt,K as qe,P as Ht,H as Me,a8 as Ot,R as Lt,e as Re,T as At,U as Ct,ae as Gt,L as Et,a5 as it,o as Bt,w as re,V as ne,X as jt,W as ae,I as Pt,ag as Ut,ah as Kt,ab as ot}from"../chunks/index.8af2c804.js";import{F as Fe,J as Rt,K as zt,z as Jt,I as Qt,a as Xt,D as Wt,P as Yt,B as Zt}from"../chunks/Page.242fe422.js";import{S as Ye}from"../chunks/Spinner.ad25fb56.js";import{a as Tt,D as ut,M as He,E as xt}from"../chunks/MultiSelect.a4167a6a.js";import{g as Dt}from"../chunks/stores.b6e4a33c.js";import{C as It,K as er,V as tr,v as Ge,w as De,T as rr}from"../chunks/vest.production.149b3eca.js";import{S as Vt}from"../chunks/SlideToggle.79c9f709.js";import{T as nr}from"../chunks/TextInput.add658f8.js";import{w as ar}from"../chunks/index.d5bc7278.js";function sr(){return{}}const pn=Object.freeze(Object.defineProperty({__proto__:null,load:sr},Symbol.toStringTag,{value:"Module"}));function ct(n,e,t){const r=n.slice();return r[12]=e[t],r}function ft(n){let e,t;return{c(){e=E("span"),t=J("in use"),this.h()},l(r){e=T(r,"SPAN",{class:!0});var a=D(e);t=Q(a,"in use"),a.forEach(p),this.h()},h(){k(e,"class","badge variant-filled-error")},m(r,a){B(r,e,a),_(e,t)},d(r){r&&p(e)}}}function dt(n){let e,t;return{c(){e=E("blockquote"),t=J(n[1]),this.h()},l(r){e=T(r,"BLOCKQUOTE",{class:!0});var a=D(e);t=Q(a,n[1]),a.forEach(p),this.h()},h(){k(e,"class","blockquote mb-5")},m(r,a){B(r,e,a),_(e,t)},p(r,a){a&2&&be(t,r[1])},d(r){r&&p(e)}}}function mt(n){let e,t,r,a,i=n[5].join(", ")+"",s;return{c(){e=E("div"),t=E("i"),r=J("Restricted to these file types: "),a=E("b"),s=J(i)},l(l){e=T(l,"DIV",{});var o=D(e);t=T(o,"I",{});var u=D(t);r=Q(u,"Restricted to these file types: "),a=T(u,"B",{});var f=D(a);s=Q(f,i),f.forEach(p),u.forEach(p),o.forEach(p)},m(l,o){B(l,e,o),_(e,t),_(t,r),_(t,a),_(a,s)},p(l,o){o&32&&i!==(i=l[5].join(", ")+"")&&be(s,i)},d(l){l&&p(e)}}}function pt(n){let e,t,r=n[2].text+"",a,i,s,l,o,u,f,d,m,y,c;const H=[ir,lr],j=[];function V(w,O){return w[6]?0:1}l=V(n),o=j[l]=H[l](n);let P=n[4],L=[];for(let w=0;w<P.length;w+=1)L[w]=gt(ct(n,P,w));return{c(){e=E("i"),t=J("Show linked "),a=J(r),i=J(`:
				`),s=E("button"),o.c(),u=C(),f=E("div"),d=E("ul");for(let w=0;w<L.length;w+=1)L[w].c();this.h()},l(w){e=T(w,"I",{});var O=D(e);t=Q(O,"Show linked "),a=Q(O,r),i=Q(O,`:
				`),s=T(O,"BUTTON",{class:!0});var U=D(s);o.l(U),U.forEach(p),O.forEach(p),u=G(w),f=T(w,"DIV",{});var I=D(f);d=T(I,"UL",{class:!0});var A=D(d);for(let K=0;K<L.length;K+=1)L[K].l(A);A.forEach(p),I.forEach(p),this.h()},h(){k(s,"class","btn-icon"),k(d,"class","ul list-disc pl-5"),lt(f,"hidden",n[6])},m(w,O){B(w,e,O),_(e,t),_(e,a),_(e,i),_(e,s),j[l].m(s,null),B(w,u,O),B(w,f,O),_(f,d);for(let U=0;U<L.length;U+=1)L[U]&&L[U].m(d,null);m=!0,y||(c=qe(s,"click",n[9]),y=!0)},p(w,O){(!m||O&4)&&r!==(r=w[2].text+"")&&be(a,r);let U=l;if(l=V(w),l===U?j[l].p(w,O):(ve(),v(j[U],1,1,()=>{j[U]=null}),ye(),o=j[l],o?o.p(w,O):(o=j[l]=H[l](w),o.c()),$(o,1),o.m(s,null)),O&16){P=w[4];let I;for(I=0;I<P.length;I+=1){const A=ct(w,P,I);L[I]?L[I].p(A,O):(L[I]=gt(A),L[I].c(),L[I].m(d,null))}for(;I<L.length;I+=1)L[I].d(1);L.length=P.length}(!m||O&64)&&lt(f,"hidden",w[6])},i(w){m||($(o),m=!0)},o(w){v(o),m=!1},d(w){w&&p(e),j[l].d(),w&&p(u),w&&p(f),Ht(L,w),y=!1,c()}}}function lr(n){let e,t;return e=new Fe({props:{icon:Rt}}),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function ir(n){let e,t;return e=new Fe({props:{icon:zt}}),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function gt(n){let e,t=n[12].text+"",r,a,i=n[12].id+"",s,l;return{c(){e=E("li"),r=J(t),a=J(" ("),s=J(i),l=J(")")},l(o){e=T(o,"LI",{});var u=D(e);r=Q(u,t),a=Q(u," ("),s=Q(u,i),l=Q(u,")"),u.forEach(p)},m(o,u){B(o,e,u),_(e,r),_(e,a),_(e,s),_(e,l)},p(o,u){u&16&&t!==(t=o[12].text+"")&&be(r,t),u&16&&i!==(i=o[12].id+"")&&be(s,i)},d(o){o&&p(e)}}}function or(n){let e;return{c(){e=J("no action setup")},l(t){e=Q(t,"no action setup")},m(t,r){B(t,e,r)},d(t){t&&p(e)}}}function ur(n){let e,t,r,a,i,s,l,o,u,f=n[3].text+"",d,m,y,c=n[2].text+"",H,j,V,P,L,w,O,U,I=n[4].length>0&&ft(),A=n[1]&&dt(n),K=n[5].length>0&&mt(n),R=n[4].length>0&&pt(n);const x=n[8].default,oe=yt(x,n,n[10],null),Y=oe||or();return{c(){e=E("header"),t=E("div"),r=E("div"),a=E("h2"),i=J(n[0]),s=C(),l=E("div"),I&&I.c(),o=C(),u=E("span"),d=J(f),m=C(),y=E("span"),H=J(c),j=C(),V=E("div"),A&&A.c(),P=C(),K&&K.c(),L=C(),R&&R.c(),w=C(),O=E("footer"),Y&&Y.c(),this.h()},l(S){e=T(S,"HEADER",{class:!0});var z=D(e);t=T(z,"DIV",{class:!0});var Z=D(t);r=T(Z,"DIV",{class:!0});var te=D(r);a=T(te,"H2",{class:!0});var g=D(a);i=Q(g,n[0]),g.forEach(p),te.forEach(p),s=G(Z),l=T(Z,"DIV",{class:!0});var X=D(l);I&&I.l(X),o=G(X),u=T(X,"SPAN",{class:!0});var pe=D(u);d=Q(pe,f),pe.forEach(p),m=G(X),y=T(X,"SPAN",{class:!0});var fe=D(y);H=Q(fe,c),fe.forEach(p),X.forEach(p),Z.forEach(p),z.forEach(p),j=G(S),V=T(S,"DIV",{class:!0});var ue=D(V);A&&A.l(ue),P=G(ue),K&&K.l(ue),L=G(ue),R&&R.l(ue),ue.forEach(p),w=G(S),O=T(S,"FOOTER",{class:!0});var Ne=D(O);Y&&Y.l(Ne),Ne.forEach(p),this.h()},h(){k(a,"class","h2"),k(r,"class","grow text-left"),k(u,"class","badge variant-filled-surface"),k(y,"class","badge variant-filled-secondary"),k(l,"class","grow-0 w-42 text-right"),k(t,"class","flex"),k(e,"class","card-header"),k(V,"class","p-4 grow"),k(O,"class","card-footer")},m(S,z){B(S,e,z),_(e,t),_(t,r),_(r,a),_(a,i),_(t,s),_(t,l),I&&I.m(l,null),_(l,o),_(l,u),_(u,d),_(l,m),_(l,y),_(y,H),B(S,j,z),B(S,V,z),A&&A.m(V,null),_(V,P),K&&K.m(V,null),_(V,L),R&&R.m(V,null),B(S,w,z),B(S,O,z),Y&&Y.m(O,null),U=!0},p(S,z){(!U||z&1)&&be(i,S[0]),S[4].length>0?I||(I=ft(),I.c(),I.m(l,o)):I&&(I.d(1),I=null),(!U||z&8)&&f!==(f=S[3].text+"")&&be(d,f),(!U||z&4)&&c!==(c=S[2].text+"")&&be(H,c),S[1]?A?A.p(S,z):(A=dt(S),A.c(),A.m(V,P)):A&&(A.d(1),A=null),S[5].length>0?K?K.p(S,z):(K=mt(S),K.c(),K.m(V,L)):K&&(K.d(1),K=null),S[4].length>0?R?(R.p(S,z),z&16&&$(R,1)):(R=pt(S),R.c(),$(R,1),R.m(V,null)):R&&(ve(),v(R,1,1,()=>{R=null}),ye()),oe&&oe.p&&(!U||z&1024)&&wt(oe,x,S,S[10],U?St(x,S[10],z,null):kt(S[10]),null)},i(S){U||($(R),$(Y,S),U=!0)},o(S){v(R),v(Y,S),U=!1},d(S){S&&p(e),I&&I.d(),S&&p(j),S&&p(V),A&&A.d(),K&&K.d(),R&&R.d(),S&&p(w),S&&p(O),Y&&Y.d(S)}}}function cr(n){let e,t;return e=new It({props:{$$slots:{default:[ur]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&1151&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function fr(n,e,t){let{$$slots:r={},$$scope:a}=e,{id:i}=e,{name:s=""}=e,{description:l=""}=e,{entityType:o}=e,{metadataStructure:u}=e,{linkedSubjects:f=[]}=e,{allowedFileTypes:d=[]}=e,m=!0;We();const y=()=>t(6,m=!m);return n.$$set=c=>{"id"in c&&t(7,i=c.id),"name"in c&&t(0,s=c.name),"description"in c&&t(1,l=c.description),"entityType"in c&&t(2,o=c.entityType),"metadataStructure"in c&&t(3,u=c.metadataStructure),"linkedSubjects"in c&&t(4,f=c.linkedSubjects),"allowedFileTypes"in c&&t(5,d=c.allowedFileTypes),"$$scope"in c&&t(10,a=c.$$scope)},[s,l,o,u,f,d,m,i,r,y,a]}class dr extends Be{constructor(e){super(),je(this,e,fr,cr,Pe,{id:7,name:0,description:1,entityType:2,metadataStructure:3,linkedSubjects:4,allowedFileTypes:5})}}const mr=async n=>{try{return(await ie.get("/dcm/entitytemplates/Get?id="+n)).data}catch(e){throw console.error(e),e}},pr=async()=>{try{return(await ie.get("/dcm/entitytemplates/Load")).data}catch(n){throw console.error(n),n}},gr=async()=>{try{return(await ie.get("/dcm/entitytemplates/Entities")).data}catch(n){throw console.error(n),n}},_r=async()=>{try{return(await ie.get("/dcm/entitytemplates/MetadataStructures")).data}catch(n){throw console.error(n),n}},hr=async n=>{try{return(await ie.get("/dcm/entitytemplates/SystemKeys?metadataStructureId="+n)).data}catch(e){throw console.error(e),e}},$r=async()=>{try{return(await ie.get("/dcm/entitytemplates/DataStructures")).data}catch(n){throw console.error(n),n}},br=async()=>{try{return(await ie.get("/dcm/entitytemplates/Hooks")).data}catch(n){throw console.error(n),n}},vr=async()=>{try{return(await ie.get("/dcm/entitytemplates/Groups")).data}catch(n){throw console.error(n),n}},yr=async()=>{try{return(await ie.get("/dcm/entitytemplates/FileTypes")).data}catch(n){throw console.error(n),n}},wr=async n=>{try{return(await ie.post("/dcm/entitytemplates/Update",n)).data}catch(e){throw console.error(e),e}},kr=async n=>{try{return(await ie.delete("/dcm/entitytemplates/Delete",{id:n})).data}catch(e){throw console.error(e),e}};function _t(n,e,t){const r=n.slice();return r[8]=e[t],r[10]=t,r}function Sr(n){let e,t,r;return t=new Ye({props:{position:vt.center,label:"loading entity templates"}}),{c(){e=E("div"),q(t.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0});var i=D(e);F(t.$$.fragment,i),i.forEach(p),this.h()},h(){k(e,"class","text-surface-800")},m(a,i){B(a,e,i),M(t,e,null),r=!0},p:Me,i(a){r||($(t.$$.fragment,a),r=!0)},o(a){v(t.$$.fragment,a),r=!1},d(a){a&&p(e),N(t)}}}function Er(n){let e,t=[],r=new Map,a,i=n[0];const s=l=>l[8].id;for(let l=0;l<i.length;l+=1){let o=_t(n,i,l),u=s(o);r.set(u,t[l]=ht(u,o))}return{c(){e=E("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=T(l,"DIV",{class:!0});var o=D(e);for(let u=0;u<t.length;u+=1)t[u].l(o);o.forEach(p),this.h()},h(){k(e,"class","py-5 w-full grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(l,o){B(l,e,o);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);a=!0},p(l,o){o&7&&(i=l[0],ve(),t=Ot(t,o,s,1,l,i,r,e,Gt,ht,null,_t),ye())},i(l){if(!a){for(let o=0;o<i.length;o+=1)$(t[o]);a=!0}},o(l){for(let o=0;o<t.length;o+=1)v(t[o]);a=!1},d(l){l&&p(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Tr(n){let e,t,r,a,i,s,l,o,u,f,d,m;a=new Fe({props:{icon:Jt}});function y(){return n[3](n[10],n[8])}o=new Fe({props:{icon:Qt}});function c(){return n[4](n[8])}return{c(){e=E("div"),t=E("div"),r=E("button"),q(a.$$.fragment),s=C(),l=E("button"),q(o.$$.fragment),u=C(),this.h()},l(H){e=T(H,"DIV",{class:!0});var j=D(e);t=T(j,"DIV",{class:!0});var V=D(t);r=T(V,"BUTTON",{title:!0,class:!0});var P=D(r);F(a.$$.fragment,P),P.forEach(p),s=G(V),l=T(V,"BUTTON",{title:!0,class:!0});var L=D(l);F(o.$$.fragment,L),L.forEach(p),V.forEach(p),j.forEach(p),u=G(H),this.h()},h(){k(r,"title","delete"),k(r,"class","btn variant-filled-error"),r.disabled=i=n[8].linkedSubjects.length>0,k(l,"title","edit"),k(l,"class","btn variant-filled-primary"),k(t,"class","grow text-right gap-2"),k(e,"class","flex h-full justify-end")},m(H,j){B(H,e,j),_(e,t),_(t,r),M(a,r,null),_(t,s),_(t,l),M(o,l,null),B(H,u,j),f=!0,d||(m=[qe(r,"click",y),qe(l,"click",c)],d=!0)},p(H,j){n=H,(!f||j&1&&i!==(i=n[8].linkedSubjects.length>0))&&(r.disabled=i)},i(H){f||($(a.$$.fragment,H),$(o.$$.fragment,H),f=!0)},o(H){v(a.$$.fragment,H),v(o.$$.fragment,H),f=!1},d(H){H&&p(e),N(a),N(o),H&&p(u),d=!1,Et(m)}}}function ht(n,e){let t,r,a;const i=[e[8]];let s={$$slots:{default:[Tr]},$$scope:{ctx:e}};for(let l=0;l<i.length;l+=1)s=Lt(s,i[l]);return r=new dr({props:s}),{key:n,first:null,c(){t=Re(),q(r.$$.fragment),this.h()},l(l){t=Re(),F(r.$$.fragment,l),this.h()},h(){this.first=t},m(l,o){B(l,t,o),M(r,l,o),a=!0},p(l,o){e=l;const u=o&1?At(i,[Ct(e[8])]):{};o&2049&&(u.$$scope={dirty:o,ctx:e}),r.$set(u)},i(l){a||($(r.$$.fragment,l),a=!0)},o(l){v(r.$$.fragment,l),a=!1},d(l){l&&p(t),N(r,l)}}}function Dr(n){let e,t,r,a,i;const s=[Er,Sr],l=[];function o(u,f){return u[0]?0:1}return e=o(n),t=l[e]=s[e](n),a=new Tt({}),{c(){t.c(),r=C(),q(a.$$.fragment)},l(u){t.l(u),r=G(u),F(a.$$.fragment,u)},m(u,f){l[e].m(u,f),B(u,r,f),M(a,u,f),i=!0},p(u,[f]){let d=e;e=o(u),e===d?l[e].p(u,f):(ve(),v(l[d],1,1,()=>{l[d]=null}),ye(),t=l[e],t?t.p(u,f):(t=l[e]=s[e](u),t.c()),$(t,1),t.m(r.parentNode,r))},i(u){i||($(t),$(a.$$.fragment,u),i=!0)},o(u){v(t),v(a.$$.fragment,u),i=!1},d(u){l[e].d(u),u&&p(r),N(a,u)}}}function Ir(n,e,t){const r=Dt(),a=We();let{entitytemplates:i}=e;function s(d){console.log("edit",d),a("edit",d)}function l(d,m){const y={type:"confirm",title:"Please Confirm",body:"Are you sure you wish to remove?",response:c=>{c&&o(d,m)}};r.trigger(y)}async function o(d,m){console.log(d,m);const y=await kr(m);console.log(y),y===!0&&t(0,i=i.filter((c,H)=>H!==d))}const u=(d,m)=>l(d,m.id),f=d=>s(d.id);return n.$$set=d=>{"entitytemplates"in d&&t(0,i=d.entitytemplates)},[i,s,l,u,f]}class Vr extends Be{constructor(e){super(),je(this,e,Ir,Dr,Pe,{entitytemplates:0})}}function qr(n){let e,t,r;const a=n[1].default,i=yt(a,n,n[0],null);return{c(){e=E("div"),t=E("div"),i&&i.c(),this.h()},l(s){e=T(s,"DIV",{class:!0});var l=D(e);t=T(l,"DIV",{class:!0});var o=D(t);i&&i.l(o),o.forEach(p),l.forEach(p),this.h()},h(){k(t,"class","col-span-10"),k(e,"class","grid grid-cols-10 items-end")},m(s,l){B(s,e,l),_(e,t),i&&i.m(t,null),r=!0},p(s,[l]){i&&i.p&&(!r||l&1)&&wt(i,a,s,s[0],r?St(a,s[0],l,null):kt(s[0]),null)},i(s){r||($(i,s),r=!0)},o(s){v(i,s),r=!1},d(s){s&&p(e),i&&i.d(s)}}}function Fr(n,e,t){let{$$slots:r={},$$scope:a}=e;return n.$$set=i=>{"$$scope"in i&&t(0,a=i.$$scope)},[a,r]}class Ie extends Be{constructor(e){super(),je(this,e,Fr,qr,Pe,{})}}const Ve=ar([]),Ke=er((n={},e)=>{tr(e),Ge("name","name is required",()=>{De(n.name).isNotBlank()}),Ge("name","name allready exist",()=>{const t=n.id>0?it(Ve).find(a=>a.id==n.id):{id:0,name:""},r=it(Ve).map(a=>a.name!=t.name?a.name:"");return De(n.name).notInside(r)}),Ge("description","description is required",()=>{De(n.description).isNotBlank()}),Ge("metadataStructure","metadatastructure is required",()=>{De(n.metadataStructure).isNotNull(),De(n.metadataStructure).isNotUndefined()}),Ge("entityType","entity is required",()=>{De(n.entityType).isNotNull(),De(n.entityType).isNotUndefined()})}),Mr=[{id:"name",name:"Template Name",description:"Enter a unique name for the entity template."},{id:"entityType",name:"Entity Type",description:"This template belongs to which type of entity?"},{id:"description",name:"Description",description:"Template description helps other people to choose the correct one."},{id:"metadataStructure",name:"Metadata Schema",description:"Metadata schema the dataset is based on."},{id:"metadataFields",name:"Metadata input fields",description:"Set the minimum required information for your dataset.The user must fill this field(s) before the creation of a dataset can start. The listed items (system keys) must be mapped against the selected metadata schema.That is why they are grouped in mapped and unmapped."},{id:"invalidSaveMode",name:"Invalid Save Mode",description:"If the user should be able to save metadata with empty required fields, this option needs to be activated."},{id:"permissions",name:"Permissions",description:"Select the group(s) that will automatically get full access after creating the dataset."},{id:"notification",name:"Notification",description:"Select the group(s) to be notified when something is changed."},{id:"disabledHooks",name:"Disable dataset components",description:"Select components/features that should not be displayed during editing and display of a dataset."},{id:"allowedFileTypes",name:"Restrict allowed file type for upload",description:"Select file types that are allowed during file upload."},{id:"hasDatastructure",name:"Options for data structures",description:'<u>1. active vs not active</u><ul class="ul list-disc p-5"><li><b>active data structure</b> - tabular data will be uploaded</li><li><b>deactivate</b> - files will be uploaded directly and will not be processed further. Select features that should not be displayed during editing and display.</li></ul><u>2. selection or not</u><ul class="ul list-disc p-5"><li> If you activate data structure, you can define a selection of data structures from the system.</li><li>selected - only these structures can be used later, not selected - new structures can be selected.</li></ul>'}];function Nr(n){let e,t;return e=new Ye({props:{textCss:"text-secondary-500"}}),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Hr(n){let e,t;return e=new It({props:{$$slots:{default:[Kr]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,a){const i={};a[0]&1023|a[1]&4&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function $t(n){let e,t;return e=new Ie({props:{$$slots:{default:[Or]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,a){const i={};a[0]&192|a[1]&4&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Or(n){let e,t,r;function a(s){n[18](s)}let i={id:"metadataFields",title:"Required Fields",source:n[6],itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,help:!0};return n[7].metadataFields!==void 0&&(i.target=n[7].metadataFields),e=new He({props:i}),re.push(()=>ne(e,"target",a)),{c(){q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){M(e,s,l),r=!0},p(s,l){const o={};l[0]&64&&(o.source=s[6]),!t&&l[0]&128&&(t=!0,o.target=s[7].metadataFields,ae(()=>t=!1)),e.$set(o)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function Lr(n){let e;return{c(){e=J("Allow saving with empty required fields")},l(t){e=Q(t,"Allow saving with empty required fields")},m(t,r){B(t,e,r)},d(t){t&&p(e)}}}function Ar(n){let e,t,r,a,i;function s(o){n[19](o)}let l={name:"Invalid-save-mode",$$slots:{default:[Lr]},$$scope:{ctx:n}};return n[7].metadataInvalidSaveMode!==void 0&&(l.value=n[7].metadataInvalidSaveMode),r=new Vt({props:l}),re.push(()=>ne(r,"value",s)),{c(){e=E("div"),t=C(),q(r.$$.fragment),this.h()},l(o){e=T(o,"DIV",{id:!0}),D(e).forEach(p),t=G(o),F(r.$$.fragment,o),this.h()},h(){k(e,"id","invalidSaveMode")},m(o,u){B(o,e,u),B(o,t,u),M(r,o,u),i=!0},p(o,u){const f={};u[1]&4&&(f.$$scope={dirty:u,ctx:o}),!a&&u[0]&128&&(a=!0,f.value=o[7].metadataInvalidSaveMode,ae(()=>a=!1)),r.$set(f)},i(o){i||($(r.$$.fragment,o),i=!0)},o(o){v(r.$$.fragment,o),i=!1},d(o){o&&p(e),o&&p(t),N(r,o)}}}function Cr(n){let e;return{c(){e=J("Allow to use data structures")},l(t){e=Q(t,"Allow to use data structures")},m(t,r){B(t,e,r)},d(t){t&&p(e)}}}function bt(n){let e,t,r;function a(s){n[21](s)}let i={id:"datastructures",title:"Limit the selection of allowed data structures",source:n[2],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return n[7].datastructureList!==void 0&&(i.target=n[7].datastructureList),e=new He({props:i}),re.push(()=>ne(e,"target",a)),{c(){q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){M(e,s,l),r=!0},p(s,l){const o={};l[0]&4&&(o.source=s[2]),!t&&l[0]&128&&(t=!0,o.target=s[7].datastructureList,ae(()=>t=!1)),e.$set(o)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function Gr(n){let e,t,r,a,i,s,l;function o(d){n[20](d)}let u={name:"use_data_structure",$$slots:{default:[Cr]},$$scope:{ctx:n}};n[7].hasDatastructure!==void 0&&(u.checked=n[7].hasDatastructure),t=new Vt({props:u}),re.push(()=>ne(t,"checked",o));let f=n[7].hasDatastructure&&bt(n);return{c(){e=E("div"),q(t.$$.fragment),a=C(),f&&f.c(),this.h()},l(d){e=T(d,"DIV",{class:!0});var m=D(e);F(t.$$.fragment,m),a=G(m),f&&f.l(m),m.forEach(p),this.h()},h(){k(e,"class","mt-7 space-y-5")},m(d,m){B(d,e,m),M(t,e,null),_(e,a),f&&f.m(e,null),i=!0,s||(l=qe(e,"mouseover",n[22]),s=!0)},p(d,m){const y={};m[1]&4&&(y.$$scope={dirty:m,ctx:d}),!r&&m[0]&128&&(r=!0,y.checked=d[7].hasDatastructure,ae(()=>r=!1)),t.$set(y),d[7].hasDatastructure?f?(f.p(d,m),m[0]&128&&$(f,1)):(f=bt(d),f.c(),$(f,1),f.m(e,null)):f&&(ve(),v(f,1,1,()=>{f=null}),ye())},i(d){i||($(t.$$.fragment,d),$(f),i=!0)},o(d){v(t.$$.fragment,d),v(f),i=!1},d(d){d&&p(e),N(t),f&&f.d(),s=!1,l()}}}function Br(n){let e,t,r;function a(s){n[23](s)}let i={id:"permissions",title:"Set full permissions per default to the following groups",source:n[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return n[7].permissionGroups!==void 0&&(i.target=n[7].permissionGroups),e=new He({props:i}),re.push(()=>ne(e,"target",a)),{c(){q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){M(e,s,l),r=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups,ae(()=>t=!1)),e.$set(o)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function jr(n){let e,t,r;function a(s){n[24](s)}let i={id:"notification",title:"Send notifications per default to the following groups",source:n[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return n[7].notificationGroups!==void 0&&(i.target=n[7].notificationGroups),e=new He({props:i}),re.push(()=>ne(e,"target",a)),{c(){q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){M(e,s,l),r=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].notificationGroups,ae(()=>t=!1)),e.$set(o)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function Pr(n){let e,t,r;function a(s){n[25](s)}let i={id:"disabledHooks",title:"Disable dataset components",source:n[0],help:!0};return n[7].disabledHooks!==void 0&&(i.target=n[7].disabledHooks),e=new He({props:i}),re.push(()=>ne(e,"target",a)),{c(){q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){M(e,s,l),r=!0},p(s,l){const o={};l[0]&1&&(o.source=s[0]),!t&&l[0]&128&&(t=!0,o.target=s[7].disabledHooks,ae(()=>t=!1)),e.$set(o)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function Ur(n){let e,t,r;function a(s){n[26](s)}let i={id:"allowedFileTypes",title:"Restrict allowed file types for file upload",source:n[5],help:!0};return n[7].allowedFileTypes!==void 0&&(i.target=n[7].allowedFileTypes),e=new He({props:i}),re.push(()=>ne(e,"target",a)),{c(){q(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){M(e,s,l),r=!0},p(s,l){const o={};l[0]&32&&(o.source=s[5]),!t&&l[0]&128&&(t=!0,o.target=s[7].allowedFileTypes,ae(()=>t=!1)),e.$set(o)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function Kr(n){let e,t,r,a,i,s,l,o,u,f,d,m,y,c,H,j,V,P,L,w,O,U,I,A,K,R,x,oe,Y,S,z,Z,te,g,X,pe,fe,ue,Ne,ge,_e,ze,he,Je,$e,de,we,Qe,ce,ke,Oe,Xe,Ze;function qt(h){n[14](h)}let xe={id:"name",label:"Template Name",valid:n[8].isValid("name"),invalid:n[8].hasErrors("name"),feedback:n[8].getErrors("name"),required:!0,placeholder:"Define a unique content-related name for your template.",help:!0};n[7].name!==void 0&&(xe.value=n[7].name),r=new nr({props:xe}),re.push(()=>ne(r,"value",qt)),r.$on("input",n[11]);function Ft(h){n[15](h)}let et={id:"entityType",title:"Entity Type",required:!0,source:n[3],valid:n[8].isValid("entityType"),invalid:n[8].hasErrors("entityType"),feedback:n[8].getErrors("entityType"),complexTarget:!0,help:!0};n[7].entityType!==void 0&&(et.target=n[7].entityType),s=new ut({props:et}),re.push(()=>ne(s,"target",Ft)),s.$on("change",n[11]);function Mt(h){n[16](h)}let tt={id:"description",label:"Description",valid:n[8].isValid("description"),invalid:n[8].hasErrors("description"),feedback:n[8].getErrors("description"),required:!0,placeholder:"Briefly describe in which cases this template should be used. Based on an entity or use case.",help:!0};n[7].description!==void 0&&(tt.value=n[7].description),u=new rr({props:tt}),re.push(()=>ne(u,"value",Mt)),u.$on("input",n[11]);function Nt(h){n[17](h)}let rt={id:"metadataStructure",title:"Metadata Schema",source:n[1],valid:n[8].isValid("metadataStructure"),invalid:n[8].hasErrors("metadataStructure"),feedback:n[8].getErrors("metadataStructure"),complexTarget:!0,required:!0,help:!0};n[7].metadataStructure!==void 0&&(rt.target=n[7].metadataStructure),V=new ut({props:rt}),re.push(()=>ne(V,"target",Nt)),V.$on("change",n[11]);let W=n[6]&&$t(n);return O=new Ie({props:{$$slots:{default:[Ar]},$$scope:{ctx:n}}}),x=new Ie({props:{$$slots:{default:[Gr]},$$scope:{ctx:n}}}),te=new Ie({props:{$$slots:{default:[Br]},$$scope:{ctx:n}}}),X=new Ie({props:{$$slots:{default:[jr]},$$scope:{ctx:n}}}),_e=new Ie({props:{$$slots:{default:[Pr]},$$scope:{ctx:n}}}),he=new Ie({props:{$$slots:{default:[Ur]},$$scope:{ctx:n}}}),we=new Fe({props:{icon:Xt}}),ke=new Fe({props:{icon:Wt}}),{c(){e=E("form"),t=E("div"),q(r.$$.fragment),i=C(),q(s.$$.fragment),o=C(),q(u.$$.fragment),d=C(),m=E("div"),y=E("div"),c=E("h3"),H=J("Metadata"),j=C(),q(V.$$.fragment),L=C(),W&&W.c(),w=C(),q(O.$$.fragment),U=C(),I=E("div"),A=E("h3"),K=J("Data Structure"),R=C(),q(x.$$.fragment),oe=C(),Y=E("h3"),S=J("Administration"),z=C(),Z=E("div"),q(te.$$.fragment),g=C(),q(X.$$.fragment),pe=C(),fe=E("h3"),ue=J("Dataset Settings"),Ne=C(),ge=E("div"),q(_e.$$.fragment),ze=C(),q(he.$$.fragment),Je=C(),$e=E("div"),de=E("button"),q(we.$$.fragment),Qe=C(),ce=E("button"),q(ke.$$.fragment),this.h()},l(h){e=T(h,"FORM",{});var b=D(e);t=T(b,"DIV",{class:!0});var se=D(t);F(r.$$.fragment,se),i=G(se),F(s.$$.fragment,se),o=G(se),F(u.$$.fragment,se),se.forEach(p),d=G(b),m=T(b,"DIV",{class:!0});var le=D(m);y=T(le,"DIV",{class:!0});var ee=D(y);c=T(ee,"H3",{class:!0});var me=D(c);H=Q(me,"Metadata"),me.forEach(p),j=G(ee),F(V.$$.fragment,ee),L=G(ee),W&&W.l(ee),w=G(ee),F(O.$$.fragment,ee),ee.forEach(p),U=G(le),I=T(le,"DIV",{class:!0});var Se=D(I);A=T(Se,"H3",{class:!0});var Le=D(A);K=Q(Le,"Data Structure"),Le.forEach(p),R=G(Se),F(x.$$.fragment,Se),Se.forEach(p),le.forEach(p),oe=G(b),Y=T(b,"H3",{class:!0});var Ae=D(Y);S=Q(Ae,"Administration"),Ae.forEach(p),z=G(b),Z=T(b,"DIV",{class:!0});var Ee=D(Z);F(te.$$.fragment,Ee),g=G(Ee),F(X.$$.fragment,Ee),Ee.forEach(p),pe=G(b),fe=T(b,"H3",{class:!0});var Ce=D(fe);ue=Q(Ce,"Dataset Settings"),Ce.forEach(p),Ne=G(b),ge=T(b,"DIV",{class:!0});var Te=D(ge);F(_e.$$.fragment,Te),ze=G(Te),F(he.$$.fragment,Te),Te.forEach(p),Je=G(b),$e=T(b,"DIV",{class:!0});var Ue=D($e);de=T(Ue,"BUTTON",{title:!0,type:!0,class:!0});var nt=D(de);F(we.$$.fragment,nt),nt.forEach(p),Qe=G(Ue),ce=T(Ue,"BUTTON",{title:!0,type:!0,class:!0});var at=D(ce);F(ke.$$.fragment,at),at.forEach(p),Ue.forEach(p),b.forEach(p),this.h()},h(){k(t,"class","w-full grid grid-cols-1 md:grid-cols-2 gap-4"),k(c,"class","h3"),k(y,"class","flex flex-col space-y-4"),k(A,"class","h3"),k(I,"class","flex flex-col space-y-4"),k(m,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),k(Y,"class","h3"),k(Z,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),k(fe,"class","h3"),k(ge,"class","py-5 w-full grid xs:grid-cols-1 md:grid-cols-2 gap-4"),k(de,"title","cancel"),k(de,"type","button"),k(de,"class","btn variant-filled-warning"),k(ce,"title","save"),k(ce,"type","submit"),k(ce,"class","btn variant-filled-primary"),ce.disabled=n[9],k($e,"class","py-5 grow text-right gap-2")},m(h,b){B(h,e,b),_(e,t),M(r,t,null),_(t,i),M(s,t,null),_(t,o),M(u,t,null),_(e,d),_(e,m),_(m,y),_(y,c),_(c,H),_(y,j),M(V,y,null),_(y,L),W&&W.m(y,null),_(y,w),M(O,y,null),_(m,U),_(m,I),_(I,A),_(A,K),_(I,R),M(x,I,null),_(e,oe),_(e,Y),_(Y,S),_(e,z),_(e,Z),M(te,Z,null),_(Z,g),M(X,Z,null),_(e,pe),_(e,fe),_(fe,ue),_(e,Ne),_(e,ge),M(_e,ge,null),_(ge,ze),M(he,ge,null),_(e,Je),_(e,$e),_($e,de),M(we,de,null),_($e,Qe),_($e,ce),M(ke,ce,null),Oe=!0,Xe||(Ze=[qe(de,"click",n[12]),qe(e,"submit",jt(n[10]))],Xe=!0)},p(h,b){const se={};b[0]&256&&(se.valid=h[8].isValid("name")),b[0]&256&&(se.invalid=h[8].hasErrors("name")),b[0]&256&&(se.feedback=h[8].getErrors("name")),!a&&b[0]&128&&(a=!0,se.value=h[7].name,ae(()=>a=!1)),r.$set(se);const le={};b[0]&8&&(le.source=h[3]),b[0]&256&&(le.valid=h[8].isValid("entityType")),b[0]&256&&(le.invalid=h[8].hasErrors("entityType")),b[0]&256&&(le.feedback=h[8].getErrors("entityType")),!l&&b[0]&128&&(l=!0,le.target=h[7].entityType,ae(()=>l=!1)),s.$set(le);const ee={};b[0]&256&&(ee.valid=h[8].isValid("description")),b[0]&256&&(ee.invalid=h[8].hasErrors("description")),b[0]&256&&(ee.feedback=h[8].getErrors("description")),!f&&b[0]&128&&(f=!0,ee.value=h[7].description,ae(()=>f=!1)),u.$set(ee);const me={};b[0]&2&&(me.source=h[1]),b[0]&256&&(me.valid=h[8].isValid("metadataStructure")),b[0]&256&&(me.invalid=h[8].hasErrors("metadataStructure")),b[0]&256&&(me.feedback=h[8].getErrors("metadataStructure")),!P&&b[0]&128&&(P=!0,me.target=h[7].metadataStructure,ae(()=>P=!1)),V.$set(me),h[6]?W?(W.p(h,b),b[0]&64&&$(W,1)):(W=$t(h),W.c(),$(W,1),W.m(y,w)):W&&(ve(),v(W,1,1,()=>{W=null}),ye());const Se={};b[0]&128|b[1]&4&&(Se.$$scope={dirty:b,ctx:h}),O.$set(Se);const Le={};b[0]&132|b[1]&4&&(Le.$$scope={dirty:b,ctx:h}),x.$set(Le);const Ae={};b[0]&144|b[1]&4&&(Ae.$$scope={dirty:b,ctx:h}),te.$set(Ae);const Ee={};b[0]&144|b[1]&4&&(Ee.$$scope={dirty:b,ctx:h}),X.$set(Ee);const Ce={};b[0]&129|b[1]&4&&(Ce.$$scope={dirty:b,ctx:h}),_e.$set(Ce);const Te={};b[0]&160|b[1]&4&&(Te.$$scope={dirty:b,ctx:h}),he.$set(Te),(!Oe||b[0]&512)&&(ce.disabled=h[9])},i(h){Oe||($(r.$$.fragment,h),$(s.$$.fragment,h),$(u.$$.fragment,h),$(V.$$.fragment,h),$(W),$(O.$$.fragment,h),$(x.$$.fragment,h),$(te.$$.fragment,h),$(X.$$.fragment,h),$(_e.$$.fragment,h),$(he.$$.fragment,h),$(we.$$.fragment,h),$(ke.$$.fragment,h),Oe=!0)},o(h){v(r.$$.fragment,h),v(s.$$.fragment,h),v(u.$$.fragment,h),v(V.$$.fragment,h),v(W),v(O.$$.fragment,h),v(x.$$.fragment,h),v(te.$$.fragment,h),v(X.$$.fragment,h),v(_e.$$.fragment,h),v(he.$$.fragment,h),v(we.$$.fragment,h),v(ke.$$.fragment,h),Oe=!1},d(h){h&&p(e),N(r),N(s),N(u),N(V),W&&W.d(),N(O),N(x),N(te),N(X),N(_e),N(he),N(we),N(ke),Xe=!1,Et(Ze)}}}function Rr(n){let e,t,r,a,i;const s=[Hr,Nr],l=[];function o(u,f){return u[7]?0:1}return e=o(n),t=l[e]=s[e](n),a=new Tt({}),{c(){t.c(),r=C(),q(a.$$.fragment)},l(u){t.l(u),r=G(u),F(a.$$.fragment,u)},m(u,f){l[e].m(u,f),B(u,r,f),M(a,u,f),i=!0},p(u,f){let d=e;e=o(u),e===d?l[e].p(u,f):(ve(),v(l[d],1,1,()=>{l[d]=null}),ye(),t=l[e],t?t.p(u,f):(t=l[e]=s[e](u),t.c()),$(t,1),t.m(r.parentNode,r))},i(u){i||($(t),$(a.$$.fragment,u),i=!0)},o(u){v(t),v(a.$$.fragment,u),i=!1},d(u){l[e].d(u),u&&p(r),N(a,u)}}}function zr(n,e,t){let r;const a=Dt();st.setHelpItemList(Mr);let{id:i=0}=e,{hooks:s=[]}=e,{metadataStructures:l=[]}=e,{dataStructures:o=[]}=e,u,{entities:f=[]}=e,{groups:d=[]}=e,{filetypes:m}=e;const y=We();let c;Ke.reset(),Bt(async()=>{console.log("start entity template",i),H(),console.log("onmount")});async function H(){t(7,c=await mr(i)),console.log("load entity",c),console.log("load filetypes",m),L("metadataStructure"),i>0&&t(8,V=Ke(c))}async function j(){console.log("before submit",c);const g=await wr(c);g!=!1&&(console.log("save",g),y("save",g))}let V=Ke.get();async function P(g){setTimeout(async()=>{t(8,V=Ke(c,g.target.id))},10),console.log(g.target.id),L(g.target.id)}async function L(g){if(g==="metadataStructure"){let X=0;c.metadataStructure!=null&&(X=c.metadataStructure.id),t(6,u=await hr(X)),console.log(u)}}function w(){let g="create";i>0&&(g="edit");const X={type:"confirm",title:"Cancel "+g+" entity template",body:"Are you sure you wish to cancel the current form?",response:pe=>{pe===!0&&y("cancel")}};a.trigger(X)}function O(g){n.$$.not_equal(c.name,g)&&(c.name=g,t(7,c))}function U(g){n.$$.not_equal(c.entityType,g)&&(c.entityType=g,t(7,c))}function I(g){n.$$.not_equal(c.description,g)&&(c.description=g,t(7,c))}function A(g){n.$$.not_equal(c.metadataStructure,g)&&(c.metadataStructure=g,t(7,c))}function K(g){n.$$.not_equal(c.metadataFields,g)&&(c.metadataFields=g,t(7,c))}function R(g){n.$$.not_equal(c.metadataInvalidSaveMode,g)&&(c.metadataInvalidSaveMode=g,t(7,c))}function x(g){n.$$.not_equal(c.hasDatastructure,g)&&(c.hasDatastructure=g,t(7,c))}function oe(g){n.$$.not_equal(c.datastructureList,g)&&(c.datastructureList=g,t(7,c))}const Y=()=>st.show("hasDatastructure");function S(g){n.$$.not_equal(c.permissionGroups,g)&&(c.permissionGroups=g,t(7,c))}function z(g){n.$$.not_equal(c.notificationGroups,g)&&(c.notificationGroups=g,t(7,c))}function Z(g){n.$$.not_equal(c.disabledHooks,g)&&(c.disabledHooks=g,t(7,c))}function te(g){n.$$.not_equal(c.allowedFileTypes,g)&&(c.allowedFileTypes=g,t(7,c))}return n.$$set=g=>{"id"in g&&t(13,i=g.id),"hooks"in g&&t(0,s=g.hooks),"metadataStructures"in g&&t(1,l=g.metadataStructures),"dataStructures"in g&&t(2,o=g.dataStructures),"entities"in g&&t(3,f=g.entities),"groups"in g&&t(4,d=g.groups),"filetypes"in g&&t(5,m=g.filetypes)},n.$$.update=()=>{n.$$.dirty[0]&128,n.$$.dirty[0]&64,n.$$.dirty[0]&256&&t(9,r=!V.isValid())},[s,l,o,f,d,m,u,c,V,r,j,P,w,i,O,U,I,A,K,R,x,oe,Y,S,z,Z,te]}class Jr extends Be{constructor(e){super(),je(this,e,zr,Rr,Pe,{id:13,hooks:0,metadataStructures:1,dataStructures:2,entities:3,groups:4,filetypes:5},null,[-1,-1])}}function Qr(n){let e,t;return e=new xt({props:{error:n[18]}}),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Xr(n){let e,t,r,a,i,s;const l=[Yr,Wr],o=[];function u(m,y){return m[6]?0:1}e=u(n),t=o[e]=l[e](n);function f(m){n[14](m)}let d={};return n[8]!==void 0&&(d.entitytemplates=n[8]),a=new Vr({props:d}),re.push(()=>ne(a,"entitytemplates",f)),a.$on("edit",n[12]),{c(){t.c(),r=C(),q(a.$$.fragment)},l(m){t.l(m),r=G(m),F(a.$$.fragment,m)},m(m,y){o[e].m(m,y),B(m,r,y),M(a,m,y),s=!0},p(m,y){let c=e;e=u(m),e===c?o[e].p(m,y):(ve(),v(o[c],1,1,()=>{o[c]=null}),ye(),t=o[e],t?t.p(m,y):(t=o[e]=l[e](m),t.c()),$(t,1),t.m(r.parentNode,r));const H={};!i&&y&256&&(i=!0,H.entitytemplates=m[8],ae(()=>i=!1)),a.$set(H)},i(m){s||($(t),$(a.$$.fragment,m),s=!0)},o(m){v(t),v(a.$$.fragment,m),s=!1},d(m){o[e].d(m),m&&p(r),N(a,m)}}}function Wr(n){let e,t,r,a,i,s;return r=new Fe({props:{icon:Zt}}),{c(){e=E("div"),t=E("button"),q(r.$$.fragment),this.h()},l(l){e=T(l,"DIV",{class:!0});var o=D(e);t=T(o,"BUTTON",{title:!0,type:!0,class:!0});var u=D(t);F(r.$$.fragment,u),u.forEach(p),o.forEach(p),this.h()},h(){k(t,"title","create"),k(t,"type","button"),k(t,"class","btn variant-filled-primary"),k(e,"class","w-screen")},m(l,o){B(l,e,o),_(e,t),M(r,t,null),a=!0,i||(s=qe(t,"click",n[11]),i=!0)},p:Me,i(l){a||($(r.$$.fragment,l),a=!0)},o(l){v(r.$$.fragment,l),a=!1},d(l){l&&p(e),N(r),i=!1,s()}}}function Yr(n){let e,t;return e=new Jr({props:{id:n[7],hooks:n[0],metadataStructures:n[1],dataStructures:n[2],entities:n[3],groups:n[4],filetypes:n[5]}}),e.$on("save",n[10]),e.$on("cancel",n[13]),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,a){const i={};a&128&&(i.id=r[7]),a&1&&(i.hooks=r[0]),a&2&&(i.metadataStructures=r[1]),a&4&&(i.dataStructures=r[2]),a&8&&(i.entities=r[3]),a&16&&(i.groups=r[4]),a&32&&(i.filetypes=r[5]),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function Zr(n){let e,t,r;return t=new Ye({props:{position:vt.center,label:"loading entity templates"}}),{c(){e=E("div"),q(t.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0});var i=D(e);F(t.$$.fragment,i),i.forEach(p),this.h()},h(){k(e,"class","text-surface-800")},m(a,i){B(a,e,i),M(t,e,null),r=!0},p:Me,i(a){r||($(t.$$.fragment,a),r=!0)},o(a){v(t.$$.fragment,a),r=!1},d(a){a&&p(e),N(t)}}}function xr(n){let e,t,r={ctx:n,current:null,token:null,hasCatch:!0,pending:Zr,then:Xr,catch:Qr,value:17,error:18,blocks:[,,,]};return Ut(n[9](),r),{c(){e=Re(),r.block.c()},l(a){e=Re(),r.block.l(a)},m(a,i){B(a,e,i),r.block.m(a,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(a,i){n=a,Kt(r,n,i)},i(a){t||($(r.block),t=!0)},o(a){for(let i=0;i<3;i+=1){const s=r.blocks[i];v(s)}t=!1},d(a){a&&p(e),r.block.d(a),r.token=null,r=null}}}function en(n){let e,t;return e=new Yt({props:{title:"Entity Templates",note:"On this page you can edit entity template.",help:!0,$$slots:{default:[xr]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,a){M(e,r,a),t=!0},p(r,[a]){const i={};a&524799&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){N(e,r)}}}function tn(n,e,t){let r,a;Pt(n,Ve,P=>t(8,a=P));let i=[],s=[],l=[],o=[],u=[],f=[],d=!1;async function m(){t(0,i=await br()),console.log("hooks",i),t(1,s=await _r()),t(2,l=await $r()),t(3,o=await gr()),t(4,u=await vr()),t(5,f=await yr()),Ve.set(await pr())}async function y(P){const L=P.detail;ot(Ve,a=a.filter(w=>w.id!==L.id),a),ot(Ve,a=[...a,L],a),t(6,d=!1)}async function c(){t(7,r=0),t(6,d=!d)}async function H(P){""+P.detail,t(6,d=!1),setTimeout(async()=>{t(7,r=P.detail),t(6,d=!0)},500)}const j=()=>t(6,d=!1);function V(P){a=P,Ve.set(a)}return t(7,r=0),[i,s,l,o,u,f,d,r,a,m,y,c,H,j,V]}class gn extends Be{constructor(e){super(),je(this,e,tn,en,Pe,{})}}export{gn as component,pn as universal};
