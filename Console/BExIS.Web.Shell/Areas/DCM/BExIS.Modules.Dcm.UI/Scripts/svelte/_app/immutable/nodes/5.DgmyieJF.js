import{S as Ue,i as Re,c as I,a as D,m as q,t as v,b as w,d as C,g as De,e as qe,f as x}from"../chunks/index.CiHPK1yE.js";import{e as Be,A as ce,p as At,u as tn,o as nn,a as yt}from"../chunks/eslint4b.es.Ngf91g9x.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.BJ9KW1aQ.js";import{s as Ke,e as S,c as E,k as V,g as Ie,d as _,J as ut,a as y,U as rn,t as Ae,i as j,o as h,aa as St,p as pe,I as Bt,r as ct,B as Et,ab as sn,E as Y,F as Z,G as _e,v as ft,x as Ut,j as O,l as H,y as Rt,z as Kt,A as zt,n as Ye,h as an,K as xe,R as Tt,M as ln,O as ee,a9 as on,a7 as te,H as un,ac as It}from"../chunks/scheduler.C_o3LU93.js";import{M as Jt,a as he,h as cn,u as fn,E as dn}from"../chunks/MultiSelect.DVhKrnJD.js";import{F as je,d as mn,e as pn,g as gn,h as _n,a as hn,i as $n,P as bn,j as vn}from"../chunks/Page.BhUOr-Xw.js";import{S as dt,g as wn,a as kn}from"../chunks/Spinner.lCF0l7ta.js";import{g as Qt}from"../chunks/stores.B4wH1ktA.js";import{C as Xt,b as yn,o as Sn,p as We,v as He,T as En}from"../chunks/vest.production.DZ6baSQo.js";import{S as Wt}from"../chunks/SlideToggle.CrjJV6mH.js";import{I as Tn,T as In}from"../chunks/TextInput.AzYEG7aR.js";import{w as Dn}from"../chunks/index.CH-8sbRF.js";function Dt(r,e,t){const n=r.slice();return n[16]=e[t],n}function qt(r){let e,t=r[16].text+"",n,a;return{c(){e=S("option"),n=Y(t),this.h()},l(i){e=E(i,"OPTION",{});var s=V(e);n=Z(s,t),s.forEach(_),this.h()},h(){e.__value=a=r[16].id,ut(e,e.__value)},m(i,s){j(i,e,s),h(e,n)},p(i,s){s&2&&t!==(t=i[16].text+"")&&_e(n,t),s&2&&a!==(a=i[16].id)&&(e.__value=a,ut(e,e.__value))},d(i){i&&_(e)}}}function qn(r){let e,t,n="-- Please select --",a,i,s=Be(r[1]),l=[];for(let o=0;o<s.length;o+=1)l[o]=qt(Dt(r,s,o));return{c(){e=S("select"),t=S("option"),t.textContent=n;for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=E(o,"SELECT",{id:!0,class:!0});var u=V(e);t=E(u,"OPTION",{"data-svelte-h":!0}),Ie(t)!=="svelte-1s4hyfh"&&(t.textContent=n);for(let c=0;c<l.length;c+=1)l[c].l(u);u.forEach(_),this.h()},h(){t.__value=null,ut(t,t.__value),y(e,"id",r[0]),y(e,"class","select variant-form-material"),r[8]===void 0&&rn(()=>r[13].call(e)),Ae(e,"input-success",r[3]),Ae(e,"input-error",r[4])},m(o,u){j(o,e,u),h(e,t);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);St(e,r[8],!0),a||(i=[pe(e,"change",r[13]),pe(e,"change",r[11]),pe(e,"select",r[12])],a=!0)},p(o,u){if(u&2){s=Be(o[1]);let c;for(c=0;c<s.length;c+=1){const d=Dt(o,s,c);l[c]?l[c].p(d,u):(l[c]=qt(d),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=s.length}u&1&&y(e,"id",o[0]),u&258&&St(e,o[8]),u&8&&Ae(e,"input-success",o[3]),u&16&&Ae(e,"input-error",o[4])},d(o){o&&_(e),Bt(l,o),a=!1,ct(i)}}}function Cn(r){let e,t;return e=new Tn({props:{id:r[0],label:r[2],feedback:r[5],required:r[6],help:r[7],$$slots:{default:[qn]},$$scope:{ctx:r}}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},p(n,[a]){const i={};a&1&&(i.id=n[0]),a&4&&(i.label=n[2]),a&32&&(i.feedback=n[5]),a&64&&(i.required=n[6]),a&128&&(i.help=n[7]),a&524571&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Vn(r,e,t){let n,{id:a}=e,{source:i}=e,{target:s}=e,{title:l}=e,{valid:o=!1}=e,{invalid:u=!1}=e,{feedback:c=[""]}=e,{required:d=!1}=e,{complexTarget:m=!1}=e,{help:k=!1}=e;function f(b){b!=null&&(m?t(8,n=b.id):t(8,n=b))}function M(b){m?t(9,s=i.find(T=>T.id===b)):t(9,s=b)}function B(b){Et.call(this,r,b)}function G(b){Et.call(this,r,b)}function A(){n=sn(this),t(8,n),t(1,i)}return r.$$set=b=>{"id"in b&&t(0,a=b.id),"source"in b&&t(1,i=b.source),"target"in b&&t(9,s=b.target),"title"in b&&t(2,l=b.title),"valid"in b&&t(3,o=b.valid),"invalid"in b&&t(4,u=b.invalid),"feedback"in b&&t(5,c=b.feedback),"required"in b&&t(6,d=b.required),"complexTarget"in b&&t(10,m=b.complexTarget),"help"in b&&t(7,k=b.help)},r.$$.update=()=>{r.$$.dirty&512&&f(s),r.$$.dirty&256&&M(n)},t(8,n=null),[a,i,l,o,u,c,d,k,n,s,m,B,G,A]}class Ct extends Ue{constructor(e){super(),Re(this,e,Vn,Cn,Ke,{id:0,source:1,target:9,title:2,valid:3,invalid:4,feedback:5,required:6,complexTarget:10,help:7})}}function Gn(){return{}}const Rr=Object.freeze(Object.defineProperty({__proto__:null,load:Gn},Symbol.toStringTag,{value:"Module"}));function Vt(r,e,t){const n=r.slice();return n[12]=e[t],n}function Gt(r){let e,t="in use";return{c(){e=S("span"),e.textContent=t,this.h()},l(n){e=E(n,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-lkw4zj"&&(e.textContent=t),this.h()},h(){y(e,"class","badge variant-filled-error")},m(n,a){j(n,e,a)},d(n){n&&_(e)}}}function Ft(r){let e,t;return{c(){e=S("blockquote"),t=Y(r[1]),this.h()},l(n){e=E(n,"BLOCKQUOTE",{class:!0});var a=V(e);t=Z(a,r[1]),a.forEach(_),this.h()},h(){y(e,"class","blockquote mb-5")},m(n,a){j(n,e,a),h(e,t)},p(n,a){a&2&&_e(t,n[1])},d(n){n&&_(e)}}}function Nt(r){let e,t,n,a,i=r[5].join(", ")+"",s;return{c(){e=S("div"),t=S("i"),n=Y("Restricted to these file types: "),a=S("b"),s=Y(i)},l(l){e=E(l,"DIV",{});var o=V(e);t=E(o,"I",{});var u=V(t);n=Z(u,"Restricted to these file types: "),a=E(u,"B",{});var c=V(a);s=Z(c,i),c.forEach(_),u.forEach(_),o.forEach(_)},m(l,o){j(l,e,o),h(e,t),h(t,n),h(t,a),h(a,s)},p(l,o){o&32&&i!==(i=l[5].join(", ")+"")&&_e(s,i)},d(l){l&&_(e)}}}function Mt(r){let e,t,n=r[2].text+"",a,i,s,l,o,u,c,d,m,k,f;const M=[Nn,Fn],B=[];function G(T,L){return T[6]?0:1}l=G(r),o=B[l]=M[l](r);let A=Be(r[4]),b=[];for(let T=0;T<A.length;T+=1)b[T]=Ot(Vt(r,A,T));return{c(){e=S("i"),t=Y("Show linked "),a=Y(n),i=Y(`:
				`),s=S("button"),o.c(),u=O(),c=S("div"),d=S("ul");for(let T=0;T<b.length;T+=1)b[T].c();this.h()},l(T){e=E(T,"I",{});var L=V(e);t=Z(L,"Show linked "),a=Z(L,n),i=Z(L,`:
				`),s=E(L,"BUTTON",{class:!0});var U=V(s);o.l(U),U.forEach(_),L.forEach(_),u=H(T),c=E(T,"DIV",{});var F=V(c);d=E(F,"UL",{class:!0});var P=V(d);for(let K=0;K<b.length;K+=1)b[K].l(P);P.forEach(_),F.forEach(_),this.h()},h(){y(s,"class","btn-icon"),y(d,"class","ul list-disc pl-5"),Ae(c,"hidden",r[6])},m(T,L){j(T,e,L),h(e,t),h(e,a),h(e,i),h(e,s),B[l].m(s,null),j(T,u,L),j(T,c,L),h(c,d);for(let U=0;U<b.length;U+=1)b[U]&&b[U].m(d,null);m=!0,k||(f=pe(s,"click",r[9]),k=!0)},p(T,L){(!m||L&4)&&n!==(n=T[2].text+"")&&_e(a,n);let U=l;if(l=G(T),l!==U&&(De(),w(B[U],1,1,()=>{B[U]=null}),qe(),o=B[l],o||(o=B[l]=M[l](T),o.c()),v(o,1),o.m(s,null)),L&16){A=Be(T[4]);let F;for(F=0;F<A.length;F+=1){const P=Vt(T,A,F);b[F]?b[F].p(P,L):(b[F]=Ot(P),b[F].c(),b[F].m(d,null))}for(;F<b.length;F+=1)b[F].d(1);b.length=A.length}(!m||L&64)&&Ae(c,"hidden",T[6])},i(T){m||(v(o),m=!0)},o(T){w(o),m=!1},d(T){T&&(_(e),_(u),_(c)),B[l].d(),Bt(b,T),k=!1,f()}}}function Fn(r){let e,t;return e=new je({props:{icon:mn}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Nn(r){let e,t;return e=new je({props:{icon:pn}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Ot(r){let e,t=r[12].text+"",n,a,i=r[12].id+"",s,l;return{c(){e=S("li"),n=Y(t),a=Y(" ("),s=Y(i),l=Y(")")},l(o){e=E(o,"LI",{});var u=V(e);n=Z(u,t),a=Z(u," ("),s=Z(u,i),l=Z(u,")"),u.forEach(_)},m(o,u){j(o,e,u),h(e,n),h(e,a),h(e,s),h(e,l)},p(o,u){u&16&&t!==(t=o[12].text+"")&&_e(n,t),u&16&&i!==(i=o[12].id+"")&&_e(s,i)},d(o){o&&_(e)}}}function Mn(r){let e;return{c(){e=Y("no action setup")},l(t){e=Z(t,"no action setup")},m(t,n){j(t,e,n)},d(t){t&&_(e)}}}function On(r){let e,t,n,a,i,s,l,o,u,c=r[3].text+"",d,m,k,f=r[2].text+"",M,B,G,A,b,T,L,U,F=r[4].length>0&&Gt(),P=r[1]&&Ft(r),K=r[5].length>0&&Nt(r),R=r[4].length>0&&Mt(r);const ne=r[8].default,fe=Ut(ne,r,r[10],null),Q=fe||Mn();return{c(){e=S("header"),t=S("div"),n=S("div"),a=S("h2"),i=Y(r[0]),s=O(),l=S("div"),F&&F.c(),o=O(),u=S("span"),d=Y(c),m=O(),k=S("span"),M=Y(f),B=O(),G=S("div"),P&&P.c(),A=O(),K&&K.c(),b=O(),R&&R.c(),T=O(),L=S("footer"),Q&&Q.c(),this.h()},l(N){e=E(N,"HEADER",{class:!0});var z=V(e);t=E(z,"DIV",{class:!0});var re=V(t);n=E(re,"DIV",{class:!0});var Ce=V(n);a=E(Ce,"H2",{class:!0});var $e=V(a);i=Z($e,r[0]),$e.forEach(_),Ce.forEach(_),s=H(re),l=E(re,"DIV",{class:!0});var J=V(l);F&&F.l(J),o=H(J),u=E(J,"SPAN",{class:!0});var ae=V(u);d=Z(ae,c),ae.forEach(_),m=H(J),k=E(J,"SPAN",{class:!0});var p=V(k);M=Z(p,f),p.forEach(_),J.forEach(_),re.forEach(_),z.forEach(_),B=H(N),G=E(N,"DIV",{class:!0});var X=V(G);P&&P.l(X),A=H(X),K&&K.l(X),b=H(X),R&&R.l(X),X.forEach(_),T=H(N),L=E(N,"FOOTER",{class:!0});var be=V(L);Q&&Q.l(be),be.forEach(_),this.h()},h(){y(a,"class","h2"),y(n,"class","grow text-left"),y(u,"class","badge variant-filled-surface"),y(k,"class","badge variant-filled-secondary"),y(l,"class","grow-0 w-42 text-right"),y(t,"class","flex"),y(e,"class","card-header"),y(G,"class","p-4 grow"),y(L,"class","card-footer")},m(N,z){j(N,e,z),h(e,t),h(t,n),h(n,a),h(a,i),h(t,s),h(t,l),F&&F.m(l,null),h(l,o),h(l,u),h(u,d),h(l,m),h(l,k),h(k,M),j(N,B,z),j(N,G,z),P&&P.m(G,null),h(G,A),K&&K.m(G,null),h(G,b),R&&R.m(G,null),j(N,T,z),j(N,L,z),Q&&Q.m(L,null),U=!0},p(N,z){(!U||z&1)&&_e(i,N[0]),N[4].length>0?F||(F=Gt(),F.c(),F.m(l,o)):F&&(F.d(1),F=null),(!U||z&8)&&c!==(c=N[3].text+"")&&_e(d,c),(!U||z&4)&&f!==(f=N[2].text+"")&&_e(M,f),N[1]?P?P.p(N,z):(P=Ft(N),P.c(),P.m(G,A)):P&&(P.d(1),P=null),N[5].length>0?K?K.p(N,z):(K=Nt(N),K.c(),K.m(G,b)):K&&(K.d(1),K=null),N[4].length>0?R?(R.p(N,z),z&16&&v(R,1)):(R=Mt(N),R.c(),v(R,1),R.m(G,null)):R&&(De(),w(R,1,1,()=>{R=null}),qe()),fe&&fe.p&&(!U||z&1024)&&Rt(fe,ne,N,N[10],U?zt(ne,N[10],z,null):Kt(N[10]),null)},i(N){U||(v(R),v(Q,N),U=!0)},o(N){w(R),w(Q,N),U=!1},d(N){N&&(_(e),_(B),_(G),_(T),_(L)),F&&F.d(),P&&P.d(),K&&K.d(),R&&R.d(),Q&&Q.d(N)}}}function Hn(r){let e,t;return e=new Xt({props:{$$slots:{default:[On]},$$scope:{ctx:r}}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},p(n,[a]){const i={};a&1151&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Ln(r,e,t){let{$$slots:n={},$$scope:a}=e,{id:i}=e,{name:s=""}=e,{description:l=""}=e,{entityType:o}=e,{metadataStructure:u}=e,{linkedSubjects:c=[]}=e,{allowedFileTypes:d=[]}=e,m=!0;ft();const k=()=>t(6,m=!m);return r.$$set=f=>{"id"in f&&t(7,i=f.id),"name"in f&&t(0,s=f.name),"description"in f&&t(1,l=f.description),"entityType"in f&&t(2,o=f.entityType),"metadataStructure"in f&&t(3,u=f.metadataStructure),"linkedSubjects"in f&&t(4,c=f.linkedSubjects),"allowedFileTypes"in f&&t(5,d=f.allowedFileTypes),"$$scope"in f&&t(10,a=f.$$scope)},[s,l,o,u,c,d,m,i,n,k,a]}class jn extends Ue{constructor(e){super(),Re(this,e,Ln,Hn,Ke,{id:7,name:0,description:1,entityType:2,metadataStructure:3,linkedSubjects:4,allowedFileTypes:5})}}const Pn=async r=>{try{return(await ce.get("/dcm/entitytemplates/Get?id="+r)).data}catch(e){throw console.error(e),e}},An=async()=>{try{return(await ce.get("/dcm/entitytemplates/Load")).data}catch(r){throw console.error(r),r}},Bn=async()=>{try{return(await ce.get("/dcm/entitytemplates/Entities")).data}catch(r){throw console.error(r),r}},Un=async()=>{try{return(await ce.get("/dcm/entitytemplates/MetadataStructures")).data}catch(r){throw console.error(r),r}},Rn=async r=>{try{return(await ce.get("/dcm/entitytemplates/SystemKeys?metadataStructureId="+r)).data}catch(e){throw console.error(e),e}},Kn=async()=>{try{return(await ce.get("/dcm/entitytemplates/DataStructures")).data}catch(r){throw console.error(r),r}},zn=async()=>{try{return(await ce.get("/dcm/entitytemplates/Hooks")).data}catch(r){throw console.error(r),r}},Jn=async()=>{try{return(await ce.get("/dcm/entitytemplates/Groups")).data}catch(r){throw console.error(r),r}},Qn=async()=>{try{return(await ce.get("/dcm/entitytemplates/FileTypes")).data}catch(r){throw console.error(r),r}},Xn=async r=>{try{return(await ce.post("/dcm/entitytemplates/Update",r)).data}catch(e){throw console.error(e),e}},Wn=async r=>{try{return(await ce.delete("/dcm/entitytemplates/Delete",{id:r})).data}catch(e){throw console.error(e),e}};function Ht(r,e,t){const n=r.slice();return n[8]=e[t],n[10]=t,n}function Yn(r){let e,t,n;return t=new dt({props:{position:At.center,label:"loading entity templates"}}),{c(){e=S("div"),I(t.$$.fragment),this.h()},l(a){e=E(a,"DIV",{class:!0});var i=V(e);D(t.$$.fragment,i),i.forEach(_),this.h()},h(){y(e,"class","text-surface-800")},m(a,i){j(a,e,i),q(t,e,null),n=!0},p:Ye,i(a){n||(v(t.$$.fragment,a),n=!0)},o(a){w(t.$$.fragment,a),n=!1},d(a){a&&_(e),C(t)}}}function Zn(r){let e,t=[],n=new Map,a,i=Be(r[0]);const s=l=>l[8].id;for(let l=0;l<i.length;l+=1){let o=Ht(r,i,l),u=s(o);n.set(u,t[l]=Lt(u,o))}return{c(){e=S("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=E(l,"DIV",{class:!0});var o=V(e);for(let u=0;u<t.length;u+=1)t[u].l(o);o.forEach(_),this.h()},h(){y(e,"class","py-5 w-full grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(l,o){j(l,e,o);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);a=!0},p(l,o){o&7&&(i=Be(l[0]),De(),t=tn(t,o,s,1,l,i,n,e,nn,Lt,null,Ht),qe())},i(l){if(!a){for(let o=0;o<i.length;o+=1)v(t[o]);a=!0}},o(l){for(let o=0;o<t.length;o+=1)w(t[o]);a=!1},d(l){l&&_(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function xn(r){let e,t,n,a,i,s,l,o,u,c,d,m;a=new je({props:{icon:gn}});function k(){return r[3](r[10],r[8])}o=new je({props:{icon:_n}});function f(){return r[4](r[8])}return{c(){e=S("div"),t=S("div"),n=S("button"),I(a.$$.fragment),s=O(),l=S("button"),I(o.$$.fragment),u=O(),this.h()},l(M){e=E(M,"DIV",{class:!0});var B=V(e);t=E(B,"DIV",{class:!0});var G=V(t);n=E(G,"BUTTON",{title:!0,class:!0});var A=V(n);D(a.$$.fragment,A),A.forEach(_),s=H(G),l=E(G,"BUTTON",{title:!0,class:!0});var b=V(l);D(o.$$.fragment,b),b.forEach(_),G.forEach(_),B.forEach(_),u=H(M),this.h()},h(){y(n,"title","delete"),y(n,"class","btn variant-filled-error"),n.disabled=i=r[8].linkedSubjects.length>0,y(l,"title","edit"),y(l,"class","btn variant-filled-primary"),y(t,"class","grow text-right gap-2"),y(e,"class","flex h-full justify-end")},m(M,B){j(M,e,B),h(e,t),h(t,n),q(a,n,null),h(t,s),h(t,l),q(o,l,null),j(M,u,B),c=!0,d||(m=[pe(n,"click",k),pe(l,"click",f)],d=!0)},p(M,B){r=M,(!c||B&1&&i!==(i=r[8].linkedSubjects.length>0))&&(n.disabled=i)},i(M){c||(v(a.$$.fragment,M),v(o.$$.fragment,M),c=!0)},o(M){w(a.$$.fragment,M),w(o.$$.fragment,M),c=!1},d(M){M&&(_(e),_(u)),C(a),C(o),d=!1,ct(m)}}}function Lt(r,e){let t,n,a;const i=[e[8]];let s={$$slots:{default:[xn]},$$scope:{ctx:e}};for(let l=0;l<i.length;l+=1)s=an(s,i[l]);return n=new jn({props:s}),{key:r,first:null,c(){t=xe(),I(n.$$.fragment),this.h()},l(l){t=xe(),D(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,o){j(l,t,o),q(n,l,o),a=!0},p(l,o){e=l;const u=o&1?wn(i,[kn(e[8])]):{};o&2049&&(u.$$scope={dirty:o,ctx:e}),n.$set(u)},i(l){a||(v(n.$$.fragment,l),a=!0)},o(l){w(n.$$.fragment,l),a=!1},d(l){l&&_(t),C(n,l)}}}function er(r){let e,t,n,a,i;const s=[Zn,Yn],l=[];function o(u,c){return u[0]?0:1}return e=o(r),t=l[e]=s[e](r),a=new Jt({}),{c(){t.c(),n=O(),I(a.$$.fragment)},l(u){t.l(u),n=H(u),D(a.$$.fragment,u)},m(u,c){l[e].m(u,c),j(u,n,c),q(a,u,c),i=!0},p(u,[c]){let d=e;e=o(u),e===d?l[e].p(u,c):(De(),w(l[d],1,1,()=>{l[d]=null}),qe(),t=l[e],t?t.p(u,c):(t=l[e]=s[e](u),t.c()),v(t,1),t.m(n.parentNode,n))},i(u){i||(v(t),v(a.$$.fragment,u),i=!0)},o(u){w(t),w(a.$$.fragment,u),i=!1},d(u){u&&_(n),l[e].d(u),C(a,u)}}}function tr(r,e,t){const n=Qt(),a=ft();let{entitytemplates:i}=e;function s(d){console.log("edit",d),a("edit",d)}function l(d,m){const k={type:"confirm",title:"Please Confirm",body:"Are you sure you wish to remove?",response:f=>{f&&o(d,m)}};n.trigger(k)}async function o(d,m){console.log(d,m);const k=await Wn(m);console.log(k),k===!0&&t(0,i=i.filter((f,M)=>M!==d))}const u=(d,m)=>l(d,m.id),c=d=>s(d.id);return r.$$set=d=>{"entitytemplates"in d&&t(0,i=d.entitytemplates)},[i,s,l,u,c]}class nr extends Ue{constructor(e){super(),Re(this,e,tr,er,Ke,{entitytemplates:0})}}function rr(r){let e,t,n;const a=r[1].default,i=Ut(a,r,r[0],null);return{c(){e=S("div"),t=S("div"),i&&i.c(),this.h()},l(s){e=E(s,"DIV",{class:!0});var l=V(e);t=E(l,"DIV",{class:!0});var o=V(t);i&&i.l(o),o.forEach(_),l.forEach(_),this.h()},h(){y(t,"class","col-span-10"),y(e,"class","grid grid-cols-10 items-end")},m(s,l){j(s,e,l),h(e,t),i&&i.m(t,null),n=!0},p(s,[l]){i&&i.p&&(!n||l&1)&&Rt(i,a,s,s[0],n?zt(a,s[0],l,null):Kt(s[0]),null)},i(s){n||(v(i,s),n=!0)},o(s){w(i,s),n=!1},d(s){s&&_(e),i&&i.d(s)}}}function sr(r,e,t){let{$$slots:n={},$$scope:a}=e;return r.$$set=i=>{"$$scope"in i&&t(0,a=i.$$scope)},[a,n]}class me extends Ue{constructor(e){super(),Re(this,e,sr,rr,Ke,{})}}const Le=Dn([]),Ze=yn((r={},e)=>{Sn(e),We("name","name is required",()=>{He(r.name).isNotBlank()}),We("name","name allready exist",()=>{const t=r.id>0?Tt(Le).find(a=>a.id==r.id):{id:0,name:""},n=Tt(Le).map(a=>a.name!=t.name?a.name:"");return He(r.name).notInside(n)}),We("description","description is required",()=>{He(r.description).isNotBlank()}),We("metadataStructure","metadatastructure is required",()=>{He(r.metadataStructure).isNotNull(),He(r.metadataStructure).isNotUndefined()}),We("entityType","entity is required",()=>{He(r.entityType).isNotNull(),He(r.entityType).isNotUndefined()})}),ar=[{id:"name",name:"Template Name",description:"Enter a unique name for the entity template."},{id:"entityType",name:"Entity Type",description:"This template belongs to which type of entity?"},{id:"description",name:"Description",description:"Template description helps other people to choose the correct one."},{id:"metadataStructure",name:"Metadata Schema",description:"Metadata schema the dataset is based on."},{id:"metadataFields",name:"Metadata input fields",description:"Set the minimum required information for your dataset.The user must fill this field(s) before the creation of a dataset can start. The listed items (system keys) must be mapped against the selected metadata schema.That is why they are grouped in mapped and unmapped."},{id:"invalidSaveMode",name:"Invalid Save Mode",description:"If the user should be able to save metadata with empty required fields, this option needs to be activated."},{id:"permissions",name:"Permissions",description:"Select the group(s) that will automatically get full access after creating the dataset."},{id:"notification",name:"Notification",description:"Select the group(s) to be notified when something is changed."},{id:"disabledHooks",name:"Disable dataset components",description:"Select components/features that should not be displayed during editing and display of a dataset."},{id:"allowedFileTypes",name:"Restrict allowed file type for upload",description:"Select file types that are allowed during file upload."},{id:"hasDatastructure",name:"Options for data structures",description:'<u>1. active vs not active</u><ul class="ul list-disc p-5"><li><b>active data structure</b> - tabular data will be uploaded</li><li><b>deactivate</b> - files will be uploaded directly and will not be processed further. Select features that should not be displayed during editing and display.</li></ul><u>2. selection or not</u><ul class="ul list-disc p-5"><li> If you activate data structure, you can define a selection of data structures from the system.</li><li>selected - only these structures can be used later, not selected - new structures can be selected.</li></ul>'}];function lr(r){let e,t;return e=new dt({props:{textCss:"text-secondary-500"}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},p:Ye,i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function ir(r){let e,t;return e=new Xt({props:{$$slots:{default:[vr]},$$scope:{ctx:r}}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},p(n,a){const i={};a[0]&1023|a[1]&32&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function jt(r){let e,t;return e=new me({props:{$$slots:{default:[or]},$$scope:{ctx:r}}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},p(n,a){const i={};a[0]&192|a[1]&32&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function or(r){let e,t,n;function a(s){r[18](s)}let i={id:"metadataFields",title:"Required Fields",source:r[6],itemId:"id",itemLabel:"text",itemGroup:"group",complexSource:!0,help:!0};return r[7].metadataFields!==void 0&&(i.target=r[7].metadataFields),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&64&&(o.source=s[6]),!t&&l[0]&128&&(t=!0,o.target=s[7].metadataFields,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function ur(r){let e;return{c(){e=Y("Allow saving with empty required fields")},l(t){e=Z(t,"Allow saving with empty required fields")},m(t,n){j(t,e,n)},d(t){t&&_(e)}}}function cr(r){let e,t,n,a,i;function s(o){r[19](o)}let l={name:"Invalid-save-mode",$$slots:{default:[ur]},$$scope:{ctx:r}};return r[7].metadataInvalidSaveMode!==void 0&&(l.checked=r[7].metadataInvalidSaveMode),n=new Wt({props:l}),ee.push(()=>x(n,"checked",s)),{c(){e=S("div"),t=O(),I(n.$$.fragment),this.h()},l(o){e=E(o,"DIV",{id:!0}),V(e).forEach(_),t=H(o),D(n.$$.fragment,o),this.h()},h(){y(e,"id","invalidSaveMode")},m(o,u){j(o,e,u),j(o,t,u),q(n,o,u),i=!0},p(o,u){const c={};u[1]&32&&(c.$$scope={dirty:u,ctx:o}),!a&&u[0]&128&&(a=!0,c.checked=o[7].metadataInvalidSaveMode,te(()=>a=!1)),n.$set(c)},i(o){i||(v(n.$$.fragment,o),i=!0)},o(o){w(n.$$.fragment,o),i=!1},d(o){o&&(_(e),_(t)),C(n,o)}}}function fr(r){let e;return{c(){e=Y("Allow to use data structures")},l(t){e=Z(t,"Allow to use data structures")},m(t,n){j(t,e,n)},d(t){t&&_(e)}}}function Pt(r){let e,t,n;function a(s){r[21](s)}let i={id:"datastructures",title:"Limit the selection of allowed data structures",source:r[2],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].datastructureList!==void 0&&(i.target=r[7].datastructureList),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&4&&(o.source=s[2]),!t&&l[0]&128&&(t=!0,o.target=s[7].datastructureList,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function dr(r){let e,t,n,a,i,s,l;function o(d){r[20](d)}let u={name:"use_data_structure",$$slots:{default:[fr]},$$scope:{ctx:r}};r[7].hasDatastructure!==void 0&&(u.checked=r[7].hasDatastructure),t=new Wt({props:u}),ee.push(()=>x(t,"checked",o));let c=r[7].hasDatastructure&&Pt(r);return{c(){e=S("div"),I(t.$$.fragment),a=O(),c&&c.c(),this.h()},l(d){e=E(d,"DIV",{class:!0});var m=V(e);D(t.$$.fragment,m),a=H(m),c&&c.l(m),m.forEach(_),this.h()},h(){y(e,"class","mt-7 space-y-5")},m(d,m){j(d,e,m),q(t,e,null),h(e,a),c&&c.m(e,null),i=!0,s||(l=pe(e,"mouseover",r[22]),s=!0)},p(d,m){const k={};m[1]&32&&(k.$$scope={dirty:m,ctx:d}),!n&&m[0]&128&&(n=!0,k.checked=d[7].hasDatastructure,te(()=>n=!1)),t.$set(k),d[7].hasDatastructure?c?(c.p(d,m),m[0]&128&&v(c,1)):(c=Pt(d),c.c(),v(c,1),c.m(e,null)):c&&(De(),w(c,1,1,()=>{c=null}),qe())},i(d){i||(v(t.$$.fragment,d),v(c),i=!0)},o(d){w(t.$$.fragment,d),w(c),i=!1},d(d){d&&_(e),C(t),c&&c.d(),s=!1,l()}}}function mr(r){let e,t,n;function a(s){r[23](s)}let i={id:"permissionsFull",title:"Full",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].permissionGroups.full!==void 0&&(i.target=r[7].permissionGroups.full),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups.full,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function pr(r){let e,t,n;function a(s){r[24](s)}let i={id:"permissionsViewEditGrant",title:"View, Edit and Grant",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].permissionGroups.viewEditGrant!==void 0&&(i.target=r[7].permissionGroups.viewEditGrant),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups.viewEditGrant,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function gr(r){let e,t,n;function a(s){r[25](s)}let i={id:"permissionsViewEdit",title:"View and Edit",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].permissionGroups.viewEdit!==void 0&&(i.target=r[7].permissionGroups.viewEdit),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups.viewEdit,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function _r(r){let e,t,n;function a(s){r[26](s)}let i={id:"permissionsView",title:"View",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].permissionGroups.view!==void 0&&(i.target=r[7].permissionGroups.view),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].permissionGroups.view,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function hr(r){let e,t,n;function a(s){r[27](s)}let i={id:"notification",title:"Send notifications per default to the following groups",source:r[4],itemId:"key",itemLabel:"value",complexSource:!0,help:!0};return r[7].notificationGroups!==void 0&&(i.target=r[7].notificationGroups),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&16&&(o.source=s[4]),!t&&l[0]&128&&(t=!0,o.target=s[7].notificationGroups,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function $r(r){let e,t,n;function a(s){r[28](s)}let i={id:"disabledHooks",title:"Disable dataset components",source:r[0],help:!0};return r[7].disabledHooks!==void 0&&(i.target=r[7].disabledHooks),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&1&&(o.source=s[0]),!t&&l[0]&128&&(t=!0,o.target=s[7].disabledHooks,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function br(r){let e,t,n;function a(s){r[29](s)}let i={id:"allowedFileTypes",title:"Restrict allowed file types for file upload",source:r[5],help:!0};return r[7].allowedFileTypes!==void 0&&(i.target=r[7].allowedFileTypes),e=new he({props:i}),ee.push(()=>x(e,"target",a)),{c(){I(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){q(e,s,l),n=!0},p(s,l){const o={};l[0]&32&&(o.source=s[5]),!t&&l[0]&128&&(t=!0,o.target=s[7].allowedFileTypes,te(()=>t=!1)),e.$set(o)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){w(e.$$.fragment,s),n=!1},d(s){C(e,s)}}}function vr(r){let e,t,n,a,i,s,l,o,u,c,d,m,k,f,M="Metadata",B,G,A,b,T,L,U,F,P,K="Data Structure",R,ne,fe,Q,N="Administration",z,re,Ce="Set permissions per default to the following groups",$e,J,ae,p,X,be,ve,et,we,tt,Ve,mt="Notifications",nt,Pe,ke,rt,Ge,pt="Dataset Settings",st,ye,Se,at,Ee,lt,Te,ge,Fe,it,de,Ne,ze,ot,gt;function Yt(g){r[14](g)}let _t={id:"name",label:"Template Name",valid:r[8].isValid("name"),invalid:r[8].hasErrors("name"),feedback:r[8].getErrors("name"),required:!0,placeholder:"Define a unique content-related name for your template.",help:!0};r[7].name!==void 0&&(_t.value=r[7].name),n=new In({props:_t}),ee.push(()=>x(n,"value",Yt)),n.$on("input",r[11]);function Zt(g){r[15](g)}let ht={id:"entityType",title:"Entity Type",required:!0,source:r[3],valid:r[8].isValid("entityType"),invalid:r[8].hasErrors("entityType"),feedback:r[8].getErrors("entityType"),complexTarget:!0,help:!0};r[7].entityType!==void 0&&(ht.target=r[7].entityType),s=new Ct({props:ht}),ee.push(()=>x(s,"target",Zt)),s.$on("change",r[11]);function xt(g){r[16](g)}let $t={id:"description",label:"Description",valid:r[8].isValid("description"),invalid:r[8].hasErrors("description"),feedback:r[8].getErrors("description"),required:!0,placeholder:"Briefly describe in which cases this template should be used. Based on an entity or use case.",help:!0};r[7].description!==void 0&&($t.value=r[7].description),u=new En({props:$t}),ee.push(()=>x(u,"value",xt)),u.$on("input",r[11]);function en(g){r[17](g)}let bt={id:"metadataStructure",title:"Metadata Schema",source:r[1],valid:r[8].isValid("metadataStructure"),invalid:r[8].hasErrors("metadataStructure"),feedback:r[8].getErrors("metadataStructure"),complexTarget:!0,required:!0,help:!0};r[7].metadataStructure!==void 0&&(bt.target=r[7].metadataStructure),G=new Ct({props:bt}),ee.push(()=>x(G,"target",en)),G.$on("change",r[11]);let W=r[6]&&jt(r);return L=new me({props:{$$slots:{default:[cr]},$$scope:{ctx:r}}}),ne=new me({props:{$$slots:{default:[dr]},$$scope:{ctx:r}}}),ae=new me({props:{$$slots:{default:[mr]},$$scope:{ctx:r}}}),X=new me({props:{$$slots:{default:[pr]},$$scope:{ctx:r}}}),ve=new me({props:{$$slots:{default:[gr]},$$scope:{ctx:r}}}),we=new me({props:{$$slots:{default:[_r]},$$scope:{ctx:r}}}),ke=new me({props:{$$slots:{default:[hr]},$$scope:{ctx:r}}}),Se=new me({props:{$$slots:{default:[$r]},$$scope:{ctx:r}}}),Ee=new me({props:{$$slots:{default:[br]},$$scope:{ctx:r}}}),Fe=new je({props:{icon:hn}}),Ne=new je({props:{icon:$n}}),{c(){e=S("form"),t=S("div"),I(n.$$.fragment),i=O(),I(s.$$.fragment),o=O(),I(u.$$.fragment),d=O(),m=S("div"),k=S("div"),f=S("h3"),f.textContent=M,B=O(),I(G.$$.fragment),b=O(),W&&W.c(),T=O(),I(L.$$.fragment),U=O(),F=S("div"),P=S("h3"),P.textContent=K,R=O(),I(ne.$$.fragment),fe=O(),Q=S("h3"),Q.textContent=N,z=O(),re=S("p"),re.textContent=Ce,$e=O(),J=S("div"),I(ae.$$.fragment),p=O(),I(X.$$.fragment),be=O(),I(ve.$$.fragment),et=O(),I(we.$$.fragment),tt=O(),Ve=S("h3"),Ve.textContent=mt,nt=O(),Pe=S("div"),I(ke.$$.fragment),rt=O(),Ge=S("h3"),Ge.textContent=pt,st=O(),ye=S("div"),I(Se.$$.fragment),at=O(),I(Ee.$$.fragment),lt=O(),Te=S("div"),ge=S("button"),I(Fe.$$.fragment),it=O(),de=S("button"),I(Ne.$$.fragment),this.h()},l(g){e=E(g,"FORM",{});var $=V(e);t=E($,"DIV",{class:!0});var le=V(t);D(n.$$.fragment,le),i=H(le),D(s.$$.fragment,le),o=H(le),D(u.$$.fragment,le),le.forEach(_),d=H($),m=E($,"DIV",{class:!0});var ie=V(m);k=E(ie,"DIV",{class:!0});var se=V(k);f=E(se,"H3",{class:!0,"data-svelte-h":!0}),Ie(f)!=="svelte-gn6c29"&&(f.textContent=M),B=H(se),D(G.$$.fragment,se),b=H(se),W&&W.l(se),T=H(se),D(L.$$.fragment,se),se.forEach(_),U=H(ie),F=E(ie,"DIV",{class:!0});var oe=V(F);P=E(oe,"H3",{class:!0,"data-svelte-h":!0}),Ie(P)!=="svelte-1sgw60h"&&(P.textContent=K),R=H(oe),D(ne.$$.fragment,oe),oe.forEach(_),ie.forEach(_),fe=H($),Q=E($,"H3",{class:!0,"data-svelte-h":!0}),Ie(Q)!=="svelte-1a4sqn4"&&(Q.textContent=N),z=H($),re=E($,"P",{class:!0,"data-svelte-h":!0}),Ie(re)!=="svelte-uyt3ow"&&(re.textContent=Ce),$e=H($),J=E($,"DIV",{class:!0});var ue=V(J);D(ae.$$.fragment,ue),p=H(ue),D(X.$$.fragment,ue),be=H(ue),D(ve.$$.fragment,ue),et=H(ue),D(we.$$.fragment,ue),ue.forEach(_),tt=H($),Ve=E($,"H3",{class:!0,"data-svelte-h":!0}),Ie(Ve)!=="svelte-q471z0"&&(Ve.textContent=mt),nt=H($),Pe=E($,"DIV",{class:!0});var Je=V(Pe);D(ke.$$.fragment,Je),Je.forEach(_),rt=H($),Ge=E($,"H3",{class:!0,"data-svelte-h":!0}),Ie(Ge)!=="svelte-6vlzwl"&&(Ge.textContent=pt),st=H($),ye=E($,"DIV",{class:!0});var Me=V(ye);D(Se.$$.fragment,Me),at=H(Me),D(Ee.$$.fragment,Me),Me.forEach(_),lt=H($),Te=E($,"DIV",{class:!0});var Oe=V(Te);ge=E(Oe,"BUTTON",{title:!0,type:!0,class:!0});var Qe=V(ge);D(Fe.$$.fragment,Qe),Qe.forEach(_),it=H(Oe),de=E(Oe,"BUTTON",{title:!0,type:!0,class:!0});var Xe=V(de);D(Ne.$$.fragment,Xe),Xe.forEach(_),Oe.forEach(_),$.forEach(_),this.h()},h(){y(t,"class","w-full grid grid-cols-1 md:grid-cols-2 gap-4"),y(f,"class","h3"),y(k,"class","flex flex-col space-y-4"),y(P,"class","h3"),y(F,"class","flex flex-col space-y-4"),y(m,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),y(Q,"class","h3"),y(re,"class","p"),y(J,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),y(Ve,"class","h3"),y(Pe,"class","py-5 w-full grid grid-cols-1 md:grid-cols-2 gap-4"),y(Ge,"class","h3"),y(ye,"class","py-5 w-full grid xs:grid-cols-1 md:grid-cols-2 gap-4"),y(ge,"title","cancel"),y(ge,"type","button"),y(ge,"class","btn variant-filled-warning"),y(de,"title","save"),y(de,"type","submit"),y(de,"class","btn variant-filled-primary"),de.disabled=r[9],y(Te,"class","py-5 grow text-right gap-2")},m(g,$){j(g,e,$),h(e,t),q(n,t,null),h(t,i),q(s,t,null),h(t,o),q(u,t,null),h(e,d),h(e,m),h(m,k),h(k,f),h(k,B),q(G,k,null),h(k,b),W&&W.m(k,null),h(k,T),q(L,k,null),h(m,U),h(m,F),h(F,P),h(F,R),q(ne,F,null),h(e,fe),h(e,Q),h(e,z),h(e,re),h(e,$e),h(e,J),q(ae,J,null),h(J,p),q(X,J,null),h(J,be),q(ve,J,null),h(J,et),q(we,J,null),h(e,tt),h(e,Ve),h(e,nt),h(e,Pe),q(ke,Pe,null),h(e,rt),h(e,Ge),h(e,st),h(e,ye),q(Se,ye,null),h(ye,at),q(Ee,ye,null),h(e,lt),h(e,Te),h(Te,ge),q(Fe,ge,null),h(Te,it),h(Te,de),q(Ne,de,null),ze=!0,ot||(gt=[pe(ge,"click",r[12]),pe(e,"submit",on(r[10]))],ot=!0)},p(g,$){const le={};$[0]&256&&(le.valid=g[8].isValid("name")),$[0]&256&&(le.invalid=g[8].hasErrors("name")),$[0]&256&&(le.feedback=g[8].getErrors("name")),!a&&$[0]&128&&(a=!0,le.value=g[7].name,te(()=>a=!1)),n.$set(le);const ie={};$[0]&8&&(ie.source=g[3]),$[0]&256&&(ie.valid=g[8].isValid("entityType")),$[0]&256&&(ie.invalid=g[8].hasErrors("entityType")),$[0]&256&&(ie.feedback=g[8].getErrors("entityType")),!l&&$[0]&128&&(l=!0,ie.target=g[7].entityType,te(()=>l=!1)),s.$set(ie);const se={};$[0]&256&&(se.valid=g[8].isValid("description")),$[0]&256&&(se.invalid=g[8].hasErrors("description")),$[0]&256&&(se.feedback=g[8].getErrors("description")),!c&&$[0]&128&&(c=!0,se.value=g[7].description,te(()=>c=!1)),u.$set(se);const oe={};$[0]&2&&(oe.source=g[1]),$[0]&256&&(oe.valid=g[8].isValid("metadataStructure")),$[0]&256&&(oe.invalid=g[8].hasErrors("metadataStructure")),$[0]&256&&(oe.feedback=g[8].getErrors("metadataStructure")),!A&&$[0]&128&&(A=!0,oe.target=g[7].metadataStructure,te(()=>A=!1)),G.$set(oe),g[6]?W?(W.p(g,$),$[0]&64&&v(W,1)):(W=jt(g),W.c(),v(W,1),W.m(k,T)):W&&(De(),w(W,1,1,()=>{W=null}),qe());const ue={};$[0]&128|$[1]&32&&(ue.$$scope={dirty:$,ctx:g}),L.$set(ue);const Je={};$[0]&132|$[1]&32&&(Je.$$scope={dirty:$,ctx:g}),ne.$set(Je);const Me={};$[0]&144|$[1]&32&&(Me.$$scope={dirty:$,ctx:g}),ae.$set(Me);const Oe={};$[0]&144|$[1]&32&&(Oe.$$scope={dirty:$,ctx:g}),X.$set(Oe);const Qe={};$[0]&144|$[1]&32&&(Qe.$$scope={dirty:$,ctx:g}),ve.$set(Qe);const Xe={};$[0]&144|$[1]&32&&(Xe.$$scope={dirty:$,ctx:g}),we.$set(Xe);const vt={};$[0]&144|$[1]&32&&(vt.$$scope={dirty:$,ctx:g}),ke.$set(vt);const wt={};$[0]&129|$[1]&32&&(wt.$$scope={dirty:$,ctx:g}),Se.$set(wt);const kt={};$[0]&160|$[1]&32&&(kt.$$scope={dirty:$,ctx:g}),Ee.$set(kt),(!ze||$[0]&512)&&(de.disabled=g[9])},i(g){ze||(v(n.$$.fragment,g),v(s.$$.fragment,g),v(u.$$.fragment,g),v(G.$$.fragment,g),v(W),v(L.$$.fragment,g),v(ne.$$.fragment,g),v(ae.$$.fragment,g),v(X.$$.fragment,g),v(ve.$$.fragment,g),v(we.$$.fragment,g),v(ke.$$.fragment,g),v(Se.$$.fragment,g),v(Ee.$$.fragment,g),v(Fe.$$.fragment,g),v(Ne.$$.fragment,g),ze=!0)},o(g){w(n.$$.fragment,g),w(s.$$.fragment,g),w(u.$$.fragment,g),w(G.$$.fragment,g),w(W),w(L.$$.fragment,g),w(ne.$$.fragment,g),w(ae.$$.fragment,g),w(X.$$.fragment,g),w(ve.$$.fragment,g),w(we.$$.fragment,g),w(ke.$$.fragment,g),w(Se.$$.fragment,g),w(Ee.$$.fragment,g),w(Fe.$$.fragment,g),w(Ne.$$.fragment,g),ze=!1},d(g){g&&_(e),C(n),C(s),C(u),C(G),W&&W.d(),C(L),C(ne),C(ae),C(X),C(ve),C(we),C(ke),C(Se),C(Ee),C(Fe),C(Ne),ot=!1,ct(gt)}}}function wr(r){let e,t,n,a,i;const s=[ir,lr],l=[];function o(u,c){return u[7]?0:1}return e=o(r),t=l[e]=s[e](r),a=new Jt({}),{c(){t.c(),n=O(),I(a.$$.fragment)},l(u){t.l(u),n=H(u),D(a.$$.fragment,u)},m(u,c){l[e].m(u,c),j(u,n,c),q(a,u,c),i=!0},p(u,c){let d=e;e=o(u),e===d?l[e].p(u,c):(De(),w(l[d],1,1,()=>{l[d]=null}),qe(),t=l[e],t?t.p(u,c):(t=l[e]=s[e](u),t.c()),v(t,1),t.m(n.parentNode,n))},i(u){i||(v(t),v(a.$$.fragment,u),i=!0)},o(u){w(t),w(a.$$.fragment,u),i=!1},d(u){u&&_(n),l[e].d(u),C(a,u)}}}function kr(r,e,t){let n;const a=Qt();yt.setHelpItemList(ar);let{id:i=0}=e,{hooks:s=[]}=e,{metadataStructures:l=[]}=e,{dataStructures:o=[]}=e,u,{entities:c=[]}=e,{groups:d=[]}=e,{filetypes:m}=e;const k=ft();let f;Ze.reset(),ln(async()=>{console.log("start entity template",i),M(),console.log("onmount")});async function M(){t(7,f=await Pn(i)),console.log("load entity",f),console.log("load filetypes",m),b("metadataStructure"),i>0&&t(8,G=Ze(f))}async function B(){console.log("before submit",f);const p=await Xn(f);p!=!1&&(console.log("save",p),k("save",p))}let G=Ze.get();async function A(p){setTimeout(async()=>{t(8,G=Ze(f,p.target.id))},10),console.log(p.target.id),b(p.target.id)}async function b(p){if(p==="metadataStructure"){let X=0;f.metadataStructure!=null&&(X=f.metadataStructure.id),t(6,u=await Rn(X)),console.log(u)}}function T(){let p="create";i>0&&(p="edit");const X={type:"confirm",title:"Cancel "+p+" entity template",body:"Are you sure you wish to cancel the current form?",response:be=>{be===!0&&k("cancel")}};a.trigger(X)}function L(p){r.$$.not_equal(f.name,p)&&(f.name=p,t(7,f))}function U(p){r.$$.not_equal(f.entityType,p)&&(f.entityType=p,t(7,f))}function F(p){r.$$.not_equal(f.description,p)&&(f.description=p,t(7,f))}function P(p){r.$$.not_equal(f.metadataStructure,p)&&(f.metadataStructure=p,t(7,f))}function K(p){r.$$.not_equal(f.metadataFields,p)&&(f.metadataFields=p,t(7,f))}function R(p){r.$$.not_equal(f.metadataInvalidSaveMode,p)&&(f.metadataInvalidSaveMode=p,t(7,f))}function ne(p){r.$$.not_equal(f.hasDatastructure,p)&&(f.hasDatastructure=p,t(7,f))}function fe(p){r.$$.not_equal(f.datastructureList,p)&&(f.datastructureList=p,t(7,f))}const Q=()=>yt.show("hasDatastructure");function N(p){r.$$.not_equal(f.permissionGroups.full,p)&&(f.permissionGroups.full=p,t(7,f))}function z(p){r.$$.not_equal(f.permissionGroups.viewEditGrant,p)&&(f.permissionGroups.viewEditGrant=p,t(7,f))}function re(p){r.$$.not_equal(f.permissionGroups.viewEdit,p)&&(f.permissionGroups.viewEdit=p,t(7,f))}function Ce(p){r.$$.not_equal(f.permissionGroups.view,p)&&(f.permissionGroups.view=p,t(7,f))}function $e(p){r.$$.not_equal(f.notificationGroups,p)&&(f.notificationGroups=p,t(7,f))}function J(p){r.$$.not_equal(f.disabledHooks,p)&&(f.disabledHooks=p,t(7,f))}function ae(p){r.$$.not_equal(f.allowedFileTypes,p)&&(f.allowedFileTypes=p,t(7,f))}return r.$$set=p=>{"id"in p&&t(13,i=p.id),"hooks"in p&&t(0,s=p.hooks),"metadataStructures"in p&&t(1,l=p.metadataStructures),"dataStructures"in p&&t(2,o=p.dataStructures),"entities"in p&&t(3,c=p.entities),"groups"in p&&t(4,d=p.groups),"filetypes"in p&&t(5,m=p.filetypes)},r.$$.update=()=>{r.$$.dirty[0]&128,r.$$.dirty[0]&64,r.$$.dirty[0]&256&&t(9,n=!G.isValid())},[s,l,o,c,d,m,u,f,G,n,B,A,T,i,L,U,F,P,K,R,ne,fe,Q,N,z,re,Ce,$e,J,ae]}class yr extends Ue{constructor(e){super(),Re(this,e,kr,wr,Ke,{id:13,hooks:0,metadataStructures:1,dataStructures:2,entities:3,groups:4,filetypes:5},null,[-1,-1])}}function Sr(r){let e,t;return e=new dn({props:{error:r[18]}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},p:Ye,i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Er(r){let e,t,n,a,i,s;const l=[Ir,Tr],o=[];function u(m,k){return m[6]?0:1}e=u(r),t=o[e]=l[e](r);function c(m){r[14](m)}let d={};return r[8]!==void 0&&(d.entitytemplates=r[8]),a=new nr({props:d}),ee.push(()=>x(a,"entitytemplates",c)),a.$on("edit",r[12]),{c(){t.c(),n=O(),I(a.$$.fragment)},l(m){t.l(m),n=H(m),D(a.$$.fragment,m)},m(m,k){o[e].m(m,k),j(m,n,k),q(a,m,k),s=!0},p(m,k){let f=e;e=u(m),e===f?o[e].p(m,k):(De(),w(o[f],1,1,()=>{o[f]=null}),qe(),t=o[e],t?t.p(m,k):(t=o[e]=l[e](m),t.c()),v(t,1),t.m(n.parentNode,n));const M={};!i&&k&256&&(i=!0,M.entitytemplates=m[8],te(()=>i=!1)),a.$set(M)},i(m){s||(v(t),v(a.$$.fragment,m),s=!0)},o(m){w(t),w(a.$$.fragment,m),s=!1},d(m){m&&_(n),o[e].d(m),C(a,m)}}}function Tr(r){let e,t,n,a,i,s;return n=new je({props:{icon:vn}}),{c(){e=S("div"),t=S("button"),I(n.$$.fragment),this.h()},l(l){e=E(l,"DIV",{class:!0});var o=V(e);t=E(o,"BUTTON",{title:!0,type:!0,class:!0});var u=V(t);D(n.$$.fragment,u),u.forEach(_),o.forEach(_),this.h()},h(){y(t,"title","create"),y(t,"type","button"),y(t,"class","btn variant-filled-primary"),y(e,"class","w-screen")},m(l,o){j(l,e,o),h(e,t),q(n,t,null),a=!0,i||(s=pe(t,"click",r[11]),i=!0)},p:Ye,i(l){a||(v(n.$$.fragment,l),a=!0)},o(l){w(n.$$.fragment,l),a=!1},d(l){l&&_(e),C(n),i=!1,s()}}}function Ir(r){let e,t;return e=new yr({props:{id:r[7],hooks:r[0],metadataStructures:r[1],dataStructures:r[2],entities:r[3],groups:r[4],filetypes:r[5]}}),e.$on("save",r[10]),e.$on("cancel",r[13]),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},p(n,a){const i={};a&128&&(i.id=n[7]),a&1&&(i.hooks=n[0]),a&2&&(i.metadataStructures=n[1]),a&4&&(i.dataStructures=n[2]),a&8&&(i.entities=n[3]),a&16&&(i.groups=n[4]),a&32&&(i.filetypes=n[5]),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Dr(r){let e,t,n;return t=new dt({props:{position:At.center,label:"loading entity templates"}}),{c(){e=S("div"),I(t.$$.fragment),this.h()},l(a){e=E(a,"DIV",{class:!0});var i=V(e);D(t.$$.fragment,i),i.forEach(_),this.h()},h(){y(e,"class","text-surface-800")},m(a,i){j(a,e,i),q(t,e,null),n=!0},p:Ye,i(a){n||(v(t.$$.fragment,a),n=!0)},o(a){w(t.$$.fragment,a),n=!1},d(a){a&&_(e),C(t)}}}function qr(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!0,pending:Dr,then:Er,catch:Sr,value:17,error:18,blocks:[,,,]};return cn(r[9](),n),{c(){e=xe(),n.block.c()},l(a){e=xe(),n.block.l(a)},m(a,i){j(a,e,i),n.block.m(a,n.anchor=i),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(a,i){r=a,fn(n,r,i)},i(a){t||(v(n.block),t=!0)},o(a){for(let i=0;i<3;i+=1){const s=n.blocks[i];w(s)}t=!1},d(a){a&&_(e),n.block.d(a),n.token=null,n=null}}}function Cr(r){let e,t;return e=new bn({props:{title:"Entity Templates",note:"On this page you can edit entity template.",help:!0,$$slots:{default:[qr]},$$scope:{ctx:r}}}),{c(){I(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,a){q(e,n,a),t=!0},p(n,[a]){const i={};a&524799&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){C(e,n)}}}function Vr(r,e,t){let n,a;un(r,Le,A=>t(8,a=A));let i=[],s=[],l=[],o=[],u=[],c=[],d=!1;async function m(){t(0,i=await zn()),console.log("hooks",i),t(1,s=await Un()),t(2,l=await Kn()),t(3,o=await Bn()),t(4,u=await Jn()),t(5,c=await Qn()),Le.set(await An())}async function k(A){const b=A.detail;It(Le,a=a.filter(T=>T.id!==b.id),a),It(Le,a=[...a,b],a),t(6,d=!1)}async function f(){t(7,n=0),t(6,d=!d)}async function M(A){""+A.detail,t(6,d=!1),setTimeout(async()=>{t(7,n=A.detail),t(6,d=!0)},500)}const B=()=>t(6,d=!1);function G(A){a=A,Le.set(a)}return t(7,n=0),[i,s,l,o,u,c,d,n,a,m,k,f,M,B,G]}class Kr extends Ue{constructor(e){super(),Re(this,e,Vr,Cr,Ke,{})}}export{Kr as component,Rr as universal};
