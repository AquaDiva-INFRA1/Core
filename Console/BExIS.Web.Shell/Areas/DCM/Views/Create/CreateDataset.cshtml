@{
    ViewBag.Title = "CreateDataset";
}
@model BExIS.Dcm.CreateDatasetWizard.CreateDatasetTaskmanager
@using Telerik.Web.Mvc.UI;
@using BExIS.Web.Shell.Areas.DCM.Models;

@section Scripts{
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
    <link href="@Url.Content(Themes.GetResourcePath("Styles","wizard.css"))" rel="stylesheet" type="text/css" />
   
}

@section LeftPane 
{  
    @if (ViewData.ModelState.IsValid)
    { 
         @Html.Partial("_taskListView", Model)
    }
}

<div id="StepView" >
    @Html.ValidationSummary(true)
</div>
<div id="preloader" style="display:none;" >
        <img src="../../../../Themes/Default/Styles/Default/preloader.GIF" />
</div>


@if (ViewData.ModelState.IsValid)
{ 
    @Html.Partial("_createWizardNav", Model)

<script type="text/javascript">              
      
    var Upload;
    var SelectedDatasetId;
    var SelectedDatasetTitle;
    var SelectedDataStrutureId;
    var SelectedDataStrutureTitle;
    var Parameters = new Array();
    var index = 0;


    $(document).ready(function () {

        index = '@Model.GetCurrentStepInfoIndex()';

        $.get('@Url.Action(@Model.Current().GetActionInfo.ActionName, @Model.Current().GetActionInfo.ControllerName, new RouteValueDictionary { { "area", @Model.Current().GetActionInfo.AreaName } })', { index: index }, function (response) {

            $("#StepView").html(response);


            NavigationRefresh();
            TaskListRefresh();
        })

    })
</script>

}
