@using BExIS.Modules.Sam.UI.Models
@using BExIS.Security.Entities.Authorization
@using Telerik.Web.Mvc.UI

@model EntityInstanceModel

@(Html.Telerik().Grid<EntityPermissionGridRowModel>()
      .Name("grid_subjects")
      .DataKeys(keys =>
      {
          keys.Add(m => m.SubjectId);
      })
      .Columns(columns =>
      {
          columns.Bound(m => m.SubjectId);
          columns.Bound(m => m.SubjectName);
          columns.Bound(m => m.SubjectType);
          columns.Template(@<text>
                               @foreach (var rightType in Enum.GetValues(typeof(RightType)).Cast<RightType>())
                               {
                                   <button type="button" class="bx bx-grid-function bx-edit">Save</button>
                               }
                            </text>)
              .Width(110);
      })
      .DataBinding(dataBinding => dataBinding
          .Ajax()
          .OperationMode(GridOperationMode.Server)
          .Select("Subjects_Select", "EntityPermissions", new { Model.EntityId, Model.InstanceId })
      )
      .Filterable()
      .Pageable(pageable =>
      {
          pageable.PageSize(10, new[] { 10, 20, 50, 100 });
          pageable.Style(GridPagerStyles.NextPreviousAndNumeric | GridPagerStyles.PageSizeDropDown);
          pageable.Position(GridPagerPosition.Bottom);
      })
      .Sortable(sortable => sortable
          .OrderBy(orderby => orderby
              .Add(m => m.SubjectName)
              .Ascending()
          )
      )
      .ClientEvents(events =>
      {
          events.OnDataBound("grid_subjects_onDataBound");
      }))